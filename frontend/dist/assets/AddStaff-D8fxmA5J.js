import{j as o,r as g,t as Se,w as St,f as Nt,d as Ct,T as jt,u as Ye,m as _t,b0 as Et,y as R,b1 as kt,b2 as Pt,b3 as Ft,b4 as It}from"./index-D_CM1r6M.js";import{F as ye,a as xe}from"./FormSection-CqnVxHJP.js";import{I as ne,R as Ot}from"./FormFields-cbkv4QEu.js";import{P as v}from"./index-DKThCUkT.js";import{m as Mt,n as Lt,R as $t,S as Tt,o as At,T as Ht,U as Dt,V as Rt,W as Wt,X as qt,e as Bt,Y as Ut,k as Vt,Z as Kt,_ as zt,$ as Zt}from"./index-jLjFIv2f.js";import{r as Gt}from"./index-DzhyyO-l.js";import{g as Yt}from"./getRoleRoute-Do-Qfut4.js";import"./index-CVhLpNpZ.js";import"./iconBase-DSUUJbys.js";import"./index-DK6bWzrh.js";import"./index-Dskypj5f.js";const ct=({name:e,label:t,value:n,onChange:r,required:s=!1,disabled:i=!1,placeholder:a="Select date",className:l=""})=>{const c=m=>{const h=m.target.value;r(h)},u=(m=>{if(!m)return"";try{if(typeof m=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(m))return m;const h=new Date(m);if(isNaN(h.getTime()))return"";const p=h.getFullYear(),w=String(h.getMonth()+1).padStart(2,"0"),I=String(h.getDate()).padStart(2,"0");return`${p}-${w}-${I}`}catch(h){return console.error("Date formatting error:",h),""}})(n);return o.jsxs("div",{className:`mb-4 ${l}`,children:[t&&o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t,s&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"date",name:e,value:u,onChange:c,className:`w-full p-2 pl-10 border rounded-md ${i?"bg-gray-100":"bg-white"}`,placeholder:a,disabled:i}),o.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:o.jsx(Mt,{className:"h-5 w-5 text-gray-400"})})]})]})};ct.propTypes={name:v.string.isRequired,label:v.string,value:v.oneOfType([v.string,v.instanceOf(Date),v.number]),onChange:v.func.isRequired,required:v.bool,disabled:v.bool,placeholder:v.string,className:v.string};const Xt=["onCopy","onCut","onPaste"],Jt=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Qt=["onFocus","onBlur"],en=["onInput","onInvalid","onReset","onSubmit"],tn=["onLoad","onError"],nn=["onKeyDown","onKeyPress","onKeyUp"],rn=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],on=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],sn=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],an=["onSelect"],cn=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],un=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],ln=["onScroll"],dn=["onWheel"],fn=["onAnimationStart","onAnimationEnd","onAnimationIteration"],mn=["onTransitionEnd"],pn=["onToggle"],hn=["onChange"],gn=[...Xt,...Jt,...Qt,...en,...tn,...nn,...rn,...on,...sn,...an,...cn,...un,...ln,...dn,...fn,...mn,...hn,...pn];function bn(e,t){const n={};for(const r of gn){const s=e[r];s&&(n[r]=s)}return n}function B(e){if(e instanceof Date)return e.getHours();if(typeof e=="string"){const t=e.split(":");if(t.length>=2){const n=t[0];if(n){const r=Number.parseInt(n,10);if(!Number.isNaN(r))return r}}}throw new Error(`Failed to get hours from date: ${e}.`)}function ae(e){if(e instanceof Date)return e.getMinutes();if(typeof e=="string"){const t=e.split(":");if(t.length>=2){const n=t[1]||"0",r=Number.parseInt(n,10);if(!Number.isNaN(r))return r}}throw new Error(`Failed to get minutes from date: ${e}.`)}function de(e){if(e instanceof Date)return e.getSeconds();if(typeof e=="string"){const t=e.split(":");if(t.length>=2){const n=t[2]||"0",r=Number.parseInt(n,10);if(!Number.isNaN(r))return r}}throw new Error(`Failed to get seconds from date: ${e}.`)}function De(e){if(e instanceof Date)return e.getMilliseconds();if(typeof e=="string"){const t=e.split(":");if(t.length>=2){const r=(t[2]||"0").split(".")[1]||"0",s=Number.parseInt(r,10);if(!Number.isNaN(s))return s}}throw new Error(`Failed to get seconds from date: ${e}.`)}function we(e,t=2){const n=`${e}`;return n.length>=t?e:`0000${n}`.slice(-t)}function ut(e){const t=we(B(e)),n=we(ae(e));return`${t}:${n}`}function lt(e){const t=we(B(e)),n=we(ae(e)),r=we(de(e));return`${t}:${n}:${r}`}function Re(e){var t=e.angle,n=t===void 0?0:t,r=e.name,s=e.length,i=s===void 0?100:s,a=e.oppositeLength,l=a===void 0?10:a,c=e.width,f=c===void 0?1:c;return o.jsx("div",{className:"react-clock__hand react-clock__".concat(r,"-hand"),style:{transform:"rotate(".concat(n,"deg)")},children:o.jsx("div",{className:"react-clock__hand__body react-clock__".concat(r,"-hand__body"),style:{width:"".concat(f,"px"),top:"".concat(50-i/2,"%"),bottom:"".concat(50-l/2,"%")}})})}var Xe=g.memo(function(t){var n=t.angle,r=n===void 0?0:n,s=t.length,i=s===void 0?10:s,a=t.name,l=t.width,c=l===void 0?1:l;return o.jsx("div",{className:"react-clock__mark react-clock__".concat(a,"-mark"),style:{transform:"rotate(".concat(r,"deg)")},children:o.jsx("div",{className:"react-clock__mark__body react-clock__".concat(a,"-mark__body"),style:{width:"".concat(c,"px"),top:0,bottom:"".concat(100-i/2,"%")}})})}),vn=g.memo(function(t){var n=t.angle,r=n===void 0?0:n,s=t.length,i=s===void 0?10:s,a=t.name,l=t.number;return o.jsx("div",{className:"react-clock__mark react-clock__".concat(a,"-mark"),style:{transform:"rotate(".concat(r,"deg)")},children:o.jsx("div",{className:"react-clock__mark__number",style:{transform:"rotate(-".concat(r,"deg)"),top:"".concat(i/2,"%")},children:l})})});const yn=(e,t,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const s=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!xn(s,i)&&r||Object.defineProperty(e,n,i)},xn=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},wn=(e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},Sn=(e,t)=>`/* Wrapped ${e}*/
${t}`,Nn=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Cn=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),jn=(e,t,n)=>{const r=n===""?"":`with ${n.trim()}() `,s=Sn.bind(null,r,t.toString());Object.defineProperty(s,"name",Cn);const{writable:i,enumerable:a,configurable:l}=Nn;Object.defineProperty(e,"toString",{value:s,writable:i,enumerable:a,configurable:l})};function _n(e,t,{ignoreNonConfigurable:n=!1}={}){const{name:r}=e;for(const s of Reflect.ownKeys(t))yn(e,t,s,n);return wn(e,t),jn(e,t,r),e}const _e=2147483647,En=new WeakMap,We=new WeakMap,kn=new WeakMap;function Pn(e,t){const n=e.get(t);if(n){if(n.maxAge<=Date.now()){e.delete(t);return}return n}}function dt(e,{cacheKey:t,cache:n=new Map,maxAge:r}={}){if(r===0)return e;if(typeof r=="number"&&Number.isFinite(r)){if(r>_e)throw new TypeError(`The \`maxAge\` option cannot exceed ${_e}.`);if(r<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const s=function(...i){const a=t?t(i):i[0],l=Pn(n,a);if(l)return l.data;const c=e.apply(this,i),f=typeof r=="function"?r(...i):r;if(f!==void 0&&f!==Number.POSITIVE_INFINITY){if(!Number.isFinite(f))throw new TypeError("The `maxAge` function must return a finite number, `0`, or `Infinity`.");if(f<=0)return c;if(f>_e)throw new TypeError(`The \`maxAge\` function result cannot exceed ${_e}.`)}if(n.set(a,{data:c,maxAge:f===void 0||f===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:Date.now()+f}),f!==void 0&&f!==Number.POSITIVE_INFINITY){const u=setTimeout(()=>{n.delete(a),We.get(s)?.delete(u)},f);u.unref?.();const m=We.get(s)??new Set;m.add(u),We.set(s,m)}return c};return _n(s,e,{ignoreNonConfigurable:!0}),En.set(s,n),kn.set(s,t??(i=>i[0])),s}function Fn(e){return typeof e=="string"}function In(e,t,n){return n.indexOf(e)===t}function On(e){return e.toLowerCase()===e}function Je(e){return e.indexOf(",")===-1?e:e.split(",")}function Ke(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return Ke(n)}if(e.indexOf("@")!==-1){var r=e.split("@")[0],n=r===void 0?"":r;return Ke(n)}if(e.indexOf("-")===-1||!On(e))return e;var s=e.split("-"),i=s[0],a=s[1],l=a===void 0?"":a;return"".concat(i,"-").concat(l.toUpperCase())}function Mn(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,r=n===void 0?!0:n,s=t.fallbackLocale,i=s===void 0?"en-US":s,a=[];if(typeof navigator<"u"){for(var l=navigator.languages||[],c=[],f=0,u=l;f<u.length;f++){var m=u[f];c=c.concat(Je(m))}var h=navigator.language,p=h&&Je(h);a=a.concat(c,p)}return r&&a.push(i),a.filter(Fn).map(Ke).filter(In)}var Ln=dt(Mn,{cacheKey:JSON.stringify});function $n(e){return Ln(e)[0]||null}var Ze=dt($n,{cacheKey:JSON.stringify});function Tn(e,t){return t.toLocaleString(e||Ze()||void 0)}function An(e){return e!==null&&e!==!1&&!Number.isNaN(Number(e))}function Hn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.max.apply(Math,e.filter(An))}function Dn(e){var t=e.className,n=e.formatHour,r=n===void 0?Tn:n,s=e.hourHandLength,i=s===void 0?50:s,a=e.hourHandOppositeLength,l=e.hourHandWidth,c=l===void 0?4:l,f=e.hourMarksLength,u=f===void 0?10:f,m=e.hourMarksWidth,h=m===void 0?3:m,p=e.locale,w=e.minuteHandLength,I=w===void 0?70:w,_=e.minuteHandOppositeLength,L=e.minuteHandWidth,H=L===void 0?2:L,y=e.minuteMarksLength,P=y===void 0?6:y,E=e.minuteMarksWidth,b=E===void 0?1:E,j=e.renderHourMarks,C=j===void 0?!0:j,N=e.renderMinuteHand,O=N===void 0?!0:N,A=e.renderMinuteMarks,Z=A===void 0?!0:A,U=e.renderNumbers,ee=e.renderSecondHand,V=ee===void 0?!0:ee,X=e.secondHandLength,ie=X===void 0?90:X,re=e.secondHandOppositeLength,G=e.secondHandWidth,J=G===void 0?1:G,D=e.size,$=D===void 0?150:D,Y=e.useMillisecondPrecision,k=e.value;function fe(){if(!Z)return null;for(var T=[],M=1;M<=60;M+=1){var le=C&&!(M%5);le||T.push(o.jsx(Xe,{angle:M*6,length:P,name:"minute",width:b},"minute_".concat(M)))}return T}function me(){if(!C)return null;for(var T=[],M=1;M<=12;M+=1)T.push(o.jsx(Xe,{angle:M*30,length:u,name:"hour",width:h},"hour_".concat(M)));return T}function te(){if(!U)return null;for(var T=[],M=1;M<=12;M+=1)T.push(o.jsx(vn,{angle:M*30,length:Hn(C&&u,Z&&P,0),name:"number",number:r(p,M)},"number_".concat(M)));return T}function ge(){return o.jsxs("div",{className:"react-clock__face",children:[fe(),me(),te()]})}function pe(){var T=k?B(k)*30+ae(k)/2+de(k)/120+(Y?De(k)/12e4:0):0;return o.jsx(Re,{angle:T,length:i,name:"hour",oppositeLength:a,width:c})}function be(){if(!O)return null;var T=k?B(k)*360+ae(k)*6+de(k)/10+(Y?De(k)/1e4:0):0;return o.jsx(Re,{angle:T,length:I,name:"minute",oppositeLength:_,width:H})}function ue(){if(!V)return null;var T=k?ae(k)*360+de(k)*6+(Y?De(k)*.006:0):0;return o.jsx(Re,{angle:T,length:ie,name:"second",oppositeLength:re,width:J})}return o.jsxs("time",{className:Se("react-clock",t),dateTime:k instanceof Date?k.toLocaleTimeString("en",{hourCycle:"h23",hour:"2-digit",minute:O?"2-digit":void 0,second:V?"2-digit":void 0}):k||void 0,style:{width:$,height:$},children:[ge(),pe(),be(),ue()]})}function W(e){return e.getBoundingClientRect()}function Qe(e,t){return{get collidedTop(){return W(e).top<W(t).top},get collidedBottom(){return W(e).bottom>W(t).bottom},get collidedLeft(){return W(e).left<W(t).left},get collidedRight(){return W(e).right>W(t).right},get overflowTop(){return W(t).top-W(e).top},get overflowBottom(){return W(e).bottom-W(t).bottom},get overflowLeft(){return W(t).left-W(e).left},get overflowRight(){return W(e).right-W(t).right}}}var qe,et;function Rn(){if(et)return qe;et=1;var e=function(){};return qe=e,qe}var Wn=Rn();const tt=St(Wn);var qn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Bn=typeof window<"u",Un=Bn&&"MutationObserver"in window;function Ee(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Vn(e){let t=e.parentElement;for(;t;){const{overflow:n}=window.getComputedStyle(t);if(n.split(" ").every(r=>r==="auto"||r==="scroll"))return t;t=t.parentElement}return document.documentElement}function ft({axis:e,container:t,element:n,invertAxis:r,scrollContainer:s,secondary:i,spacing:a}){const l=window.getComputedStyle(n),c=t.parentElement;if(!c)return;const f=Qe(c,s),u=Qe(c,document.documentElement),m=e==="x",h=m?"left":"top",p=m?"right":"bottom",w=m?"width":"height",I=`overflow${Ee(h)}`,_=`overflow${Ee(p)}`,L=`scroll${Ee(h)}`,H=Ee(w),y=`offset${H}`,P=`client${H}`,E=`min-${w}`,b=s[y]-s[P],j=typeof a=="object"?a[h]:a;let C=-Math.max(f[I],u[I]+document.documentElement[L])-j;const N=typeof a=="object"?a[p]:a;let O=-Math.max(f[_],u[_]-document.documentElement[L])-N-b;i&&(C+=c[P],O+=c[P]);const A=n[y];function Z(){n.style[h]="auto",n.style[p]=i?"0":"100%"}function U(){n.style[h]=i?"0":"100%",n.style[p]="auto"}function ee(G,J){const D=A<=G;return D&&J(),D}function V(){return ee(C,Z)}function X(){return ee(O,U)}function ie(){const G=C>O,J=l.getPropertyValue(E),D=J?Number.parseInt(J,10):null;function $(Y){tt(!D||Y>=D,`<Fit />'s child will not fit anywhere with its current ${E} of ${D}px.`);const k=Math.max(Y,D||0);tt(!1,`<Fit />'s child needed to have its ${w} decreased to ${k}px.`),n.style[w]=`${k}px`}G?($(C),Z()):($(O),U())}let re;r?re=V()||X():re=X()||V(),re||ie()}function Kn(e){ft(e)}function zn(e){ft(Object.assign(Object.assign({},e),{axis:e.axis==="x"?"y":"x",secondary:!0}))}function Zn(e){const{invertAxis:t,invertSecondaryAxis:n}=e,r=qn(e,["invertAxis","invertSecondaryAxis"]);Kn(Object.assign(Object.assign({},r),{invertAxis:t})),zn(Object.assign(Object.assign({},r),{invertAxis:n}))}function Gn({children:e,invertAxis:t,invertSecondaryAxis:n,mainAxis:r="y",spacing:s=8}){const i=g.useRef(void 0),a=g.useRef(void 0),l=g.useRef(void 0),c=g.useRef(void 0),f=g.useRef(void 0),u=g.useCallback(()=>{if(!f.current||!i.current||!a.current)return;const p=a.current.clientWidth,w=a.current.clientHeight;if(l.current===p&&c.current===w)return;l.current=p,c.current=w;const I=i.current.parentElement;if(!I)return;const _=window.getComputedStyle(a.current),{position:L}=_;L!=="absolute"&&(a.current.style.position="absolute");const H=window.getComputedStyle(I),{position:y}=H;y!=="relative"&&y!=="absolute"&&(I.style.position="relative"),Zn({axis:r,container:i.current,element:a.current,invertAxis:t,invertSecondaryAxis:n,scrollContainer:f.current,spacing:s})},[t,n,r,s]),m=g.Children.only(e);g.useEffect(()=>{u();function p(){u()}Un&&a.current&&new MutationObserver(p).observe(a.current,{attributes:!0,attributeFilter:["class","style"]})},[u]);function h(p){!p||!(p instanceof HTMLElement)||(a.current=p,f.current=Vn(p))}return o.jsx("span",{ref:p=>{if(!p)return;i.current=p;const w=p?.firstElementChild;h(w)},style:{display:"contents"},children:m})}function Yn({children:e}){return o.jsx("span",{className:"react-time-picker__inputGroup__divider",children:e})}function nt(e,t){let n=Number(e);return t==="am"&&n===12?n=0:t==="pm"&&n<12&&(n+=12),n}function he(e){return[Number(e)%12||12,Number(e)<12?"am":"pm"]}const Be=new Map;function mt(e){return function(n,r){const s=n||Ze();Be.has(s)||Be.set(s,new Map);const i=Be.get(s);return i.has(e)||i.set(e,new Intl.DateTimeFormat(s||void 0,e).format),i.get(e)(r)}}const Ue=new Map;function Xn(e){return(t,n)=>{const r=t||Ze();Ue.has(r)||Ue.set(r,new Map);const s=Ue.get(r);return s.has(e)||s.set(e,new Intl.NumberFormat(r||void 0,e).format),s.get(e)(n)}}const Jn=["9","Ù©"],rt=new RegExp(`[${Jn.join("")}]`),ot=mt({hour:"numeric"});function pt(e){const t=ot(e,new Date(2017,0,1,9)),n=ot(e,new Date(2017,0,1,21)),[r,s]=t.split(rt),[i,a]=n.split(rt);if(a!==void 0){if(r!==i)return[r,i].map(l=>l.trim());if(s!==a)return[s,a].map(l=>l.trim())}return["AM","PM"]}function ht(e){return e!==null&&e!==!1&&!Number.isNaN(Number(e))}function Ie(...e){return Math.min(...e.filter(ht))}function Oe(...e){return Math.max(...e.filter(ht))}function Qn({ariaLabel:e,autoFocus:t,className:n,disabled:r,inputRef:s,locale:i,maxTime:a,minTime:l,onChange:c,onKeyDown:f,required:u,value:m}){const h=l?he(B(l))[1]==="pm":!1,p=a?he(B(a))[1]==="am":!1,w="amPm",[I,_]=pt(i);return o.jsxs("select",{"aria-label":e,autoFocus:t,className:Se(`${n}__input`,`${n}__${w}`),"data-input":"true","data-select":"true",disabled:r,name:w,onChange:c,onKeyDown:f,ref:s,required:u,value:m!==null?m:"",children:[!m&&o.jsx("option",{value:"",children:"--"}),o.jsx("option",{disabled:h,value:"am",children:I}),o.jsx("option",{disabled:p,value:"pm",children:_})]})}var er=["normal","small-caps"];function gt(e){if(!e)return"";var t=window.getComputedStyle(e);if(t.font)return t.font;var n=t.fontFamily!=="";if(!n)return"";var r=er.includes(t.fontVariant)?t.fontVariant:"normal";return"".concat(t.fontStyle," ").concat(r," ").concat(t.fontWeight," ").concat(t.fontSize," / ").concat(t.lineHeight," ").concat(t.fontFamily)}var st;function tr(e,t){var n=st||(st=document.createElement("canvas")),r=n.getContext("2d");if(!r)return null;r.font=t;var s=r.measureText(e).width;return Math.ceil(s)}function Fe(e){if(typeof document>"u"||!e)return null;var t=gt(e),n=e.value||e.placeholder,r=tr(n,t);return r===null?null:(e.style.width="".concat(r,"px"),r)}const Ge=typeof window<"u",nr=Ge?g.useLayoutEffect:g.useEffect,rr=Ge&&/(MSIE|Trident\/|Edge\/)/.test(navigator.userAgent),or=Ge&&/Firefox/.test(navigator.userAgent);function sr(e){const{target:t}=e;rr?requestAnimationFrame(()=>t.select()):t.select()}function ar(e){if(document.readyState==="complete")return;function t(){Fe(e)}window.addEventListener("load",t)}function ir(e){if(!document.fonts)return;const t=gt(e);if(!t||document.fonts.check(t))return;function r(){Fe(e)}document.fonts.addEventListener("loadingdone",r)}function cr(e){if(e&&"selectionStart"in e&&e.selectionStart!==null&&"selectionEnd"in e&&e.selectionEnd!==null)return e.value.slice(e.selectionStart,e.selectionEnd);if("getSelection"in window){const t=window.getSelection();return t?.toString()}return null}function ur(e){if(e!==null)return function(n){if(or)return;const{key:r,target:s}=n,{value:i}=s,a=r.length===1&&/\d/.test(r),l=cr(s);(!a||!(l||i.length<e))&&n.preventDefault()}}function Me({ariaLabel:e,autoFocus:t,className:n,disabled:r,inputRef:s,max:i,min:a,name:l,nameForClass:c,onChange:f,onKeyDown:u,onKeyUp:m,placeholder:h="--",required:p,showLeadingZeros:w,step:I,value:_}){nr(()=>{!s||!s.current||(Fe(s.current),ar(s.current),ir(s.current))},[s,_]);const L=w&&_&&Number(_)<10&&(_==="0"||!_.toString().startsWith("0")),H=i?i.toString().length:null;return o.jsxs(o.Fragment,{children:[L?o.jsx("span",{className:`${n}__leadingZero`,children:"0"}):null,o.jsx("input",{"aria-label":e,autoComplete:"off",autoFocus:t,className:Se(`${n}__input`,`${n}__${c||l}`,L&&`${n}__input--hasLeadingZero`),"data-input":"true",disabled:r,inputMode:"numeric",max:i,min:a,name:l,onChange:f,onFocus:sr,onKeyDown:u,onKeyPress:ur(H),onKeyUp:y=>{Fe(y.target),m&&m(y)},placeholder:h,ref:s,required:p,step:I,type:"number",value:_!==null?_:""})]})}function lr({amPm:e,maxTime:t,minTime:n,value:r,...s}){const i=Ie(12,t&&(()=>{const[c,f]=he(B(t));return f!==e?null:c})()),a=Oe(1,n&&(()=>{const[c,f]=he(B(n));return f!==e||c===12?null:c})()),l=r?he(r)[0].toString():"";return o.jsx(Me,{max:i,min:a,name:"hour12",nameForClass:"hour",value:l,...s})}function dr({maxTime:e,minTime:t,...n}){const r=Ie(23,e&&B(e)),s=Oe(0,t&&B(t));return o.jsx(Me,{max:r,min:s,name:"hour24",nameForClass:"hour",...n})}function fr({hour:e,maxTime:t,minTime:n,showLeadingZeros:r=!0,...s}){function i(c){return e===B(c).toString()}const a=Ie(59,t&&i(t)&&ae(t)),l=Oe(0,n&&i(n)&&ae(n));return o.jsx(Me,{max:a,min:l,name:"minute",showLeadingZeros:r,...s})}function mr({ariaLabel:e,disabled:t,maxTime:n,minTime:r,name:s,onChange:i,required:a,value:l,valueType:c}){const f=(()=>{switch(c){case"hour":return h=>`${B(h)}:00`;case"minute":return ut;case"second":return lt;default:throw new Error("Invalid valueType")}})(),u=(()=>{switch(c){case"hour":return 3600;case"minute":return 60;case"second":return 1;default:throw new Error("Invalid valueType")}})();function m(h){h.stopPropagation()}return o.jsx("input",{"aria-label":e,disabled:t,hidden:!0,max:n?f(n):void 0,min:r?f(r):void 0,name:s,onChange:i,onFocus:m,required:a,step:u,style:{visibility:"hidden",position:"absolute",zIndex:"-999"},type:"time",value:l?f(l):""})}function pr({hour:e,maxTime:t,minTime:n,minute:r,showLeadingZeros:s=!0,...i}){function a(f){return e===B(f).toString()&&r===ae(f).toString()}const l=Ie(59,t&&a(t)&&de(t)),c=Oe(0,n&&a(n)&&de(n));return o.jsx(Me,{max:l,min:c,name:"second",showLeadingZeros:s,...i})}const at={},hr=["hour","minute","second"];function gr(e){return e.dataset.input==="true"}function it(e,t){let n=e;do n=n[t];while(n&&!gr(n));return n}function Ve(e){e&&e.focus()}function br(e,t,n){const r=[],s=new RegExp(Object.keys(t).map(a=>`${a}+`).join("|"),"g"),i=e.match(s);return e.split(s).reduce((a,l,c)=>{const f=l&&o.jsx(Yn,{children:l},`separator_${c}`);a.push(f);const u=i?.[c];if(u){const m=t[u]||t[Object.keys(t).find(h=>u.match(h))];if(!m)return a;!n&&r.includes(m)?a.push(u):(a.push(m(u,c)),r.push(m))}return a},[])}const ke=Xn({useGrouping:!1});function vr({amPmAriaLabel:e,autoFocus:t,className:n,disabled:r,format:s,hourAriaLabel:i,hourPlaceholder:a,isClockOpen:l=null,locale:c,maxDetail:f="minute",maxTime:u,minTime:m,minuteAriaLabel:h,minutePlaceholder:p,name:w="time",nativeInputAriaLabel:I,onChange:_,onInvalidChange:L,required:H,secondAriaLabel:y,secondPlaceholder:P,value:E}){const[b,j]=g.useState(null),[C,N]=g.useState(null),[O,A]=g.useState(null),[Z,U]=g.useState(null),[ee,V]=g.useState(null),X=g.useRef(null),ie=g.useRef(null),re=g.useRef(null),G=g.useRef(null),J=g.useRef(null),[D,$]=g.useState(l),Y=g.useRef(void 0);g.useEffect(()=>{$(l)},[l]),g.useEffect(()=>{const d=E;d?(j(he(B(d))[1]),N(B(d).toString()),A(ae(d).toString()),U(de(d).toString()),V(d)):(j(null),N(null),A(null),U(null),V(null))},[E,m,u,f,D]);const k=f,fe=(()=>{const d=hr.indexOf(f),x=at[d]||(()=>{const S={hour:"numeric"};return d>=1&&(S.minute="numeric"),d>=2&&(S.second="numeric"),at[d]=S,S})();return mt(x)})();function me(d){return(()=>{switch(k){case"hour":case"minute":return ut;case"second":return lt;default:throw new Error("Invalid valueType")}})()(d)}const te=s||(()=>{const Te=new Date(2017,0,1,21,13,14);return fe(c,Te).replace(ke(c,9),"h").replace(ke(c,21),"H").replace(ke(c,13),"mm").replace(ke(c,14),"ss").replace(new RegExp(pt(c).join("|")),"a")})(),ge=(()=>{const d=te.match(/[^0-9a-z]/i);return d?d[0]:null})();function pe(d){if(d.target===d.currentTarget){const x=d.target.children[1];Ve(x)}}function be(d){switch(Y.current=d.key,d.key){case"ArrowLeft":case"ArrowRight":case ge:{d.preventDefault();const{target:x}=d,S=d.key==="ArrowLeft"?"previousElementSibling":"nextElementSibling",Q=it(x,S);Ve(Q);break}}}function ue(d){const{key:x,target:S}=d;if(!(Y.current===x)||!!Number.isNaN(Number(x)))return;const ve=S.getAttribute("max");if(!ve)return;const{value:je}=S;if(Number(je)*10>Number(ve)||je.length>=ve.length){const Ae=it(S,"nextElementSibling");Ve(Ae)}}function T(){if(!_)return;function d(q){return!!q}const x=[X.current,ie.current,re.current,G.current,J.current].filter(d),S=x.slice(1),Q={};for(const q of x)Q[q.name]=q.type==="number"?q.valueAsNumber:q.value;if(S.every(q=>!q.value)){_(null,!1);return}const ve=x.every(q=>q.value),je=x.every(q=>q.validity.valid);if(ve&&je){const q=Number(Q.hour24||Q.hour12&&Q.amPm&&nt(Q.hour12,Q.amPm)||0),Ae=Number(Q.minute||0),vt=Number(Q.second||0),He=wt=>`0${wt}`.slice(-2),yt=`${He(q)}:${He(Ae)}:${He(vt)}`,xt=me(yt);_(xt,!1);return}L&&L()}function M(d){const{name:x,value:S}=d.target;switch(x){case"amPm":j(S);break;case"hour12":N(S?nt(S,b||"am").toString():"");break;case"hour24":N(S);break;case"minute":A(S);break;case"second":U(S);break}T()}function le(d){const{value:x}=d.target;if(!_)return;_(x||null,!1)}const se={className:n,disabled:r,maxTime:u,minTime:m,onChange:M,onKeyDown:be,onKeyUp:ue,required:!!(H||D)};function Le(d,x){if(d&&d.length>2)throw new Error(`Unsupported token: ${d}`);const S=d?d.length===2:!1;return o.jsx(lr,{...se,amPm:b,ariaLabel:i,autoFocus:x===0&&t,inputRef:ie,placeholder:a,showLeadingZeros:S,value:C},"hour12")}function $e(d,x){if(d&&d.length>2)throw new Error(`Unsupported token: ${d}`);const S=d?d.length===2:!1;return o.jsx(dr,{...se,ariaLabel:i,autoFocus:x===0&&t,inputRef:re,placeholder:a,showLeadingZeros:S,value:C},"hour24")}function Ne(d,x){return/h/.test(d)?Le(d,x):$e(d,x)}function F(d,x){if(d&&d.length>2)throw new Error(`Unsupported token: ${d}`);const S=d?d.length===2:!1;return o.jsx(fr,{...se,ariaLabel:h,autoFocus:x===0&&t,hour:C,inputRef:G,placeholder:p,showLeadingZeros:S,value:O},"minute")}function K(d,x){if(d&&d.length>2)throw new Error(`Unsupported token: ${d}`);const S=d?d.length===2:!0;return o.jsx(pr,{...se,ariaLabel:y,autoFocus:x===0&&t,hour:C,inputRef:J,minute:O,placeholder:P,showLeadingZeros:S,value:Z},"second")}function oe(d,x){return o.jsx(Qn,{...se,ariaLabel:e,autoFocus:x===0&&t,inputRef:X,locale:c,onChange:M,value:b},"ampm")}function ce(){return br(te,{h:Ne,H:Ne,m:F,s:K,a:oe},typeof s<"u")}function Ce(){return o.jsx(mr,{ariaLabel:I,disabled:r,maxTime:u,minTime:m,name:w,onChange:le,required:H,value:ee,valueType:k},"time")}return o.jsxs("div",{className:n,onClick:pe,children:[Ce(),ce()]})}const z="react-time-picker",yr=["mousedown","focusin","touchstart"],bt={xmlns:"http://www.w3.org/2000/svg",width:19,height:19,viewBox:"0 0 19 19",stroke:"black",strokeWidth:2},xr=o.jsxs("svg",{...bt,"aria-hidden":"true",className:`${z}__clock-button__icon ${z}__button__icon`,fill:"none",children:[o.jsx("circle",{cx:"9.5",cy:"9.5",r:"7.5"}),o.jsx("path",{d:"M9.5 4.5 v5 h4"})]}),wr=o.jsxs("svg",{...bt,"aria-hidden":"true",className:`${z}__clear-button__icon ${z}__button__icon`,children:[o.jsx("line",{x1:"4",x2:"15",y1:"4",y2:"15"}),o.jsx("line",{x1:"15",x2:"4",y1:"4",y2:"15"})]});function Sr(e){const{amPmAriaLabel:t,autoFocus:n,className:r,clearAriaLabel:s,clearIcon:i=wr,clockAriaLabel:a,clockIcon:l=xr,closeClock:c=!0,"data-testid":f,hourAriaLabel:u,hourPlaceholder:m,disableClock:h,disabled:p,format:w,id:I,isOpen:_=null,locale:L,maxTime:H,maxDetail:y="minute",minTime:P,minuteAriaLabel:E,minutePlaceholder:b,name:j="time",nativeInputAriaLabel:C,onClockClose:N,onClockOpen:O,onChange:A,onFocus:Z,onInvalidChange:U,openClockOnFocus:ee=!0,required:V,value:X,secondAriaLabel:ie,secondPlaceholder:re,shouldCloseClock:G,shouldOpenClock:J,...D}=e,[$,Y]=g.useState(_),k=g.useRef(null),fe=g.useRef(null);g.useEffect(()=>{Y(_)},[_]);function me({reason:F}){J&&!J({reason:F})||(Y(!0),O&&O())}const te=g.useCallback(({reason:F})=>{G&&!G({reason:F})||(Y(!1),N&&N())},[N,G]);function ge(){$?te({reason:"buttonClick"}):me({reason:"buttonClick"})}function pe(F,K=c){K&&te({reason:"select"}),A&&A(F)}function be(F){Z&&Z(F),!(p||$||!ee||F.target.dataset.select==="true")&&me({reason:"focus"})}const ue=g.useCallback(F=>{F.key==="Escape"&&te({reason:"escape"})},[te]);function T(){pe(null)}function M(F){F.stopPropagation()}const le=g.useCallback(F=>{const{current:K}=k,{current:oe}=fe,ce="composedPath"in F?F.composedPath()[0]:F.target;ce&&K&&!K.contains(ce)&&(!oe||!oe.contains(ce))&&te({reason:"outsideAction"})},[te]),se=g.useCallback((F=$)=>{for(const K of yr)F?document.addEventListener(K,le):document.removeEventListener(K,le);F?document.addEventListener("keydown",ue):document.removeEventListener("keydown",ue)},[$,le,ue]);g.useEffect(()=>(se(),()=>{se(!1)}),[se]);function Le(){const[F]=Array.isArray(X)?X:[X],K={amPmAriaLabel:t,hourAriaLabel:u,minuteAriaLabel:E,nativeInputAriaLabel:C,secondAriaLabel:ie},oe={hourPlaceholder:m,minutePlaceholder:b,secondPlaceholder:re};return o.jsxs("div",{className:`${z}__wrapper`,children:[o.jsx(vr,{...K,...oe,autoFocus:n,className:`${z}__inputGroup`,disabled:p,format:w,isClockOpen:$,locale:L,maxDetail:y,maxTime:H,minTime:P,name:j,onChange:pe,onInvalidChange:U,required:V,value:F}),i!==null&&o.jsx("button",{"aria-label":s,className:`${z}__clear-button ${z}__button`,disabled:p,onClick:T,onFocus:M,type:"button",children:typeof i=="function"?g.createElement(i):i}),l!==null&&!h&&o.jsx("button",{"aria-expanded":$||!1,"aria-label":a,className:`${z}__clock-button ${z}__button`,disabled:p,onClick:ge,onFocus:M,type:"button",children:typeof l=="function"?g.createElement(l):l})]})}function $e(){if($===null||h)return null;const{clockProps:F,portalContainer:K,value:oe}=e,ce=`${z}__clock`,Ce=Se(ce,`${ce}--${$?"open":"closed"}`),[d]=Array.isArray(oe)?oe:[oe],x=o.jsx(Dn,{locale:L,value:d,...F});return K?Gt.createPortal(o.jsx("div",{ref:fe,className:Ce,children:x}),K):o.jsx(Gn,{children:o.jsx("div",{ref:S=>{S&&!$&&S.removeAttribute("style")},className:Ce,children:x})})}const Ne=g.useMemo(()=>bn(D),[D]);return o.jsxs("div",{className:Se(z,`${z}--${$?"open":"closed"}`,`${z}--${p?"disabled":"enabled"}`,r),"data-testid":f,id:I,...Ne,onFocus:be,ref:k,children:[Le(),$e()]})}const ze=({name:e,label:t,value:n,onChange:r,required:s=!1,disabled:i=!1,placeholder:a="Select time",className:l=""})=>{const c=u=>{if(!u){r("");return}const[m,h]=u.split(":").map(Number);let p="AM",w=m;m>=12&&(p="PM",m>12&&(w=m-12)),m===0&&(w=12);const I=`${w}:${h.toString().padStart(2,"0")} ${p}`;r(I)},f=u=>{if(!u)return null;const[m,h]=u.split(" ");let[p,w]=m.split(":").map(Number);return h==="PM"&&p<12&&(p+=12),h==="AM"&&p===12&&(p=0),`${p.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`};return o.jsxs("div",{className:`mb-4 ${l}`,children:[t&&o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t,s&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("div",{className:`
        react-time-picker__wrapper
        border border-gray-300 rounded-md
        focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-primary-500
        ${i?"bg-gray-100":"bg-white"}
        w-full
      `,children:o.jsx(Sr,{value:f(n),onChange:c,disableClock:!0,clearIcon:null,format:"h:mm a",disabled:i,className:`
            w-full
            [&_.react-time-picker__inputGroup]:py-2
            [&_.react-time-picker__inputGroup__input]:bg-transparent
            [&_.react-time-picker__inputGroup__input]:text-gray-900
            [&_.react-time-picker__inputGroup__input]:focus:outline-none
            [&_.react-time-picker__button]:text-gray-500
            [&_.react-time-picker__button]:hover:text-gray-700
            ${i?"text-gray-500":"text-gray-900"}
          `})})]})};ze.propTypes={name:v.string.isRequired,label:v.string,value:v.string,onChange:v.func.isRequired,required:v.bool,disabled:v.bool,placeholder:v.string,className:v.string};const Pe=({name:e,label:t,value:n,onChange:r,options:s=[],required:i=!1,disabled:a=!1,placeholder:l="Select an option",className:c=""})=>o.jsxs("div",{className:`mb-4 ${c}`,children:[t&&o.jsxs("label",{className:"block  text-sm font-medium text-gray-700 mb-1",children:[t,i&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{name:e,value:n,onChange:r,disabled:a,className:`mt-1 block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md ${a?"bg-gray-100":"bg-white"}`,children:[o.jsx("option",{value:"",children:l}),s.map(f=>typeof f=="object"?o.jsx("option",{value:f.value,children:f.label},f.value):o.jsx("option",{value:f,children:f},f))]})]});Pe.propTypes={name:v.string.isRequired,label:v.string,value:v.oneOfType([v.string,v.number]),onChange:v.func.isRequired,options:v.oneOfType([v.arrayOf(v.string),v.arrayOf(v.shape({value:v.oneOfType([v.string,v.number]),label:v.string}))]),required:v.bool,disabled:v.bool,placeholder:v.string,className:v.string};const Nr=({formData:e,handleChange:t,handleNestedChange:n,handleArrayChange:r,departments:s,isEditing:i})=>{const a=[{value:"Receptionist",label:"Receptionist"},{value:"Lab",label:"Lab"},{value:"Radiology",label:"Radiology"},{value:"Nurse",label:"Nurse"}],l=["Morning","Evening","Night","Rotational"];return o.jsxs("div",{className:"space-y-6",children:[o.jsx(ye,{title:"Basic Information",children:o.jsxs(xe,{children:[o.jsx(ne,{name:"user_Name",label:"Full Name",value:e.user_Name,onChange:t,icon:o.jsx(Lt,{className:"text-gray-400"}),placeholder:"Enter full name",required:!0}),o.jsx(ne,{name:"user_Email",label:"Email",type:"email",value:e.user_Email,onChange:t,icon:o.jsx($t,{className:"text-gray-400"}),placeholder:"example@hospital.com"}),o.jsx(ne,{name:"user_Contact",label:"Phone",value:e.user_Contact,onChange:t,icon:o.jsx(Tt,{className:"text-gray-400"}),placeholder:"03001234567",required:!0}),o.jsx(ne,{name:"user_CNIC",label:"CNIC",value:e.user_CNIC,onChange:t,icon:o.jsx(At,{className:"text-gray-400"}),placeholder:"42201-1234567-1",required:!0}),o.jsx(ne,{name:"user_Password",label:i?"New Password (leave blank to keep current)":"Password",type:"password",value:e.user_Password,onChange:t,icon:o.jsx(Ht,{className:"text-gray-400"}),placeholder:i?"Enter new password":"Create a password",required:!i}),o.jsx(ne,{name:"user_Address",label:"Address",value:e.user_Address,onChange:t,icon:o.jsx(Dt,{className:"text-gray-400"}),placeholder:"Street, City, Country"})]})}),o.jsx(ye,{title:"Professional Information",children:o.jsxs(xe,{children:[o.jsx(Pe,{name:"user_Access",label:"Role",value:e.user_Access,onChange:t,options:a,icon:o.jsx(Rt,{className:"text-gray-400"}),placeholder:"Select staff role",required:!0}),o.jsx(ne,{name:"designation",label:"Designation",value:e.designation,onChange:t,icon:o.jsx(Wt,{className:"text-gray-400"}),placeholder:"e.g. Senior Nurse"}),o.jsx(Pe,{name:"department",label:"Department",value:e.department,onChange:t,options:s.map(c=>c.name),icon:o.jsx(qt,{className:"text-gray-400"}),placeholder:"Select department",required:!0}),o.jsx(ne,{name:"qualifications",label:"Qualifications",value:e.qualifications.join(", "),onChange:c=>r("qualifications",c.target.value),icon:o.jsx(Bt,{className:"text-gray-400"}),placeholder:"MBBS, FCPS (comma separated)"})]})}),o.jsx(ye,{title:"Personal Details",children:o.jsxs(xe,{children:[o.jsx(Ot,{name:"gender",label:"Gender",value:e.gender,onChange:t,options:[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}],icon:o.jsx(Ut,{className:"text-gray-400"})}),o.jsx(ct,{name:"dateOfBirth",label:"Date of Birth",value:e.dateOfBirth,onChange:c=>t({target:{name:"dateOfBirth",value:c}}),placeholder:"Select birth date"}),o.jsx(Pe,{name:"shift",label:"Shift",value:e.shift,onChange:t,options:l,icon:o.jsx(Vt,{className:"text-gray-400"}),placeholder:"Select shift"})]})}),o.jsx(ye,{title:"Shift Timing",children:o.jsxs(xe,{children:[o.jsx(ze,{name:"shiftTiming.start",label:"Start Time",value:e.shiftTiming.start,onChange:c=>n("shiftTiming","start",c),placeholder:"Select start time"}),o.jsx(ze,{name:"shiftTiming.end",label:"End Time",value:e.shiftTiming.end,onChange:c=>n("shiftTiming","end",c),placeholder:"Select end time"})]})}),o.jsx(ye,{title:"Emergency Contact",children:o.jsxs(xe,{children:[o.jsx(ne,{name:"emergencyContact.name",label:"Name",value:e.emergencyContact.name,onChange:c=>n("emergencyContact","name",c.target.value),icon:o.jsx(Kt,{className:"text-gray-400"}),placeholder:"Emergency contact name"}),o.jsx(ne,{name:"emergencyContact.relation",label:"Relation",value:e.emergencyContact.relation,onChange:c=>n("emergencyContact","relation",c.target.value),icon:o.jsx(zt,{className:"text-gray-400"}),placeholder:"e.g. Father, Mother, Spouse"}),o.jsx(ne,{name:"emergencyContact.phone",label:"Phone",value:e.emergencyContact.phone,onChange:c=>n("emergencyContact","phone",c.target.value),icon:o.jsx(Zt,{className:"text-gray-400"}),placeholder:"Emergency contact number"})]})})]})},$r=()=>{const e=Nt(),t=Ct(),{id:n}=jt(),r=!!n,{staffDetails:s,loading:i,error:a,successMessage:l}=Ye(y=>y.staff),{departments:c}=Ye(y=>y.department),f={user_Name:"",user_Email:"",user_Contact:"",user_Address:"",user_CNIC:"",user_Password:"",user_Access:"",designation:"",department:"",qualifications:[],gender:"",dateOfBirth:"",emergencyContact:{name:"",relation:"",phone:""},shift:"",shiftTiming:{start:"",end:""}},[u,m]=g.useState(f),h=y=>/^\d{5}-\d{7}-\d{1}$/.test(y),p=y=>/^03\d{2}-\d{7}$/.test(y);g.useEffect(()=>{e(_t()),r&&e(Et(n))},[e,n,r]),g.useEffect(()=>{if(r&&s){const y={user_Name:s.user?.user_Name||"",user_Email:s.user?.user_Email||"",user_Password:"",user_Contact:s.user?.user_Contact||"",user_Address:s.user?.user_Address||"",user_CNIC:s.user?.user_CNIC||"",user_Access:s.user?.user_Access||"",designation:s.designation||"",department:s.department||"",qualifications:s.qualifications||[],gender:s.gender||"",dateOfBirth:s.dateOfBirth?new Date(s.dateOfBirth).toISOString().split("T")[0]:"",shift:s.shift||"",shiftTiming:{start:s.shiftTiming?.start||"",end:s.shiftTiming?.end||""},emergencyContact:s.emergencyContact||{name:"",relation:"",phone:""}};m(y)}},[r,s]),g.useEffect(()=>{a&&(R.error(a.message||"An error occurred"),e(kt())),l&&(R.success(l),e(Pt()))},[a,l,e]);const w=y=>{const{name:P,value:E}=y.target;if(P==="user_CNIC"){if(E.replace(/-/g,"").length>13)return;const b=E.replace(/\D/g,"").replace(/(\d{5})(\d{0,7})(\d{0,1})/,(j,C,N,O)=>{let A=C;return N&&(A+=`-${N}`),O&&(A+=`-${O}`),A});m(j=>({...j,[P]:b}));return}if(P==="user_Contact"){if(E.replace(/-/g,"").length>11)return;const b=E.replace(/\D/g,"").replace(/(\d{4})(\d{0,7})/,(j,C,N)=>N?`${C}-${N}`:C);m(j=>({...j,[P]:b}));return}m(b=>({...b,[P]:E}))},I=(y,P,E)=>{if(y==="emergencyContact"&&P==="name"&&/\d/.test(E)){R.error("Name cannot contain numbers");return}if(y==="emergencyContact"&&P==="phone"){if(E.replace(/-/g,"").length>11)return;E=E.replace(/\D/g,"").replace(/(\d{4})(\d{0,7})/,(j,C,N)=>N?`${C}-${N}`:C)}m(b=>({...b,[y]:{...b[y],[P]:E}}))},_=(y,P)=>{m(E=>({...E,[y]:P.split(",").map(b=>b.trim())}))},L=async y=>{if(y.preventDefault(),!r&&(!u.user_Password||u.user_Password.length<2)){R.error("Password must be at least 2 characters long");return}if(r&&u.user_Password&&u.user_Password.length<2){R.error("New password must be at least 2 characters long");return}if(!h(u.user_CNIC)){R.error("Invalid CNIC format. Expected format: 12345-1234567-1");return}if(!p(u.user_Contact)){R.error("Invalid phone format. Expected format: 0300-1234567");return}if(u.emergencyContact.phone&&!p(u.emergencyContact.phone)){R.error("Invalid emergency contact phone format. Expected format: 0300-1234567");return}if(u.shiftTiming.start&&u.shiftTiming.end){const b=O=>{const[A,Z]=O.split(" "),[U,ee]=A.split(":").map(Number);let V=U*60+ee;return Z==="PM"&&U<12&&(V+=720),Z==="AM"&&U===12&&(V-=720),V},j=b(u.shiftTiming.start),C=b(u.shiftTiming.end);if((C<j?C+1440:C)<=j){R.error("End time must be after start time");return}}if(u.dateOfBirth){const b=new Date(u.dateOfBirth),j=new Date;if(isNaN(b.getTime())){R.error("Please enter a valid date of birth");return}if(b>j){R.error("Date of birth cannot be in the future");return}}const P=b=>{if(!b)return null;const[j,C]=b.split(" ");let[N,O]=j.split(":");return N=parseInt(N,10),O=O||"00",C==="PM"&&N<12?N+=12:C==="AM"&&N===12&&(N=0),`${N.toString().padStart(2,"0")}:${O.padStart(2,"0")}`},E={...u,dateOfBirth:u.dateOfBirth||null,shiftTiming:{start:u.shiftTiming.start?P(u.shiftTiming.start):null,end:u.shiftTiming.end?P(u.shiftTiming.end):null},user_Email:u.user_Email||"",shift:u.shift&&u.shift.trim()!==""?u.shift:void 0,designation:u.designation||void 0,gender:u.gender||void 0,emergencyContact:u.emergencyContact&&(u.emergencyContact.name||u.emergencyContact.relation||u.emergencyContact.phone)?u.emergencyContact:void 0};try{let b;if(r?b=await e(Ft({id:n,staffData:E})):b=await e(It(E)),b.error){const j=b.payload;j?.errorType==="DUPLICATE_KEY"?R.error(`This ${j.field} is already registered`):j?.message?R.error(j.message):R.error("Operation failed. Please try again.")}else b.payload?.success&&(R.success(r?"Staff updated successfully":"Staff created successfully"),t(Yt("staff")))}catch(b){console.error("Submission error:",b),R.error(b.message||"An unexpected error occurred")}},H=()=>{t(-1)};return o.jsxs("div",{className:"",children:[o.jsx("div",{className:"bg-primary-600 rounded-md text-white px-6 py-8 mb-6 shadow-md",children:o.jsx("div",{className:"",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"h-12 w-1 bg-primary-300 mr-4 rounded-full"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:r?"Edit Staff Member":"Add New Staff Member"}),o.jsx("p",{className:"text-primary-100 mt-1",children:r?"Update staff details and information":"Add new staff member to the system"})]})]}),o.jsx("button",{onClick:H,className:"px-4 py-2 bg-white text-primary-600 rounded-md hover:bg-primary-50 transition-colors duration-200 font-medium",children:"Back to Staff List"})]})})}),o.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:o.jsxs("form",{onSubmit:L,children:[o.jsx(Nr,{formData:u,handleChange:w,handleNestedChange:I,handleArrayChange:_,departments:c,isEditing:r}),o.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[o.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700",disabled:i,children:i?"Saving...":r?"Update Staff":"Add Staff"})]})]})})]})};export{$r as default};
