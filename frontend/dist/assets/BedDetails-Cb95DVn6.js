import{T as y,d as b,f as w,r as c,u as f,U as v,V as D,K as C,W as k,j as e}from"./index-D_CM1r6M.js";const B=()=>{const{bedId:l}=y(),p=b(),a=w(),[r,u]=c.useState(!1),{currentBed:s,currentBedPatient:t,currentBedHistory:x,bedPatientStatus:g,historyStatus:j,error:m}=f(i=>i.ward);if(c.useEffect(()=>(a(v(l)),()=>{a(D()),a(C())}),[a,l]),c.useEffect(()=>{r&&s&&a(k({wardId:s.ward.id,bedNumber:s.bedNumber}))},[r,s,a]),g==="loading")return e.jsx("div",{className:"text-center py-8",children:"Loading bed details..."});if(m)return e.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error: ",m]});if(!s)return e.jsx("div",{className:"text-center py-8",children:"Bed not found"});const o=()=>u(!r);return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-primary-600 p-6 text-white",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Bed #",s.bedNumber," - ",s.ward.name]}),e.jsxs("p",{className:"mt-1",children:["Ward ",s.ward.wardNumber," â€¢ ",s.ward.department]})]}),e.jsx("button",{onClick:()=>p(-1),className:"text-white hover:text-gray-200",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"p-6 border-b",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Current Status"}),e.jsx("button",{onClick:o,className:"bg-primary-600 hover:bg-primary-700 text-white py-1 px-4 rounded-md text-sm",children:r?"Hide History":"View History"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${s.status==="Occupied"?"bg-red-50 border-l-4 border-red-500":"bg-green-50 border-l-4 border-green-500"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${s.status==="Occupied"?"bg-red-500":"bg-green-500"}`}),e.jsx("span",{className:"font-medium",children:s.status})]}),s.status==="Occupied"&&t&&e.jsx("div",{className:"mt-3 pl-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Patient Name"}),e.jsx("p",{className:"font-medium",children:t.patient_Name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"MR Number"}),e.jsx("p",{className:"font-medium",children:t.patient_MRNo})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"CNIC"}),e.jsx("p",{className:"font-medium",children:t.patient_CNIC})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),e.jsx("p",{className:"font-medium",children:t.patient_Address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Admission Date"}),e.jsx("p",{className:"font-medium",children:new Date(t.admission_Details.admission_Date).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Diagnosis"}),e.jsx("p",{className:"font-medium",children:t.admission_Details.diagnosis})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Guardian"}),e.jsxs("p",{className:"font-medium",children:[t.patient_Guardian.guardian_Name," (",t.patient_Guardian.guardian_Relation,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Contact"}),e.jsx("p",{className:"font-medium",children:t.patient_Guardian.guardian_Contact})]})]})})]})]}),r&&e.jsxs("div",{className:"p-6 border-t",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Bed History"}),j==="loading"?e.jsx("div",{className:"text-center py-8",children:"Loading history..."}):x?.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MR Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admission Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discharge Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((i,N)=>{const n=new Date(i.admissionDate),d=i.dischargeDate?new Date(i.dischargeDate):null,h=Math.ceil(d?(d-n)/(1e3*60*60*24):(new Date-n)/(1e3*60*60*24));return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i.patientMRNo}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d?d.toLocaleString():"Current"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[h," day",h!==1?"s":""," ",!d&&"(ongoing)"]})]},N)})})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No history records found for this bed"})]}),e.jsxs("div",{className:"p-6 bg-gray-50 flex justify-between",children:[e.jsx("button",{onClick:o,className:"bg-primary-600 hover:bg-primary-700 text-white py-2 px-4 rounded-md",children:r?"Hide History":"View Full History"}),s.status==="Occupied"?e.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white py-2 px-6 rounded-md",onClick:()=>{},children:"   Discharge Patient "}):e.jsx("button",{className:"bg-primary-600 hover:bg-primary-700 text-white py-2 px-6 rounded-md",onClick:()=>{},children:"Assign Patient"})]})]})})};export{B as default};
