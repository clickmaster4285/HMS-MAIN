import{j as e,e as u,f as he,r as pe,g as ge,h as ue,i as ye,k as je,l as fe,m as ve,u as g}from"./index-D_CM1r6M.js";import{c as y}from"./createLucideIcon-lGOnjJ_s.js";import{D as T}from"./dollar-sign-CCFmVWDc.js";import{F as be}from"./flask-conical-CTRHkRGF.js";import{B as $}from"./bed-rAUsbdzf.js";import{U as Ne}from"./users--2zYnU-J.js";import{C as we}from"./clipboard-list-BlUG6s4C.js";import{R as N,X as K,Y as B,T as w,P as H,a as W,C as z,b as F}from"./PieChart--5BpeV_V.js";import{L as De,C as q,a as P}from"./LineChart-C9yHVXJn.js";import{L as X}from"./Legend-Cyn-pqU8.js";import{B as ke,a as I}from"./BarChart-BpMUM2xm.js";import{C as V}from"./circle-alert--nbTxiuF.js";import{C}from"./circle-check-big-ClJgYXp0.js";import"./index-DzhyyO-l.js";import"./index-Rj29YxKv.js";import"./with-selector-Cb_tpc66.js";import"./tiny-invariant-BaFNuDhB.js";const _e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Pe=y("circle-x",_e);const Ae=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Ce=y("house",Ae);const Re=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],O=y("percent",Re);const Le=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Se=y("user-check",Le);const Ee=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Ue=y("user-x",Ee),p=({title:a,value:n,icon:t,color:r,subtitle:s,secondaryValue:d})=>e.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-t-4",style:{borderTopColor:r},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full mr-4",style:{backgroundColor:`${r}20`},children:e.jsx(t,{className:"w-6 h-6",style:{color:r}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:a}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:n}),d&&e.jsx("p",{className:"text-sm font-medium mt-1",style:{color:r},children:d}),s&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s})]})]})}),Me=({totalAdmittedPatients:a,totalOpdPatients:n,avgHospitalPercentage:t,avgDoctorPercentage:r,hospitalRevenueShare:s,doctorRevenueShare:d,totalWards:o,totalBeds:i,totalDepartments:c,totalOpdRevenue:m,totalIpdRevenue:h,totalLabRevenue:D,totalInternalLabPatients:j,totalExternalLabPatients:f})=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(p,{title:"Hospital Share",value:`${t.toFixed(1)}%`,secondaryValue:`PKR ${s.toLocaleString()}`,icon:O,color:"#3B82F6",subtitle:"Average revenue share"}),e.jsx(p,{title:"Doctor Share",value:`${r.toFixed(1)}%`,secondaryValue:`PKR ${d.toLocaleString()}`,icon:O,color:"#10B981",subtitle:"Average revenue share"}),e.jsx(p,{title:"OPD Revenue",value:`PKR ${m.toLocaleString()}`,icon:T,color:"#8B5CF6",subtitle:"Total outpatient revenue"}),e.jsx(p,{title:"IPD Revenue",value:`PKR ${h.toLocaleString()}`,icon:T,color:"#EC4899",subtitle:"Total inpatient revenue"}),e.jsx(p,{title:"Lab Revenue",value:`PKR ${D.toLocaleString()}`,icon:be,color:"#D97706",subtitle:"Total lab test revenue"}),e.jsx(p,{title:"Internal Lab Patients",value:j,icon:Se,color:"#059669",subtitle:"Hospital patients"}),e.jsx(p,{title:"External Lab Patients",value:f,icon:Ue,color:"#DC2626",subtitle:"Walk-in patients"}),e.jsx(p,{title:"Admitted Patients",value:a,icon:$,color:"#0d9488",subtitle:"Currently in wards"}),e.jsx(p,{title:"OPD Patients",value:n,icon:Ne,color:"#059669",subtitle:"Outpatient visits"}),e.jsx(p,{title:"Wards",value:o,icon:Ce,color:"#dc2626",subtitle:"Hospital departments"}),e.jsx(p,{title:"Beds",value:i,icon:$,color:"#d97706",subtitle:"Total capacity"}),e.jsx(p,{title:"Departments",value:c,icon:we,color:"#9333ea",subtitle:"Medical specialties"})]}),Te=({admittedPatients:a=[],opdPatients:n=[]})=>{const r=(()=>{const s={};return Array.isArray(a)&&a.forEach(i=>{try{const c=i?.admission_Details?.admission_Date?new Date(i.admission_Details.admission_Date):new Date,m=c.getMonth(),h=c.toLocaleString("default",{month:"short"});s[m]||(s[m]={name:h,admissions:0,revenue:0,opd:0}),s[m].admissions+=1,s[m].revenue+=i?.financials?.total_Charges||0}catch(c){console.error("Error processing admitted patient:",c)}}),Array.isArray(n)&&n.forEach(i=>{try{const c=i?.createdAt?new Date(i.createdAt):new Date,m=c.getMonth(),h=c.toLocaleString("default",{month:"short"});s[m]||(s[m]={name:h,admissions:0,revenue:0,opd:0}),s[m].opd+=1,s[m].revenue+=i?.patient_HospitalInformation?.total_Fee||0}catch(c){console.error("Error processing OPD patient:",c)}}),Array.from({length:12},(i,c)=>{const m=new Date;return m.setMonth(c),m.toLocaleString("default",{month:"short"})}).map((i,c)=>s[c]||{name:i,admissions:0,revenue:0,opd:0})})();return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hospital Revenue & Admissions"}),e.jsx("div",{className:"h-80",children:r.length>0?e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(De,{data:r,children:[e.jsx(q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(K,{dataKey:"name",stroke:"#6b7280"}),e.jsx(B,{stroke:"#6b7280"}),e.jsx(w,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.375rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(X,{}),e.jsx(P,{type:"monotone",dataKey:"revenue",stroke:"#0d9488",strokeWidth:2,activeDot:{r:6},name:"Revenue (PKR)"}),e.jsx(P,{type:"monotone",dataKey:"admissions",stroke:"#2563eb",strokeWidth:2,activeDot:{r:6},name:"Admissions"}),e.jsx(P,{type:"monotone",dataKey:"opd",stroke:"#059669",strokeWidth:2,activeDot:{r:6},name:"OPD Visits"})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:"No data available for the chart"})})]})},b=["#0d9488","#059669","#2563eb","#7c3aed","#d97706","#dc2626"],$e=({departments:a=[],doctors:n=[]})=>{const t=u.useMemo(()=>Array.isArray(a)?Array.isArray(n)?a.map(r=>{const s=n.filter(d=>d?.doctor_Department===r?.name).length;return{name:r?.name||"Unknown Department",value:s,doctors:s}}).filter(r=>r.value>0):[]:[],[a,n]);return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Doctors by Department"}),e.jsx("div",{className:"h-80",children:t.length>0?e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(H,{children:[e.jsx(W,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",label:({name:r})=>r,children:t.map((r,s)=>e.jsx(z,{fill:b[s%b.length]},`cell-${s}`))}),e.jsx(w,{formatter:(r,s,d)=>[`${r} doctors`,d.payload.name],contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.375rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:"No department data available"})}),t.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2",children:t.map((r,s)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:b[s%b.length]}}),e.jsxs("span",{className:"text-sm text-gray-700",children:[r.name,": ",e.jsx("span",{className:"font-medium",children:r.doctors})]})]},r.name))})]})},Ie="http://192.168.88.29:5002",Oe=({doctors:a=[]})=>{const n=u.useMemo(()=>Array.isArray(a)?a.map(t=>({id:t?._id||"",name:t?.user?.user_Name||"Unknown Doctor",image:t?.doctor_Image?.filePath||null,department:t?.doctor_Department||"Unknown Department",specialization:t?.doctor_Specialization||"",type:t?.doctor_Type||"",fee:t?.doctor_Fee||0,hospitalPercentage:t?.doctor_Contract?.hospital_Percentage||0,doctorPercentage:t?.doctor_Contract?.doctor_Percentage||0})):[],[a]);return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Doctors & Revenue Share"})}),e.jsx("div",{className:"overflow-x-auto",children:n.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hospital %"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor %"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover border",src:t.image?`${Ie}${t.image}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name||"D")}&background=random`,alt:t.name,onError:r=>{r.target.onerror=null,r.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name||"D")}&background=random`}})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.specialization})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.department}),e.jsx("div",{className:"text-sm text-gray-500",children:t.type})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["PKR ",t.fee]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-primary-100 text-primary-800",children:[t.hospitalPercentage,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[t.doctorPercentage,"%"]})})]},t.id))})]}):e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No doctors data available"})})]})},Ke=({admittedPatients:a=[],opdPatients:n=[]})=>{const r=(()=>{const s={};return Array.isArray(a)&&a.forEach(o=>{try{const i=o?.ward_Information?.department_Name||o?.ward_Information?.ward_Type||"Unknown";s[i]=s[i]||{admitted:0,opd:0},s[i].admitted+=1}catch(i){console.error("Error processing admitted patient:",i)}}),Array.isArray(n)&&n.forEach(o=>{try{const i=o?.patient_HospitalInformation?.doctor_Department||"Unknown";s[i]=s[i]||{admitted:0,opd:0},s[i].opd+=1}catch(i){console.error("Error processing OPD patient:",i)}}),Object.entries(s).map(([o,i])=>({name:o,Admitted:i.admitted,OPD:i.opd,Total:i.admitted+i.opd})).sort((o,i)=>i.Total-o.Total)})();return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Patients by Department"}),e.jsx("div",{className:"h-80",children:r.length>0?e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(ke,{data:r,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(K,{dataKey:"name",stroke:"#6b7280",angle:-45,textAnchor:"end",height:60}),e.jsx(B,{stroke:"#6b7280"}),e.jsx(w,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.375rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(X,{}),e.jsx(I,{dataKey:"Admitted",fill:"#0d9488",radius:[4,4,0,0],name:"Admitted Patients"}),e.jsx(I,{dataKey:"OPD",fill:"#7c3aed",radius:[4,4,0,0],name:"OPD Visits"})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:"No patient data available"})})]})},A=["#0d9488","#059669","#2563eb"],Be=({patientTests:a=[],totalTests:n=0,totalTestRevenue:t=0})=>{const r=u.useMemo(()=>{if(!Array.isArray(a))return[];const s=a.filter(o=>!o?.isExternalPatient).length||0,d=a.filter(o=>o?.isExternalPatient).length||0;return[{name:"Internal Patients",value:s,color:A[0]},{name:"External Patients",value:d,color:A[1]},{name:"Total Tests",value:n,color:A[2]}]},[a,n]);return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Lab Tests Overview"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),e.jsxs("p",{className:"text-xl font-bold text-teal-600",children:["PKR ",t.toLocaleString()]})]})]}),e.jsx("div",{className:"h-64",children:r.length>0&&r.some(s=>s.value>0)?e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(H,{children:[e.jsx(W,{data:r.filter(s=>s.value>0),cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",label:({name:s})=>s,children:r.filter(s=>s.value>0).map((s,d)=>e.jsx(z,{fill:s.color},`cell-${d}`))}),e.jsx(w,{formatter:(s,d,o)=>[`${s}`,o.payload.name],contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.375rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:"No lab test data available"})}),e.jsx("div",{className:"mt-4 grid grid-cols-3 gap-4",children:r.map((s,d)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:s.color},children:s.value}),e.jsx("div",{className:"text-sm text-gray-500",children:s.name})]},s.name))})]})},He=({status:a})=>{let n,t,r;return a==="Critical"?(n="bg-red-100",t="text-red-800",r=V):a==="Unpaid"?(n="bg-yellow-100",t="text-yellow-800",r=F):(n="bg-green-100",t="text-green-800",r=C),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n} ${t}`,children:[e.jsx(r,{className:"w-3 h-3 mr-1"}),a]})},We=({patients:a=[]})=>{const n=u.useMemo(()=>Array.isArray(a)?a.filter(t=>{const r=t?.status==="Critical",s=t?.financials?.payment_Status==="Unpaid";return r||s}):[],[a]);return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-red-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-800 flex items-center",children:[e.jsx(V,{className:"w-5 h-5 mr-2"}),"Critical/Unpaid Patients"]}),e.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[n.length," Active"]})]})}),e.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:n.length>0?n.map(t=>e.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:[t?.patient_Name||"Unknown Patient"," (",t?.patient_MRNo||"No MRNo",")"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t?.ward_Information?.ward_Type||"Unknown Ward"," â€¢ Bed ",t?.ward_Information?.bed_No||"N/A"]}),t?.admission_Details?.admission_Date&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Admitted On: ",new Date(t.admission_Details.admission_Date).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(He,{status:t?.financials?.payment_Status==="Unpaid"?"Unpaid":"Critical"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 mt-1",children:["PKR ",t?.financials?.total_Charges||0]})]})]})},t?._id||Math.random())):e.jsxs("div",{className:"px-6 py-8 text-center",children:[e.jsx(C,{className:"mx-auto h-12 w-12 text-green-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No critical patients"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"All patients are stable and accounts are paid."})]})})]})},ze=({patients:a=[]})=>{const n=u.useMemo(()=>Array.isArray(a)?a.filter(t=>t?.status).slice(0,5).map(t=>({id:t?._id||Math.random().toString(36).substring(7),name:t?.patient_Name||"Unknown Patient",mrNo:t?.patient_MRNo||"N/A",ward:t?.ward_Information?.ward_Type||"Unknown Ward",bed:t?.ward_Information?.bed_No||"N/A",doctor:t?.admission_Details?.admitting_Doctor||"Unknown Doctor",status:t?.status||"Unknown",amount:t?.financials?.total_Charges||0,admissionDate:t?.admission_Details?.admission_Date?new Date(t.admission_Details.admission_Date):null})):[],[a]);return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Admissions"})}),e.jsx("div",{className:"overflow-x-auto",children:n.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ward/Bed"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"shrink-0 h-10 w-10 bg-teal-100 rounded-full flex items-center justify-center text-teal-600 font-medium",children:t.name.charAt(0)}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.mrNo})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.ward}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Bed ",t.bed]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.doctor}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.status==="Admitted"?e.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-primary-100 text-primary-800",children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),"Admitted"]}):t.status==="Discharged"?e.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),"Discharged"]}):e.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),"Unknown"]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["PKR ",t.amount]})]},t.id))})]}):e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No recent admissions data available"})})]})},Fe=({message:a="Loading dashboard data..."})=>e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:a})]})}),qe=({error:a="Error loading dashboard data. Please try again later."})=>e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-red-500 max-w-md p-4 bg-red-50 rounded-lg",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"text-lg font-medium mt-2",children:"Something went wrong"}),e.jsx("p",{className:"mt-1",children:a}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Retry"})]})}),ct=()=>{const a=he();pe.useEffect(()=>{a(ge()),a(ue()),a(ye()),a(je()),a(fe()),a(ve())},[a]);const{doctors:n=[],loading:t,error:r}=g(l=>l.doctor),{patientsList:s=[],loading:d,error:o}=g(l=>l.ipdPatient),{patients:i=[],loading:c,error:m}=g(l=>l.patients),{allPatientTests:h=[],loading:D,error:j}=g(l=>l.patientTest),{departments:f=[],loading:Y,error:R}=g(l=>l.department),{allWards:L=[],loading:G,error:S}=g(l=>l.ward),J=t||d||c||D||Y||G,Q=r||o||m||j||R||S;if(J)return e.jsx(Fe,{});if(Q){const l=[r,o,m,j,R,S].filter(Boolean).join(`
`);return e.jsx(qe,{error:l})}const v=n.length,E=v>0?n.reduce((l,x)=>l+(x.doctor_Contract?.hospital_Percentage||0),0)/v:0,U=v>0?n.reduce((l,x)=>l+(x.doctor_Contract?.doctor_Percentage||0),0)/v:0,k=i.reduce((l,x)=>l+(x.patient_HospitalInformation?.total_Fee||0),0),_=s.reduce((l,x)=>l+(x.financials?.total_Charges||0),0),Z=h.reduce((l,x)=>l+x.totalAmount,0),ee=E/100*(k+_),te=U/100*(k+_),se=s.length,ae=i.length,re=h.length,M=h.filter(l=>l.isExternalPatient).length,ne=re-M,ie=h.reduce((l,x)=>l+x.selectedTests.length,0),le=h.reduce((l,x)=>l+x.totalAmount,0),oe=L.length,de=L.reduce((l,x)=>{const xe=x.beds||x.assignedBed||[];return l+xe.length},0),ce=f.length,me=s.filter(l=>l.status==="Critical"||l.financials?.payment_Status==="Unpaid");return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("main",{className:"px-4 py-6 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hospital Overview"}),e.jsx(Me,{totalAdmittedPatients:se,totalOpdPatients:ae,avgHospitalPercentage:E,avgDoctorPercentage:U,hospitalRevenueShare:ee,doctorRevenueShare:te,totalWards:oe,totalBeds:de,totalDepartments:ce,totalOpdRevenue:k,totalIpdRevenue:_,totalLabRevenue:Z,totalInternalLabPatients:ne,totalExternalLabPatients:M}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Te,{admittedPatients:s,opdPatients:i})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx($e,{departments:f,doctors:n})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Oe,{doctors:n}),e.jsx(Ke,{admittedPatients:s,opdPatients:i})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Be,{patientTests:h,totalTests:ie,totalTestRevenue:le}),e.jsx(We,{patients:me})]}),e.jsx(ze,{patients:s.slice(0,5)})]})})})};export{ct as default};
