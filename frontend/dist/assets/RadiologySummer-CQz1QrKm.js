import{j as e,T as W,f as z,u as P,r as v,br as F}from"./index-D_CM1r6M.js";import{R as H}from"./server.browser-DuO4EFVg.js";import{f as k}from"./format-C6WB0tTj.js";import{p as D}from"./parseISO-4cjP3mE1.js";import{B as i,c as L,d as O,e as E,a as d,f as Y,A as _,b as U}from"./TableRow-Dkc_eAzu.js";import{m as h}from"./proxy-DAScg_hi.js";import{k as x,I as y,r as $,C as w,q}from"./TextField-Dd-glxQI.js";import{T as C,R as G,P as V,S as Z,L as J,F as K,M as Q,C as X}from"./Tooltip-C9MxkRZY.js";import{c as A,s as b}from"./createSvgIcon-ZRCmSFVj.js";import{B as ee}from"./Button-D36nG1AP.js";import{A as te}from"./index-DChziZlZ.js";import{R as S,C as re}from"./CalendarToday-C6rnxPf1.js";import{D as se}from"./LocalHospital-B_y8Mi8f.js";import"./assertThisInitialized-CHywsmAZ.js";import"./emotion-element-f0de968e.browser.esm-D488Ioqx.js";import"./index-DzhyyO-l.js";import"./Popper-OZxyrAG8.js";import"./index-Rj29YxKv.js";const ne=A(e.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"})),oe=A(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),ae=({reports:r,dateRange:o})=>{const a=s=>{try{return k(D(s),"MMM dd, yyyy hh:mm a")}catch{return s}},m=r.reduce((s,p)=>{const c=p.referBy||"N/A";return s[c]=(s[c]||0)+1,s},{});return e.jsxs("div",{className:"print-container",style:{fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",maxWidth:"1000px",margin:"0 auto",padding:"30px",color:"#333",backgroundColor:"#fff",lineHeight:1.5},children:[e.jsxs("div",{className:"header",style:{textAlign:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid #005792"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"10px"},children:[e.jsx("div",{style:{width:"60px",height:"60px",backgroundColor:"#005792",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"15px",color:"white",fontWeight:"bold",fontSize:"24px"},children:"SMDC"}),e.jsxs("div",{children:[e.jsx("div",{className:"hospital-name",style:{fontSize:"24px",fontWeight:"bold",color:"#005792",marginBottom:"5px",letterSpacing:"1px"},children:"AL-SHAHBAZ MODERN DIAGNOSTIC CENTER"}),e.jsx("div",{className:"hospital-subtitle",style:{fontSize:"16px",color:"#555",textTransform:"uppercase",letterSpacing:"1px"},children:"Radiology Department"})]})]}),e.jsx("div",{style:{marginTop:"20px",fontSize:"18px",fontWeight:"600",color:"#005792"},children:"Reports Summary"}),o&&e.jsxs("div",{className:"date-range",style:{fontSize:"14px",color:"#666",marginTop:"10px",backgroundColor:"#f5f9ff",padding:"8px 15px",display:"inline-block",borderRadius:"4px"},children:[e.jsx("span",{style:{fontWeight:"600"},children:"Period:"})," ",o.startDate&&a(o.startDate),o.endDate&&` - ${a(o.endDate)}`]})]}),e.jsxs("table",{className:"summary-table",style:{width:"100%",borderCollapse:"collapse",marginBottom:"30px",fontSize:"14px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#005792",color:"white",textTransform:"uppercase",letterSpacing:"0.5px"},children:[e.jsx("th",{style:{padding:"12px 10px",textAlign:"left",fontWeight:"600",width:"5%"},children:"#"}),e.jsx("th",{style:{padding:"12px 10px",textAlign:"left",fontWeight:"600",width:"10%"},children:"MR No."}),e.jsx("th",{style:{padding:"12px 10px",textAlign:"left",fontWeight:"600",width:"20%"},children:"Patient"}),e.jsx("th",{style:{padding:"12px 10px",textAlign:"left",fontWeight:"600",width:"20%"},children:"Test"}),e.jsx("th",{style:{padding:"12px 10px",textAlign:"left",fontWeight:"600",width:"15%"},children:"Referred By"}),e.jsx("th",{style:{padding:"12px 10px",textAlign:"left",fontWeight:"600",width:"15%"},children:"Date/Time"})]})}),e.jsx("tbody",{children:r.map((s,p)=>e.jsxs("tr",{style:{borderBottom:"1px solid #e0e6ed",":nth-child(even)":{backgroundColor:"#f8fafc"},":hover":{backgroundColor:"#f0f7ff"}},children:[e.jsx("td",{style:{padding:"12px 10px",color:"#666"},children:p+1}),e.jsx("td",{style:{padding:"12px 10px",fontWeight:"500"},children:s.patientMRNO}),e.jsxs("td",{style:{padding:"12px 10px"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#005792",marginBottom:"4px"},children:s.patientName}),e.jsxs("div",{style:{color:"#666",fontSize:"0.85em"},children:[s.sex,", ",s.age," years"]})]}),e.jsx("td",{style:{padding:"12px 10px"},children:e.jsx("div",{style:{fontWeight:"500"},children:s.templateName.replace(".html","").replace(/-/g," ")})}),e.jsx("td",{style:{padding:"12px 10px",color:"#444"},children:s.referBy||"N/A"}),e.jsx("td",{style:{padding:"12px 10px",color:"#555",fontSize:"0.9em"},children:a(s.date)})]},s._id))})]}),e.jsxs("div",{style:{marginTop:"30px",padding:"20px",backgroundColor:"#f9fbfd",border:"1px solid #e0e6ed",borderRadius:"6px",fontSize:"14px"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"10px",color:"#005792"},children:"Assigned Doctor Summary (Referred By)"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#e6f0fa",textAlign:"left"},children:[e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd"},children:"Doctor"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd"},children:"Patient Count"})]})}),e.jsx("tbody",{children:Object.entries(m).map(([s,p])=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:s}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:p})]},s))})]})]}),e.jsxs("div",{className:"footer",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"40px",paddingTop:"20px",borderTop:"1px solid #e0e6ed",color:"#666",fontSize:"14px"},children:[e.jsxs("div",{className:"contact-info",style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("div",{children:"Phone: +123 456 7890"}),e.jsx("div",{children:"Email: info@alshahbazdiagnostic.com"}),e.jsx("div",{children:"Address: 123 Medical St, Health City"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px"},children:[e.jsxs("div",{className:"timestamp",children:[e.jsx("span",{style:{fontWeight:"600"},children:"Printed on:"})," ",a(new Date().toISOString())]}),e.jsxs("div",{className:"total",style:{fontWeight:"bold",color:"#005792",fontSize:"16px",backgroundColor:"#f0f7ff",padding:"8px 15px",borderRadius:"4px"},children:["Total Reports: ",r.length]})]})]})]})},ie=b(X)(({theme:r})=>({background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:"16px",border:"1px solid rgba(0, 150, 137, 0.2)",boxShadow:"0 8px 32px rgba(0, 150, 137, 0.15)",transition:"transform 0.3s ease","&:hover":{transform:"translateY(-4px)"}})),le=b(U)(({theme:r})=>({background:"transparent",borderRadius:"12px",overflow:"hidden"})),de=b(q)(({theme:r})=>({"& .MuiOutlinedInput-root":{background:"rgba(255, 255, 255, 0.8)",borderRadius:"12px","& fieldset":{borderColor:"rgba(0, 150, 137, 0.3)"},"&:hover fieldset":{borderColor:"#009689"},"&.Mui-focused fieldset":{borderColor:"#009689"}},"& .MuiInputBase-input":{color:"#333"}})),l=r=>(r??"").toString(),T=r=>Array.isArray(r)?r.map(o=>l(o).replace(".html","").replace(/-/g," ")).filter(Boolean).join(", "):l(r).replace(".html","").replace(/-/g," "),R=r=>{if(!r)return"N/A";if(typeof r=="string"&&r.includes("years"))return r;if(typeof r=="string"&&r.includes("-"))try{const o=new Date(r),a=new Date;let m=a.getFullYear()-o.getFullYear();const s=a.getMonth()-o.getMonth();return(s<0||s===0&&a.getDate()<o.getDate())&&m--,`${m} years`}catch{return"N/A"}return l(r)},Ae=()=>{const{date:r}=W(),o=z(),{filteredReports:a,status:m}=P(t=>t.radiology),[s,p]=v.useState("");let c=null,g=null;if(r){const t=r.split("_");t.length===2?(c=t[0],g=t[1]):t.length===1&&(c=t[0])}v.useEffect(()=>{o(F({startDate:c,endDate:g}))},[o,c,g]);const f=(Array.isArray(a)?a:[]).filter(t=>{const n=l(s).toLowerCase();return n?l(t?.patientName).toLowerCase().includes(n)||l(t?.patientMRNO).toLowerCase().includes(n)||l(t?.referBy).toLowerCase().includes(n):!0}),I=t=>{switch(t){case"pending":return"warning";case"completed":case"paid":return"success";case"cancelled":case"refunded":return"error";case"partial":return"info";default:return"info"}},N=t=>!t||t.length===0?[]:t.map(n=>({...n,age:R(n.age),templateName:T(n.templateName),sex:n.sex?n.sex.charAt(0).toUpperCase()+n.sex.slice(1).toLowerCase():"N/A"})),B=()=>{const t=window.open("","_blank");if(!t){alert("Please allow popups for printing");return}const n=N(f),u=H.renderToStaticMarkup(e.jsx(ae,{reports:n,dateRange:{startDate:c,endDate:g}}));t.document.open(),t.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Radiology Reports Summary</title>
          <style>
            /* You can keep or add your print styles here */
            body { font-family: Arial, sans-serif; }
          </style>
        </head>
        <body>${u}</body>
        <script>
          window.onload = function() {
            setTimeout(function() { window.print(); window.close(); }, 200);
          };
        <\/script>
      </html>
    `),t.document.close()},M=t=>{try{return k(D(t),"MMM dd, yyyy hh:mm a")}catch{try{return new Date(t).toLocaleString()}catch{return l(t)}}};return e.jsx(i,{sx:{p:4,background:"#FFFFFF",minHeight:"100vh",color:"#333"},children:e.jsxs(i,{sx:{maxWidth:"1400px",margin:"0 auto"},children:[e.jsx(h.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsx(x,{variant:"h3",fontWeight:"bold",sx:{color:"#009689",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:"Radiology Dashboard"}),e.jsx(i,{children:["refresh","print"].map(t=>e.jsx(C,{title:t.charAt(0).toUpperCase()+t.slice(1),children:e.jsx(y,{component:h.button,whileHover:{scale:1.1},whileTap:{scale:.95},sx:{color:"#009689",background:"rgba(0, 150, 137, 0.1)",mr:1,"&:hover":{background:"rgba(0, 150, 137, 0.2)"}},onClick:t==="print"?B:()=>window.location.reload(),children:t==="refresh"?e.jsx(G,{}):e.jsx(V,{})})},t))})]})}),e.jsxs(ie,{children:[e.jsxs(i,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(de,{variant:"outlined",size:"small",placeholder:"Search reports...",value:s,onChange:t=>p(t.target.value),InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx(Z,{sx:{color:"#009689"}})})},sx:{width:300}}),e.jsx(C,{title:"Filter",children:e.jsx(y,{component:h.button,whileHover:{scale:1.1},whileTap:{scale:.95},sx:{color:"#009689",background:"rgba(0, 150, 137, 0.1)","&:hover":{background:"rgba(0, 150, 137, 0.2)"}},children:e.jsx(ne,{})})}),e.jsxs(ee,{component:h.button,whileHover:{scale:1.05},whileTap:{scale:.95},sx:{px:3,py:1,fontWeight:"bold",borderRadius:"999px",color:"#009688",backgroundColor:"rgba(0, 150, 137, 0.1)",textTransform:"none","&:hover":{backgroundColor:"rgba(0, 150, 137, 0.2)"}},children:["Total Patients: ",f.length]})]}),m==="loading"&&e.jsx(J,{sx:{backgroundColor:"rgba(0,150,137,0.1)","& .MuiLinearProgress-bar":{backgroundColor:"#009689"}}}),e.jsx(le,{children:e.jsxs(L,{sx:{minWidth:650,"& th, & td":{color:"#333",borderColor:"rgba(0,150,137,0.1)"}},children:[e.jsx(O,{children:e.jsx(E,{children:["Token #","MR No.","Patient","Test","Referred By","Date/Time","Status","Actions"].map(t=>e.jsx(d,{children:e.jsx(x,{variant:"subtitle2",fontWeight:"bold",color:"#009689",children:t})},t))})}),e.jsx(Y,{children:e.jsx(te,{children:f.map((t,n)=>e.jsxs(h.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[e.jsxs(d,{children:["#",n+1]}),e.jsx(d,{children:e.jsx(w,{label:t.patientMRNO,size:"small",sx:{background:"rgba(0,150,137,0.1)",color:"#009689","&:hover":{background:"rgba(0,150,137,0.2)"}}})}),e.jsx(d,{children:e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(_,{sx:{width:32,height:32,mr:1,background:"rgba(0,150,137,0.1)","& svg":{color:"#009689"}},children:l(t.sex).toLowerCase()==="female"?e.jsx(K,{}):e.jsx(Q,{})}),e.jsxs(i,{children:[e.jsx(x,{variant:"body2",fontWeight:"medium",color:"#333",children:t.patientName}),e.jsx(x,{variant:"caption",color:"rgba(0,0,0,0.6)",children:R(t.age)})]})]})}),e.jsx(d,{children:e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(S,{sx:{mr:1,color:"#009689"}}),e.jsx(x,{variant:"body2",color:"#333",children:T(t.templateName)})]})}),e.jsx(d,{children:e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(se,{sx:{mr:1,color:"#009689"}}),e.jsx(x,{variant:"body2",color:"#333",children:t.referBy||"N/A"})]})}),e.jsx(d,{children:e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(re,{sx:{mr:1,color:"#009689"}}),e.jsx(x,{variant:"body2",color:"#333",children:M(t.date)})]})}),e.jsx(d,{children:e.jsx(w,{label:l(t.paymentStatus||t.status||"pending"),color:I(l(t.paymentStatus||t.status||"pending")),size:"small",sx:{background:"rgba(0,150,137,0.1)",color:"#009689","&:hover":{background:"rgba(0,150,137,0.2)"}}})}),e.jsx(d,{align:"right",children:["primary","secondary"].map((u,j)=>e.jsx(y,{size:"small",component:h.button,whileHover:{scale:1.1},whileTap:{scale:.95},sx:{color:u==="primary"?"#009689":"#333","&:hover":{background:"rgba(0,150,137,0.1)"}},children:j===0?e.jsx(oe,{}):e.jsx(S,{})},j))})]},t._id))})})]})})]}),f.length===0&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsx(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:200},children:e.jsx(x,{variant:"h6",color:"rgba(0,0,0,0.6)",children:"No reports found for the selected criteria"})})})]})})};export{Ae as default};
