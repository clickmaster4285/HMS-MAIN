import{r as f,j as d,d as et,f as tt,T as Nt,u as ye,X as Rt,g as Ft,Y as jt,y as W,Z as Lt,$ as Et,a0 as Tt,a1 as kt}from"./index-D_CM1r6M.js";import{I as B,C as At}from"./FormFields-cbkv4QEu.js";import{F as nt,a as at}from"./FormSection-CqnVxHJP.js";import{_ as ue,t as $t}from"./defineProperty-BAgxAJIZ.js";import{_ as ae,a as it,b as Bt,c as Ht}from"./slicedToArray-Dby63wcm.js";import{_ as Gt,a as Ut,b as zt,j as M,c as rt,k as Xt}from"./assertThisInitialized-CHywsmAZ.js";import{_ as V}from"./emotion-element-f0de968e.browser.esm-D488Ioqx.js";import{r as Wt}from"./index-DzhyyO-l.js";import{a as Yt}from"./floating-ui.dom-DefJBFq2.js";import{F as ot,a as Re,b as qt,c as Kt,d as Qt}from"./index-jLjFIv2f.js";import{B as Fe,a as Zt}from"./Buttons-B9m6-61d.js";import{A as Jt}from"./index-CVhLpNpZ.js";import{g as fe}from"./getRoleRoute-Do-Qfut4.js";import{h as je}from"./printUtils-U4E80oRQ.js";import"./index-DK6bWzrh.js";import"./iconBase-DSUUJbys.js";import"./index-Dskypj5f.js";import"./server.browser-DuO4EFVg.js";import"./logo1-Cp_MkaTU.js";var De=f.useLayoutEffect;const en=({formData:n,handleChange:t,mode:a,validGenders:i,validBloodTypes:e,validMaritalStatuses:o})=>{const s=["Father","Mother","Sibling","Spouse","Uncle","Aunt","Grandfather","Grandmother","Other"];return d.jsx(nt,{title:"Patient Information",children:d.jsxs(at,{children:[d.jsx(B,{name:"patient_MRNo",label:"MR Number",icon:"idCard",value:n.patient_MRNo,onChange:t,placeholder:"Auto-generated MR Number",readOnly:!0}),d.jsx(B,{name:"patient_Name",label:"Patient Name",icon:"user",value:n.patient_Name,onChange:t,placeholder:"Enter Patient Name",required:!0}),d.jsx(B,{name:"patient_Guardian.guardian_Name",label:"Guardian Name",icon:"team",value:n.patient_Guardian.guardian_Name,onChange:t,placeholder:"Enter Guardian Name"}),d.jsx(B,{name:"patient_Guardian.guardian_Relation",label:"Guardian Relation",icon:"team",type:"select",value:n.patient_Guardian.guardian_Relation,onChange:t,options:s,placeholder:"Select Relation"}),d.jsx(B,{name:"patient_DateOfBirth",label:"Date of Birth",icon:"calendar",type:"date",value:n.patient_DateOfBirth,max:new Date().toISOString().split("T")[0],onChange:t}),d.jsx(B,{name:"patient_CNIC",label:"CNIC Number",icon:"idCard",value:n.patient_CNIC,onChange:t,placeholder:"XXXXX-XXXXXXX-X"}),d.jsx(B,{name:"patient_Age",label:"Age",icon:"number",value:n.patient_Age,onChange:t,placeholder:"Age will auto-calculate",readOnly:!0}),d.jsx(B,{name:"patient_ContactNo",label:"Patient Contact",icon:"number",type:"tel",value:n.patient_ContactNo,onChange:t,placeholder:"03XX-XXXXXXX",required:!0}),d.jsx(B,{name:"patient_Guardian.guardian_Contact",label:"Guardian Contact",icon:"number",type:"tel",value:n.patient_Guardian.guardian_Contact,onChange:t,placeholder:"03XX-XXXXXXX"}),d.jsx(B,{name:"patient_Address",label:"Address",icon:"home",value:n.patient_Address,onChange:t,placeholder:"Enter Full Address",fullWidth:!0}),d.jsx(B,{name:"patient_Gender",label:"Gender",icon:"man",type:"select",value:n.patient_Gender,onChange:t,options:i,placeholder:"Select Gender"}),d.jsx(B,{name:"patient_MaritalStatus",label:"Marital Status",icon:"ring",type:"select",value:n.patient_MaritalStatus,onChange:t,options:o,placeholder:"Select Marital Status"}),d.jsx(B,{name:"patient_BloodType",label:"Blood Group",icon:"heartbeat",type:"select",value:n.patient_BloodType,onChange:t,options:e,placeholder:"Select Blood Group"}),d.jsx(B,{name:"visitData.referredBy",label:"Referred By",icon:"health",value:n.visitData.referredBy,onChange:t,placeholder:"Enter Referral Name (if any)",fullWidth:!0})]})})};function Le(n,t){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),a.push.apply(a,i)}return a}function I(n){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Le(Object(a),!0).forEach(function(i){ue(n,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Le(Object(a)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(a,i))})}return n}function ie(n,t){if(n==null)return{};var a,i,e=Gt(n,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(n,a)&&(e[a]=n[a])}return e}var tn=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function nn(n){var t=n.defaultInputValue,a=t===void 0?"":t,i=n.defaultMenuIsOpen,e=i===void 0?!1:i,o=n.defaultValue,s=o===void 0?null:o,l=n.inputValue,r=n.menuIsOpen,u=n.onChange,c=n.onInputChange,p=n.onMenuClose,h=n.onMenuOpen,b=n.value,y=ie(n,tn),x=f.useState(l!==void 0?l:a),m=ae(x,2),S=m[0],F=m[1],w=f.useState(r!==void 0?r:e),_=ae(w,2),j=_[0],L=_[1],R=f.useState(b!==void 0?b:s),D=ae(R,2),k=D[0],g=D[1],T=f.useCallback(function(Y,$){typeof u=="function"&&u(Y,$),g(Y)},[u]),z=f.useCallback(function(Y,$){var K;typeof c=="function"&&(K=c(Y,$)),F(K!==void 0?K:Y)},[c]),Q=f.useCallback(function(){typeof h=="function"&&h(),L(!0)},[h]),q=f.useCallback(function(){typeof p=="function"&&p(),L(!1)},[p]),G=l!==void 0?l:S,H=r!==void 0?r:j,Z=b!==void 0?b:k;return I(I({},y),{},{inputValue:G,menuIsOpen:H,onChange:T,onInputChange:z,onMenuClose:q,onMenuOpen:Q,value:Z})}function an(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(n,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,$t(i.key),i)}}function rn(n,t,a){return t&&Ee(n.prototype,t),a&&Ee(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n}function on(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Ut(n,t)}function ve(n){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ve(n)}function st(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(st=function(){return!!n})()}function sn(n,t){if(t&&(it(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zt(n)}function ln(n){var t=st();return function(){var a,i=ve(n);if(t){var e=ve(this).constructor;a=Reflect.construct(i,arguments,e)}else a=i.apply(this,arguments);return sn(this,a)}}function un(n){if(Array.isArray(n))return Bt(n)}function cn(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function dn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function we(n){return un(n)||cn(n)||Ht(n)||dn()}function pn(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}var fn=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],he=function(){};function mn(n,t){return t?t[0]==="-"?n+t:n+"__"+t:n}function vn(n,t){for(var a=arguments.length,i=new Array(a>2?a-2:0),e=2;e<a;e++)i[e-2]=arguments[e];var o=[].concat(i);if(t&&n)for(var s in t)t.hasOwnProperty(s)&&t[s]&&o.push("".concat(mn(n,s)));return o.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var Te=function(t){return Mn(t)?t.filter(Boolean):it(t)==="object"&&t!==null?[t]:[]},lt=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var a=ie(t,fn);return I({},a)},U=function(t,a,i){var e=t.cx,o=t.getStyles,s=t.getClassNames,l=t.className;return{css:o(a,t),className:e(i??{},s(a,t),l)}};function Se(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function hn(n){return Se(n)?window.innerHeight:n.clientHeight}function ut(n){return Se(n)?window.pageYOffset:n.scrollTop}function ge(n,t){if(Se(n)){window.scrollTo(0,t);return}n.scrollTop=t}function gn(n){var t=getComputedStyle(n),a=t.position==="absolute",i=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var e=n;e=e.parentElement;)if(t=getComputedStyle(e),!(a&&t.position==="static")&&i.test(t.overflow+t.overflowY+t.overflowX))return e;return document.documentElement}function bn(n,t,a,i){return a*((n=n/i-1)*n*n+1)+t}function ce(n,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:he,e=ut(n),o=t-e,s=10,l=0;function r(){l+=s;var u=bn(l,e,o,a);ge(n,u),l<a?window.requestAnimationFrame(r):i(n)}r()}function ke(n,t){var a=n.getBoundingClientRect(),i=t.getBoundingClientRect(),e=t.offsetHeight/3;i.bottom+e>a.bottom?ge(n,Math.min(t.offsetTop+t.clientHeight-n.offsetHeight+e,n.scrollHeight)):i.top-e<a.top&&ge(n,Math.max(t.offsetTop-e,0))}function Sn(n){var t=n.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function Ae(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function yn(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var ct=!1,xn={get passive(){return ct=!0}},de=typeof window<"u"?window:{};de.addEventListener&&de.removeEventListener&&(de.addEventListener("p",he,xn),de.removeEventListener("p",he,!1));var Cn=ct;function On(n){return n!=null}function Mn(n){return Array.isArray(n)}function pe(n,t,a){return n?t:a}var Pn=function(t){for(var a=arguments.length,i=new Array(a>1?a-1:0),e=1;e<a;e++)i[e-1]=arguments[e];var o=Object.entries(t).filter(function(s){var l=ae(s,1),r=l[0];return!i.includes(r)});return o.reduce(function(s,l){var r=ae(l,2),u=r[0],c=r[1];return s[u]=c,s},{})},In=["children","innerProps"],Dn=["children","innerProps"];function Vn(n){var t=n.maxHeight,a=n.menuEl,i=n.minHeight,e=n.placement,o=n.shouldScroll,s=n.isFixedPosition,l=n.controlHeight,r=gn(a),u={placement:"bottom",maxHeight:t};if(!a||!a.offsetParent)return u;var c=r.getBoundingClientRect(),p=c.height,h=a.getBoundingClientRect(),b=h.bottom,y=h.height,x=h.top,m=a.offsetParent.getBoundingClientRect(),S=m.top,F=s?window.innerHeight:hn(r),w=ut(r),_=parseInt(getComputedStyle(a).marginBottom,10),j=parseInt(getComputedStyle(a).marginTop,10),L=S-j,R=F-x,D=L+w,k=p-w-x,g=b-F+w+_,T=w+x-j,z=160;switch(e){case"auto":case"bottom":if(R>=y)return{placement:"bottom",maxHeight:t};if(k>=y&&!s)return o&&ce(r,g,z),{placement:"bottom",maxHeight:t};if(!s&&k>=i||s&&R>=i){o&&ce(r,g,z);var Q=s?R-_:k-_;return{placement:"bottom",maxHeight:Q}}if(e==="auto"||s){var q=t,G=s?L:D;return G>=i&&(q=Math.min(G-_-l,t)),{placement:"top",maxHeight:q}}if(e==="bottom")return o&&ge(r,g),{placement:"bottom",maxHeight:t};break;case"top":if(L>=y)return{placement:"top",maxHeight:t};if(D>=y&&!s)return o&&ce(r,T,z),{placement:"top",maxHeight:t};if(!s&&D>=i||s&&L>=i){var H=t;return(!s&&D>=i||s&&L>=i)&&(H=s?L-j:D-j),o&&ce(r,T,z),{placement:"top",maxHeight:H}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(e,'".'))}return u}function wn(n){var t={bottom:"top",top:"bottom"};return n?t[n]:"bottom"}var dt=function(t){return t==="auto"?"bottom":t},_n=function(t,a){var i,e=t.placement,o=t.theme,s=o.borderRadius,l=o.spacing,r=o.colors;return I((i={label:"menu"},ue(i,wn(e),"100%"),ue(i,"position","absolute"),ue(i,"width","100%"),ue(i,"zIndex",1),i),a?{}:{backgroundColor:r.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},pt=f.createContext(null),Nn=function(t){var a=t.children,i=t.minMenuHeight,e=t.maxMenuHeight,o=t.menuPlacement,s=t.menuPosition,l=t.menuShouldScrollIntoView,r=t.theme,u=f.useContext(pt)||{},c=u.setPortalPlacement,p=f.useRef(null),h=f.useState(e),b=ae(h,2),y=b[0],x=b[1],m=f.useState(null),S=ae(m,2),F=S[0],w=S[1],_=r.spacing.controlHeight;return De(function(){var j=p.current;if(j){var L=s==="fixed",R=l&&!L,D=Vn({maxHeight:e,menuEl:j,minHeight:i,placement:o,shouldScroll:R,isFixedPosition:L,controlHeight:_});x(D.maxHeight),w(D.placement),c?.(D.placement)}},[e,o,s,l,i,c,_]),a({ref:p,placerProps:I(I({},t),{},{placement:F||dt(o),maxHeight:y})})},Rn=function(t){var a=t.children,i=t.innerRef,e=t.innerProps;return M("div",V({},U(t,"menu",{menu:!0}),{ref:i},e),a)},Fn=Rn,jn=function(t,a){var i=t.maxHeight,e=t.theme.spacing.baseUnit;return I({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},a?{}:{paddingBottom:e,paddingTop:e})},Ln=function(t){var a=t.children,i=t.innerProps,e=t.innerRef,o=t.isMulti;return M("div",V({},U(t,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:e},i),a)},ft=function(t,a){var i=t.theme,e=i.spacing.baseUnit,o=i.colors;return I({textAlign:"center"},a?{}:{color:o.neutral40,padding:"".concat(e*2,"px ").concat(e*3,"px")})},En=ft,Tn=ft,kn=function(t){var a=t.children,i=a===void 0?"No options":a,e=t.innerProps,o=ie(t,In);return M("div",V({},U(I(I({},o),{},{children:i,innerProps:e}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),e),i)},An=function(t){var a=t.children,i=a===void 0?"Loading...":a,e=t.innerProps,o=ie(t,Dn);return M("div",V({},U(I(I({},o),{},{children:i,innerProps:e}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),e),i)},$n=function(t){var a=t.rect,i=t.offset,e=t.position;return{left:a.left,position:e,top:i,width:a.width,zIndex:1}},Bn=function(t){var a=t.appendTo,i=t.children,e=t.controlElement,o=t.innerProps,s=t.menuPlacement,l=t.menuPosition,r=f.useRef(null),u=f.useRef(null),c=f.useState(dt(s)),p=ae(c,2),h=p[0],b=p[1],y=f.useMemo(function(){return{setPortalPlacement:b}},[]),x=f.useState(null),m=ae(x,2),S=m[0],F=m[1],w=f.useCallback(function(){if(e){var R=Sn(e),D=l==="fixed"?0:window.pageYOffset,k=R[h]+D;(k!==S?.offset||R.left!==S?.rect.left||R.width!==S?.rect.width)&&F({offset:k,rect:R})}},[e,l,h,S?.offset,S?.rect.left,S?.rect.width]);De(function(){w()},[w]);var _=f.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),e&&r.current&&(u.current=Yt(e,r.current,w,{elementResize:"ResizeObserver"in window}))},[e,w]);De(function(){_()},[_]);var j=f.useCallback(function(R){r.current=R,_()},[_]);if(!a&&l!=="fixed"||!S)return null;var L=M("div",V({ref:j},U(I(I({},t),{},{offset:S.offset,position:l,rect:S.rect}),"menuPortal",{"menu-portal":!0}),o),i);return M(pt.Provider,{value:y},a?Wt.createPortal(L,a):L)},Hn=function(t){var a=t.isDisabled,i=t.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:a?"none":void 0,position:"relative"}},Gn=function(t){var a=t.children,i=t.innerProps,e=t.isDisabled,o=t.isRtl;return M("div",V({},U(t,"container",{"--is-disabled":e,"--is-rtl":o}),i),a)},Un=function(t,a){var i=t.theme.spacing,e=t.isMulti,o=t.hasValue,s=t.selectProps.controlShouldRenderValue;return I({alignItems:"center",display:e&&o&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},a?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},zn=function(t){var a=t.children,i=t.innerProps,e=t.isMulti,o=t.hasValue;return M("div",V({},U(t,"valueContainer",{"value-container":!0,"value-container--is-multi":e,"value-container--has-value":o}),i),a)},Xn=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Wn=function(t){var a=t.children,i=t.innerProps;return M("div",V({},U(t,"indicatorsContainer",{indicators:!0}),i),a)},$e,Yn=["size"],qn=["innerProps","isRtl","size"],Kn={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},mt=function(t){var a=t.size,i=ie(t,Yn);return M("svg",V({height:a,width:a,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Kn},i))},_e=function(t){return M(mt,V({size:20},t),M("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},vt=function(t){return M(mt,V({size:20},t),M("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ht=function(t,a){var i=t.isFocused,e=t.theme,o=e.spacing.baseUnit,s=e.colors;return I({label:"indicatorContainer",display:"flex",transition:"color 150ms"},a?{}:{color:i?s.neutral60:s.neutral20,padding:o*2,":hover":{color:i?s.neutral80:s.neutral40}})},Qn=ht,Zn=function(t){var a=t.children,i=t.innerProps;return M("div",V({},U(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),a||M(vt,null))},Jn=ht,ea=function(t){var a=t.children,i=t.innerProps;return M("div",V({},U(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),a||M(_e,null))},ta=function(t,a){var i=t.isDisabled,e=t.theme,o=e.spacing.baseUnit,s=e.colors;return I({label:"indicatorSeparator",alignSelf:"stretch",width:1},a?{}:{backgroundColor:i?s.neutral10:s.neutral20,marginBottom:o*2,marginTop:o*2})},na=function(t){var a=t.innerProps;return M("span",V({},a,U(t,"indicatorSeparator",{"indicator-separator":!0})))},aa=Xt($e||($e=pn([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),ia=function(t,a){var i=t.isFocused,e=t.size,o=t.theme,s=o.colors,l=o.spacing.baseUnit;return I({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:e,lineHeight:1,marginRight:e,textAlign:"center",verticalAlign:"middle"},a?{}:{color:i?s.neutral60:s.neutral20,padding:l*2})},xe=function(t){var a=t.delay,i=t.offset;return M("span",{css:rt({animation:"".concat(aa," 1s ease-in-out ").concat(a,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ra=function(t){var a=t.innerProps,i=t.isRtl,e=t.size,o=e===void 0?4:e,s=ie(t,qn);return M("div",V({},U(I(I({},s),{},{innerProps:a,isRtl:i,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),a),M(xe,{delay:0,offset:i}),M(xe,{delay:160,offset:!0}),M(xe,{delay:320,offset:!i}))},oa=function(t,a){var i=t.isDisabled,e=t.isFocused,o=t.theme,s=o.colors,l=o.borderRadius,r=o.spacing;return I({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:r.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},a?{}:{backgroundColor:i?s.neutral5:s.neutral0,borderColor:i?s.neutral10:e?s.primary:s.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:e?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:e?s.primary:s.neutral30}})},sa=function(t){var a=t.children,i=t.isDisabled,e=t.isFocused,o=t.innerRef,s=t.innerProps,l=t.menuIsOpen;return M("div",V({ref:o},U(t,"control",{control:!0,"control--is-disabled":i,"control--is-focused":e,"control--menu-is-open":l}),s,{"aria-disabled":i||void 0}),a)},la=sa,ua=["data"],ca=function(t,a){var i=t.theme.spacing;return a?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},da=function(t){var a=t.children,i=t.cx,e=t.getStyles,o=t.getClassNames,s=t.Heading,l=t.headingProps,r=t.innerProps,u=t.label,c=t.theme,p=t.selectProps;return M("div",V({},U(t,"group",{group:!0}),r),M(s,V({},l,{selectProps:p,theme:c,getStyles:e,getClassNames:o,cx:i}),u),M("div",null,a))},pa=function(t,a){var i=t.theme,e=i.colors,o=i.spacing;return I({label:"group",cursor:"default",display:"block"},a?{}:{color:e.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},fa=function(t){var a=lt(t);a.data;var i=ie(a,ua);return M("div",V({},U(t,"groupHeading",{"group-heading":!0}),i))},ma=da,va=["innerRef","isDisabled","isHidden","inputClassName"],ha=function(t,a){var i=t.isDisabled,e=t.value,o=t.theme,s=o.spacing,l=o.colors;return I(I({visibility:i?"hidden":"visible",transform:e?"translateZ(0)":""},ga),a?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:l.neutral80})},gt={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},ga={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":I({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},gt)},ba=function(t){return I({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},gt)},Sa=function(t){var a=t.cx,i=t.value,e=lt(t),o=e.innerRef,s=e.isDisabled,l=e.isHidden,r=e.inputClassName,u=ie(e,va);return M("div",V({},U(t,"input",{"input-container":!0}),{"data-value":i||""}),M("input",V({className:a({input:!0},r),ref:o,style:ba(l),disabled:s},u)))},ya=Sa,xa=function(t,a){var i=t.theme,e=i.spacing,o=i.borderRadius,s=i.colors;return I({label:"multiValue",display:"flex",minWidth:0},a?{}:{backgroundColor:s.neutral10,borderRadius:o/2,margin:e.baseUnit/2})},Ca=function(t,a){var i=t.theme,e=i.borderRadius,o=i.colors,s=t.cropWithEllipsis;return I({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},a?{}:{borderRadius:e/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Oa=function(t,a){var i=t.theme,e=i.spacing,o=i.borderRadius,s=i.colors,l=t.isFocused;return I({alignItems:"center",display:"flex"},a?{}:{borderRadius:o/2,backgroundColor:l?s.dangerLight:void 0,paddingLeft:e.baseUnit,paddingRight:e.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},bt=function(t){var a=t.children,i=t.innerProps;return M("div",i,a)},Ma=bt,Pa=bt;function Ia(n){var t=n.children,a=n.innerProps;return M("div",V({role:"button"},a),t||M(_e,{size:14}))}var Da=function(t){var a=t.children,i=t.components,e=t.data,o=t.innerProps,s=t.isDisabled,l=t.removeProps,r=t.selectProps,u=i.Container,c=i.Label,p=i.Remove;return M(u,{data:e,innerProps:I(I({},U(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),o),selectProps:r},M(c,{data:e,innerProps:I({},U(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:r},a),M(p,{data:e,innerProps:I(I({},U(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(a||"option")},l),selectProps:r}))},Va=Da,wa=function(t,a){var i=t.isDisabled,e=t.isFocused,o=t.isSelected,s=t.theme,l=s.spacing,r=s.colors;return I({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},a?{}:{backgroundColor:o?r.primary:e?r.primary25:"transparent",color:i?r.neutral20:o?r.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:o?r.primary:r.primary50}})},_a=function(t){var a=t.children,i=t.isDisabled,e=t.isFocused,o=t.isSelected,s=t.innerRef,l=t.innerProps;return M("div",V({},U(t,"option",{option:!0,"option--is-disabled":i,"option--is-focused":e,"option--is-selected":o}),{ref:s,"aria-disabled":i},l),a)},Na=_a,Ra=function(t,a){var i=t.theme,e=i.spacing,o=i.colors;return I({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},a?{}:{color:o.neutral50,marginLeft:e.baseUnit/2,marginRight:e.baseUnit/2})},Fa=function(t){var a=t.children,i=t.innerProps;return M("div",V({},U(t,"placeholder",{placeholder:!0}),i),a)},ja=Fa,La=function(t,a){var i=t.isDisabled,e=t.theme,o=e.spacing,s=e.colors;return I({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},a?{}:{color:i?s.neutral40:s.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},Ea=function(t){var a=t.children,i=t.isDisabled,e=t.innerProps;return M("div",V({},U(t,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),e),a)},Ta=Ea,ka={ClearIndicator:ea,Control:la,DropdownIndicator:Zn,DownChevron:vt,CrossIcon:_e,Group:ma,GroupHeading:fa,IndicatorsContainer:Wn,IndicatorSeparator:na,Input:ya,LoadingIndicator:ra,Menu:Fn,MenuList:Ln,MenuPortal:Bn,LoadingMessage:An,NoOptionsMessage:kn,MultiValue:Va,MultiValueContainer:Ma,MultiValueLabel:Pa,MultiValueRemove:Ia,Option:Na,Placeholder:ja,SelectContainer:Gn,SingleValue:Ta,ValueContainer:zn},Aa=function(t){return I(I({},ka),t.components)},Be=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function $a(n,t){return!!(n===t||Be(n)&&Be(t))}function Ba(n,t){if(n.length!==t.length)return!1;for(var a=0;a<n.length;a++)if(!$a(n[a],t[a]))return!1;return!0}function Ha(n,t){t===void 0&&(t=Ba);var a=null;function i(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(a&&a.lastThis===this&&t(e,a.lastArgs))return a.lastResult;var s=n.apply(this,e);return a={lastResult:s,lastArgs:e,lastThis:this},s}return i.clear=function(){a=null},i}var Ga={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Ua=function(t){return M("span",V({css:Ga},t))},He=Ua,za={guidance:function(t){var a=t.isSearchable,i=t.isMulti,e=t.tabSelectsValue,o=t.context,s=t.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(e?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(t["aria-label"]||"Select"," is focused ").concat(a?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var a=t.action,i=t.label,e=i===void 0?"":i,o=t.labels,s=t.isDisabled;switch(a){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(e,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return s?"option ".concat(e," is disabled. Select another option."):"option ".concat(e,", selected.");default:return""}},onFocus:function(t){var a=t.context,i=t.focused,e=t.options,o=t.label,s=o===void 0?"":o,l=t.selectValue,r=t.isDisabled,u=t.isSelected,c=t.isAppleDevice,p=function(x,m){return x&&x.length?"".concat(x.indexOf(m)+1," of ").concat(x.length):""};if(a==="value"&&l)return"value ".concat(s," focused, ").concat(p(l,i),".");if(a==="menu"&&c){var h=r?" disabled":"",b="".concat(u?" selected":"").concat(h);return"".concat(s).concat(b,", ").concat(p(e,i),".")}return""},onFilter:function(t){var a=t.inputValue,i=t.resultsMessage;return"".concat(i).concat(a?" for search term "+a:"",".")}},Xa=function(t){var a=t.ariaSelection,i=t.focusedOption,e=t.focusedValue,o=t.focusableOptions,s=t.isFocused,l=t.selectValue,r=t.selectProps,u=t.id,c=t.isAppleDevice,p=r.ariaLiveMessages,h=r.getOptionLabel,b=r.inputValue,y=r.isMulti,x=r.isOptionDisabled,m=r.isSearchable,S=r.menuIsOpen,F=r.options,w=r.screenReaderStatus,_=r.tabSelectsValue,j=r.isLoading,L=r["aria-label"],R=r["aria-live"],D=f.useMemo(function(){return I(I({},za),p||{})},[p]),k=f.useMemo(function(){var G="";if(a&&D.onChange){var H=a.option,Z=a.options,Y=a.removedValue,$=a.removedValues,K=a.value,se=function(P){return Array.isArray(P)?null:P},X=Y||H||se(K),J=X?h(X):"",te=Z||$||void 0,ne=te?te.map(h):[],v=I({isDisabled:X&&x(X,l),label:J,labels:ne},a);G=D.onChange(v)}return G},[a,D,x,l,h]),g=f.useMemo(function(){var G="",H=i||e,Z=!!(i&&l&&l.includes(i));if(H&&D.onFocus){var Y={focused:H,label:h(H),isDisabled:x(H,l),isSelected:Z,options:o,context:H===i?"menu":"value",selectValue:l,isAppleDevice:c};G=D.onFocus(Y)}return G},[i,e,h,x,D,o,l,c]),T=f.useMemo(function(){var G="";if(S&&F.length&&!j&&D.onFilter){var H=w({count:o.length});G=D.onFilter({inputValue:b,resultsMessage:H})}return G},[o,b,S,D,F,w,j]),z=a?.action==="initial-input-focus",Q=f.useMemo(function(){var G="";if(D.guidance){var H=e?"value":S?"menu":"input";G=D.guidance({"aria-label":L,context:H,isDisabled:i&&x(i,l),isMulti:y,isSearchable:m,tabSelectsValue:_,isInitialFocus:z})}return G},[L,i,e,y,x,m,S,D,l,_,z]),q=M(f.Fragment,null,M("span",{id:"aria-selection"},k),M("span",{id:"aria-focused"},g),M("span",{id:"aria-results"},T),M("span",{id:"aria-guidance"},Q));return M(f.Fragment,null,M(He,{id:u},z&&q),M(He,{"aria-live":R,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!z&&q))},Wa=Xa,Ve=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Ya=new RegExp("["+Ve.map(function(n){return n.letters}).join("")+"]","g"),St={};for(var Ce=0;Ce<Ve.length;Ce++)for(var Oe=Ve[Ce],Me=0;Me<Oe.letters.length;Me++)St[Oe.letters[Me]]=Oe.base;var yt=function(t){return t.replace(Ya,function(a){return St[a]})},qa=Ha(yt),Ge=function(t){return t.replace(/^\s+|\s+$/g,"")},Ka=function(t){return"".concat(t.label," ").concat(t.value)},Qa=function(t){return function(a,i){if(a.data.__isNew__)return!0;var e=I({ignoreCase:!0,ignoreAccents:!0,stringify:Ka,trim:!0,matchFrom:"any"},t),o=e.ignoreCase,s=e.ignoreAccents,l=e.stringify,r=e.trim,u=e.matchFrom,c=r?Ge(i):i,p=r?Ge(l(a)):l(a);return o&&(c=c.toLowerCase(),p=p.toLowerCase()),s&&(c=qa(c),p=yt(p)),u==="start"?p.substr(0,c.length)===c:p.indexOf(c)>-1}},Za=["innerRef"];function Ja(n){var t=n.innerRef,a=ie(n,Za),i=Pn(a,"onExited","in","enter","exit","appear");return M("input",V({ref:t},i,{css:rt({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var ei=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function ti(n){var t=n.isEnabled,a=n.onBottomArrive,i=n.onBottomLeave,e=n.onTopArrive,o=n.onTopLeave,s=f.useRef(!1),l=f.useRef(!1),r=f.useRef(0),u=f.useRef(null),c=f.useCallback(function(m,S){if(u.current!==null){var F=u.current,w=F.scrollTop,_=F.scrollHeight,j=F.clientHeight,L=u.current,R=S>0,D=_-j-w,k=!1;D>S&&s.current&&(i&&i(m),s.current=!1),R&&l.current&&(o&&o(m),l.current=!1),R&&S>D?(a&&!s.current&&a(m),L.scrollTop=_,k=!0,s.current=!0):!R&&-S>w&&(e&&!l.current&&e(m),L.scrollTop=0,k=!0,l.current=!0),k&&ei(m)}},[a,i,e,o]),p=f.useCallback(function(m){c(m,m.deltaY)},[c]),h=f.useCallback(function(m){r.current=m.changedTouches[0].clientY},[]),b=f.useCallback(function(m){var S=r.current-m.changedTouches[0].clientY;c(m,S)},[c]),y=f.useCallback(function(m){if(m){var S=Cn?{passive:!1}:!1;m.addEventListener("wheel",p,S),m.addEventListener("touchstart",h,S),m.addEventListener("touchmove",b,S)}},[b,h,p]),x=f.useCallback(function(m){m&&(m.removeEventListener("wheel",p,!1),m.removeEventListener("touchstart",h,!1),m.removeEventListener("touchmove",b,!1))},[b,h,p]);return f.useEffect(function(){if(t){var m=u.current;return y(m),function(){x(m)}}},[t,y,x]),function(m){u.current=m}}var Ue=["boxSizing","height","overflow","paddingRight","position"],ze={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Xe(n){n.cancelable&&n.preventDefault()}function We(n){n.stopPropagation()}function Ye(){var n=this.scrollTop,t=this.scrollHeight,a=n+this.offsetHeight;n===0?this.scrollTop=1:a===t&&(this.scrollTop=n-1)}function qe(){return"ontouchstart"in window||navigator.maxTouchPoints}var Ke=!!(typeof window<"u"&&window.document&&window.document.createElement),le=0,oe={capture:!1,passive:!1};function ni(n){var t=n.isEnabled,a=n.accountForScrollbars,i=a===void 0?!0:a,e=f.useRef({}),o=f.useRef(null),s=f.useCallback(function(r){if(Ke){var u=document.body,c=u&&u.style;if(i&&Ue.forEach(function(y){var x=c&&c[y];e.current[y]=x}),i&&le<1){var p=parseInt(e.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,b=window.innerWidth-h+p||0;Object.keys(ze).forEach(function(y){var x=ze[y];c&&(c[y]=x)}),c&&(c.paddingRight="".concat(b,"px"))}u&&qe()&&(u.addEventListener("touchmove",Xe,oe),r&&(r.addEventListener("touchstart",Ye,oe),r.addEventListener("touchmove",We,oe))),le+=1}},[i]),l=f.useCallback(function(r){if(Ke){var u=document.body,c=u&&u.style;le=Math.max(le-1,0),i&&le<1&&Ue.forEach(function(p){var h=e.current[p];c&&(c[p]=h)}),u&&qe()&&(u.removeEventListener("touchmove",Xe,oe),r&&(r.removeEventListener("touchstart",Ye,oe),r.removeEventListener("touchmove",We,oe)))}},[i]);return f.useEffect(function(){if(t){var r=o.current;return s(r),function(){l(r)}}},[t,s,l]),function(r){o.current=r}}var ai=function(t){var a=t.target;return a.ownerDocument.activeElement&&a.ownerDocument.activeElement.blur()},ii={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ri(n){var t=n.children,a=n.lockEnabled,i=n.captureEnabled,e=i===void 0?!0:i,o=n.onBottomArrive,s=n.onBottomLeave,l=n.onTopArrive,r=n.onTopLeave,u=ti({isEnabled:e,onBottomArrive:o,onBottomLeave:s,onTopArrive:l,onTopLeave:r}),c=ni({isEnabled:a}),p=function(b){u(b),c(b)};return M(f.Fragment,null,a&&M("div",{onClick:ai,css:ii}),t(p))}var oi={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},si=function(t){var a=t.name,i=t.onFocus;return M("input",{required:!0,name:a,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:oi,value:"",onChange:function(){}})},li=si;function Ne(n){var t;return typeof window<"u"&&window.navigator!=null?n.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function ui(){return Ne(/^iPhone/i)}function xt(){return Ne(/^Mac/i)}function ci(){return Ne(/^iPad/i)||xt()&&navigator.maxTouchPoints>1}function di(){return ui()||ci()}function pi(){return xt()||di()}var fi=function(t){return t.label},mi=function(t){return t.label},vi=function(t){return t.value},hi=function(t){return!!t.isDisabled},gi={clearIndicator:Jn,container:Hn,control:oa,dropdownIndicator:Qn,group:ca,groupHeading:pa,indicatorsContainer:Xn,indicatorSeparator:ta,input:ha,loadingIndicator:ia,loadingMessage:Tn,menu:_n,menuList:jn,menuPortal:$n,multiValue:xa,multiValueLabel:Ca,multiValueRemove:Oa,noOptionsMessage:En,option:wa,placeholder:Ra,singleValue:La,valueContainer:Un},bi={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Si=4,Ct=4,yi=38,xi=Ct*2,Ci={baseUnit:Ct,controlHeight:yi,menuGutter:xi},Pe={borderRadius:Si,colors:bi,spacing:Ci},Oi={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Ae(),captureMenuScroll:!Ae(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Qa(),formatGroupLabel:fi,getOptionLabel:mi,getOptionValue:vi,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:hi,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!yn(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var a=t.count;return"".concat(a," result").concat(a!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Qe(n,t,a,i){var e=Pt(n,t,a),o=It(n,t,a),s=Mt(n,t),l=be(n,t);return{type:"option",data:t,isDisabled:e,isSelected:o,label:s,value:l,index:i}}function me(n,t){return n.options.map(function(a,i){if("options"in a){var e=a.options.map(function(s,l){return Qe(n,s,t,l)}).filter(function(s){return Je(n,s)});return e.length>0?{type:"group",data:a,options:e,index:i}:void 0}var o=Qe(n,a,t,i);return Je(n,o)?o:void 0}).filter(On)}function Ot(n){return n.reduce(function(t,a){return a.type==="group"?t.push.apply(t,we(a.options.map(function(i){return i.data}))):t.push(a.data),t},[])}function Ze(n,t){return n.reduce(function(a,i){return i.type==="group"?a.push.apply(a,we(i.options.map(function(e){return{data:e.data,id:"".concat(t,"-").concat(i.index,"-").concat(e.index)}}))):a.push({data:i.data,id:"".concat(t,"-").concat(i.index)}),a},[])}function Mi(n,t){return Ot(me(n,t))}function Je(n,t){var a=n.inputValue,i=a===void 0?"":a,e=t.data,o=t.isSelected,s=t.label,l=t.value;return(!Vt(n)||!o)&&Dt(n,{label:s,value:l,data:e},i)}function Pi(n,t){var a=n.focusedValue,i=n.selectValue,e=i.indexOf(a);if(e>-1){var o=t.indexOf(a);if(o>-1)return a;if(e<t.length)return t[e]}return null}function Ii(n,t){var a=n.focusedOption;return a&&t.indexOf(a)>-1?a:t[0]}var Ie=function(t,a){var i,e=(i=t.find(function(o){return o.data===a}))===null||i===void 0?void 0:i.id;return e||null},Mt=function(t,a){return t.getOptionLabel(a)},be=function(t,a){return t.getOptionValue(a)};function Pt(n,t,a){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(t,a):!1}function It(n,t,a){if(a.indexOf(t)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(t,a);var i=be(n,t);return a.some(function(e){return be(n,e)===i})}function Dt(n,t,a){return n.filterOption?n.filterOption(t,a):!0}var Vt=function(t){var a=t.hideSelectedOptions,i=t.isMulti;return a===void 0?i:a},Di=1,wt=(function(n){on(a,n);var t=ln(a);function a(i){var e;if(an(this,a),e=t.call(this,i),e.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},e.blockOptionHover=!1,e.isComposing=!1,e.commonProps=void 0,e.initialTouchX=0,e.initialTouchY=0,e.openAfterFocus=!1,e.scrollToFocusedOptionOnUpdate=!1,e.userIsDragging=void 0,e.controlRef=null,e.getControlRef=function(r){e.controlRef=r},e.focusedOptionRef=null,e.getFocusedOptionRef=function(r){e.focusedOptionRef=r},e.menuListRef=null,e.getMenuListRef=function(r){e.menuListRef=r},e.inputRef=null,e.getInputRef=function(r){e.inputRef=r},e.focus=e.focusInput,e.blur=e.blurInput,e.onChange=function(r,u){var c=e.props,p=c.onChange,h=c.name;u.name=h,e.ariaOnChange(r,u),p(r,u)},e.setValue=function(r,u,c){var p=e.props,h=p.closeMenuOnSelect,b=p.isMulti,y=p.inputValue;e.onInputChange("",{action:"set-value",prevInputValue:y}),h&&(e.setState({inputIsHiddenAfterUpdate:!b}),e.onMenuClose()),e.setState({clearFocusValueOnUpdate:!0}),e.onChange(r,{action:u,option:c})},e.selectOption=function(r){var u=e.props,c=u.blurInputOnSelect,p=u.isMulti,h=u.name,b=e.state.selectValue,y=p&&e.isOptionSelected(r,b),x=e.isOptionDisabled(r,b);if(y){var m=e.getOptionValue(r);e.setValue(b.filter(function(S){return e.getOptionValue(S)!==m}),"deselect-option",r)}else if(!x)p?e.setValue([].concat(we(b),[r]),"select-option",r):e.setValue(r,"select-option");else{e.ariaOnChange(r,{action:"select-option",option:r,name:h});return}c&&e.blurInput()},e.removeValue=function(r){var u=e.props.isMulti,c=e.state.selectValue,p=e.getOptionValue(r),h=c.filter(function(y){return e.getOptionValue(y)!==p}),b=pe(u,h,h[0]||null);e.onChange(b,{action:"remove-value",removedValue:r}),e.focusInput()},e.clearValue=function(){var r=e.state.selectValue;e.onChange(pe(e.props.isMulti,[],null),{action:"clear",removedValues:r})},e.popValue=function(){var r=e.props.isMulti,u=e.state.selectValue,c=u[u.length-1],p=u.slice(0,u.length-1),h=pe(r,p,p[0]||null);c&&e.onChange(h,{action:"pop-value",removedValue:c})},e.getFocusedOptionId=function(r){return Ie(e.state.focusableOptionsWithIds,r)},e.getFocusableOptionsWithIds=function(){return Ze(me(e.props,e.state.selectValue),e.getElementId("option"))},e.getValue=function(){return e.state.selectValue},e.cx=function(){for(var r=arguments.length,u=new Array(r),c=0;c<r;c++)u[c]=arguments[c];return vn.apply(void 0,[e.props.classNamePrefix].concat(u))},e.getOptionLabel=function(r){return Mt(e.props,r)},e.getOptionValue=function(r){return be(e.props,r)},e.getStyles=function(r,u){var c=e.props.unstyled,p=gi[r](u,c);p.boxSizing="border-box";var h=e.props.styles[r];return h?h(p,u):p},e.getClassNames=function(r,u){var c,p;return(c=(p=e.props.classNames)[r])===null||c===void 0?void 0:c.call(p,u)},e.getElementId=function(r){return"".concat(e.state.instancePrefix,"-").concat(r)},e.getComponents=function(){return Aa(e.props)},e.buildCategorizedOptions=function(){return me(e.props,e.state.selectValue)},e.getCategorizedOptions=function(){return e.props.menuIsOpen?e.buildCategorizedOptions():[]},e.buildFocusableOptions=function(){return Ot(e.buildCategorizedOptions())},e.getFocusableOptions=function(){return e.props.menuIsOpen?e.buildFocusableOptions():[]},e.ariaOnChange=function(r,u){e.setState({ariaSelection:I({value:r},u)})},e.onMenuMouseDown=function(r){r.button===0&&(r.stopPropagation(),r.preventDefault(),e.focusInput())},e.onMenuMouseMove=function(r){e.blockOptionHover=!1},e.onControlMouseDown=function(r){if(!r.defaultPrevented){var u=e.props.openMenuOnClick;e.state.isFocused?e.props.menuIsOpen?r.target.tagName!=="INPUT"&&r.target.tagName!=="TEXTAREA"&&e.onMenuClose():u&&e.openMenu("first"):(u&&(e.openAfterFocus=!0),e.focusInput()),r.target.tagName!=="INPUT"&&r.target.tagName!=="TEXTAREA"&&r.preventDefault()}},e.onDropdownIndicatorMouseDown=function(r){if(!(r&&r.type==="mousedown"&&r.button!==0)&&!e.props.isDisabled){var u=e.props,c=u.isMulti,p=u.menuIsOpen;e.focusInput(),p?(e.setState({inputIsHiddenAfterUpdate:!c}),e.onMenuClose()):e.openMenu("first"),r.preventDefault()}},e.onClearIndicatorMouseDown=function(r){r&&r.type==="mousedown"&&r.button!==0||(e.clearValue(),r.preventDefault(),e.openAfterFocus=!1,r.type==="touchend"?e.focusInput():setTimeout(function(){return e.focusInput()}))},e.onScroll=function(r){typeof e.props.closeMenuOnScroll=="boolean"?r.target instanceof HTMLElement&&Se(r.target)&&e.props.onMenuClose():typeof e.props.closeMenuOnScroll=="function"&&e.props.closeMenuOnScroll(r)&&e.props.onMenuClose()},e.onCompositionStart=function(){e.isComposing=!0},e.onCompositionEnd=function(){e.isComposing=!1},e.onTouchStart=function(r){var u=r.touches,c=u&&u.item(0);c&&(e.initialTouchX=c.clientX,e.initialTouchY=c.clientY,e.userIsDragging=!1)},e.onTouchMove=function(r){var u=r.touches,c=u&&u.item(0);if(c){var p=Math.abs(c.clientX-e.initialTouchX),h=Math.abs(c.clientY-e.initialTouchY),b=5;e.userIsDragging=p>b||h>b}},e.onTouchEnd=function(r){e.userIsDragging||(e.controlRef&&!e.controlRef.contains(r.target)&&e.menuListRef&&!e.menuListRef.contains(r.target)&&e.blurInput(),e.initialTouchX=0,e.initialTouchY=0)},e.onControlTouchEnd=function(r){e.userIsDragging||e.onControlMouseDown(r)},e.onClearIndicatorTouchEnd=function(r){e.userIsDragging||e.onClearIndicatorMouseDown(r)},e.onDropdownIndicatorTouchEnd=function(r){e.userIsDragging||e.onDropdownIndicatorMouseDown(r)},e.handleInputChange=function(r){var u=e.props.inputValue,c=r.currentTarget.value;e.setState({inputIsHiddenAfterUpdate:!1}),e.onInputChange(c,{action:"input-change",prevInputValue:u}),e.props.menuIsOpen||e.onMenuOpen()},e.onInputFocus=function(r){e.props.onFocus&&e.props.onFocus(r),e.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(e.openAfterFocus||e.props.openMenuOnFocus)&&e.openMenu("first"),e.openAfterFocus=!1},e.onInputBlur=function(r){var u=e.props.inputValue;if(e.menuListRef&&e.menuListRef.contains(document.activeElement)){e.inputRef.focus();return}e.props.onBlur&&e.props.onBlur(r),e.onInputChange("",{action:"input-blur",prevInputValue:u}),e.onMenuClose(),e.setState({focusedValue:null,isFocused:!1})},e.onOptionHover=function(r){if(!(e.blockOptionHover||e.state.focusedOption===r)){var u=e.getFocusableOptions(),c=u.indexOf(r);e.setState({focusedOption:r,focusedOptionId:c>-1?e.getFocusedOptionId(r):null})}},e.shouldHideSelectedOptions=function(){return Vt(e.props)},e.onValueInputFocus=function(r){r.preventDefault(),r.stopPropagation(),e.focus()},e.onKeyDown=function(r){var u=e.props,c=u.isMulti,p=u.backspaceRemovesValue,h=u.escapeClearsValue,b=u.inputValue,y=u.isClearable,x=u.isDisabled,m=u.menuIsOpen,S=u.onKeyDown,F=u.tabSelectsValue,w=u.openMenuOnFocus,_=e.state,j=_.focusedOption,L=_.focusedValue,R=_.selectValue;if(!x&&!(typeof S=="function"&&(S(r),r.defaultPrevented))){switch(e.blockOptionHover=!0,r.key){case"ArrowLeft":if(!c||b)return;e.focusValue("previous");break;case"ArrowRight":if(!c||b)return;e.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(L)e.removeValue(L);else{if(!p)return;c?e.popValue():y&&e.clearValue()}break;case"Tab":if(e.isComposing||r.shiftKey||!m||!F||!j||w&&e.isOptionSelected(j,R))return;e.selectOption(j);break;case"Enter":if(r.keyCode===229)break;if(m){if(!j||e.isComposing)return;e.selectOption(j);break}return;case"Escape":m?(e.setState({inputIsHiddenAfterUpdate:!1}),e.onInputChange("",{action:"menu-close",prevInputValue:b}),e.onMenuClose()):y&&h&&e.clearValue();break;case" ":if(b)return;if(!m){e.openMenu("first");break}if(!j)return;e.selectOption(j);break;case"ArrowUp":m?e.focusOption("up"):e.openMenu("last");break;case"ArrowDown":m?e.focusOption("down"):e.openMenu("first");break;case"PageUp":if(!m)return;e.focusOption("pageup");break;case"PageDown":if(!m)return;e.focusOption("pagedown");break;case"Home":if(!m)return;e.focusOption("first");break;case"End":if(!m)return;e.focusOption("last");break;default:return}r.preventDefault()}},e.state.instancePrefix="react-select-"+(e.props.instanceId||++Di),e.state.selectValue=Te(i.value),i.menuIsOpen&&e.state.selectValue.length){var o=e.getFocusableOptionsWithIds(),s=e.buildFocusableOptions(),l=s.indexOf(e.state.selectValue[0]);e.state.focusableOptionsWithIds=o,e.state.focusedOption=s[l],e.state.focusedOptionId=Ie(o,s[l])}return e}return rn(a,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&ke(this.menuListRef,this.focusedOptionRef),pi()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(e){var o=this.props,s=o.isDisabled,l=o.menuIsOpen,r=this.state.isFocused;(r&&!s&&e.isDisabled||r&&l&&!e.menuIsOpen)&&this.focusInput(),r&&s&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!r&&!s&&e.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(ke(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,o){this.props.onInputChange(e,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var o=this,s=this.state,l=s.selectValue,r=s.isFocused,u=this.buildFocusableOptions(),c=e==="first"?0:u.length-1;if(!this.props.isMulti){var p=u.indexOf(l[0]);p>-1&&(c=p)}this.scrollToFocusedOptionOnUpdate=!(r&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[c],focusedOptionId:this.getFocusedOptionId(u[c])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(e){var o=this.state,s=o.selectValue,l=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var r=s.indexOf(l);l||(r=-1);var u=s.length-1,c=-1;if(s.length){switch(e){case"previous":r===0?c=0:r===-1?c=u:c=r-1;break;case"next":r>-1&&r<u&&(c=r+1);break}this.setState({inputIsHidden:c!==-1,focusedValue:s[c]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,s=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var r=0,u=l.indexOf(s);s||(u=-1),e==="up"?r=u>0?u-1:l.length-1:e==="down"?r=(u+1)%l.length:e==="pageup"?(r=u-o,r<0&&(r=0)):e==="pagedown"?(r=u+o,r>l.length-1&&(r=l.length-1)):e==="last"&&(r=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[r],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[r])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Pe):I(I({},Pe),this.props.theme):Pe})},{key:"getCommonProps",value:function(){var e=this.clearValue,o=this.cx,s=this.getStyles,l=this.getClassNames,r=this.getValue,u=this.selectOption,c=this.setValue,p=this.props,h=p.isMulti,b=p.isRtl,y=p.options,x=this.hasValue();return{clearValue:e,cx:o,getStyles:s,getClassNames:l,getValue:r,hasValue:x,isMulti:h,isRtl:b,options:y,selectOption:u,selectProps:p,setValue:c,theme:this.getTheme()}}},{key:"hasValue",value:function(){var e=this.state.selectValue;return e.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,o=e.isClearable,s=e.isMulti;return o===void 0?s:o}},{key:"isOptionDisabled",value:function(e,o){return Pt(this.props,e,o)}},{key:"isOptionSelected",value:function(e,o){return It(this.props,e,o)}},{key:"filterOption",value:function(e,o){return Dt(this.props,e,o)}},{key:"formatOptionLabel",value:function(e,o){if(typeof this.props.formatOptionLabel=="function"){var s=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(e,{context:o,inputValue:s,selectValue:l})}else return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var e=this.props,o=e.isDisabled,s=e.isSearchable,l=e.inputId,r=e.inputValue,u=e.tabIndex,c=e.form,p=e.menuIsOpen,h=e.required,b=this.getComponents(),y=b.Input,x=this.state,m=x.inputIsHidden,S=x.ariaSelection,F=this.commonProps,w=l||this.getElementId("input"),_=I(I(I({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!s&&{"aria-readonly":!0}),this.hasValue()?S?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return s?f.createElement(y,V({},F,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:o,isHidden:m,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:c,type:"text",value:r},_)):f.createElement(Ja,V({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:he,onFocus:this.onInputFocus,disabled:o,tabIndex:u,inputMode:"none",form:c,value:""},_))})},{key:"renderPlaceholderOrValue",value:function(){var e=this,o=this.getComponents(),s=o.MultiValue,l=o.MultiValueContainer,r=o.MultiValueLabel,u=o.MultiValueRemove,c=o.SingleValue,p=o.Placeholder,h=this.commonProps,b=this.props,y=b.controlShouldRenderValue,x=b.isDisabled,m=b.isMulti,S=b.inputValue,F=b.placeholder,w=this.state,_=w.selectValue,j=w.focusedValue,L=w.isFocused;if(!this.hasValue()||!y)return S?null:f.createElement(p,V({},h,{key:"placeholder",isDisabled:x,isFocused:L,innerProps:{id:this.getElementId("placeholder")}}),F);if(m)return _.map(function(D,k){var g=D===j,T="".concat(e.getOptionLabel(D),"-").concat(e.getOptionValue(D));return f.createElement(s,V({},h,{components:{Container:l,Label:r,Remove:u},isFocused:g,isDisabled:x,key:T,index:k,removeProps:{onClick:function(){return e.removeValue(D)},onTouchEnd:function(){return e.removeValue(D)},onMouseDown:function(Q){Q.preventDefault()}},data:D}),e.formatOptionLabel(D,"value"))});if(S)return null;var R=_[0];return f.createElement(c,V({},h,{data:R,isDisabled:x}),this.formatOptionLabel(R,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents(),o=e.ClearIndicator,s=this.commonProps,l=this.props,r=l.isDisabled,u=l.isLoading,c=this.state.isFocused;if(!this.isClearable()||!o||r||!this.hasValue()||u)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(o,V({},s,{innerProps:p,isFocused:c}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents(),o=e.LoadingIndicator,s=this.commonProps,l=this.props,r=l.isDisabled,u=l.isLoading,c=this.state.isFocused;if(!o||!u)return null;var p={"aria-hidden":"true"};return f.createElement(o,V({},s,{innerProps:p,isDisabled:r,isFocused:c}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),o=e.DropdownIndicator,s=e.IndicatorSeparator;if(!o||!s)return null;var l=this.commonProps,r=this.props.isDisabled,u=this.state.isFocused;return f.createElement(s,V({},l,{isDisabled:r,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents(),o=e.DropdownIndicator;if(!o)return null;var s=this.commonProps,l=this.props.isDisabled,r=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(o,V({},s,{innerProps:u,isDisabled:l,isFocused:r}))}},{key:"renderMenu",value:function(){var e=this,o=this.getComponents(),s=o.Group,l=o.GroupHeading,r=o.Menu,u=o.MenuList,c=o.MenuPortal,p=o.LoadingMessage,h=o.NoOptionsMessage,b=o.Option,y=this.commonProps,x=this.state.focusedOption,m=this.props,S=m.captureMenuScroll,F=m.inputValue,w=m.isLoading,_=m.loadingMessage,j=m.minMenuHeight,L=m.maxMenuHeight,R=m.menuIsOpen,D=m.menuPlacement,k=m.menuPosition,g=m.menuPortalTarget,T=m.menuShouldBlockScroll,z=m.menuShouldScrollIntoView,Q=m.noOptionsMessage,q=m.onMenuScrollToTop,G=m.onMenuScrollToBottom;if(!R)return null;var H=function(J,te){var ne=J.type,v=J.data,O=J.isDisabled,P=J.isSelected,E=J.label,A=J.value,N=x===v,C=O?void 0:function(){return e.onOptionHover(v)},ee=O?void 0:function(){return e.selectOption(v)},re="".concat(e.getElementId("option"),"-").concat(te),_t={id:re,onClick:ee,onMouseMove:C,onMouseOver:C,tabIndex:-1,role:"option","aria-selected":e.state.isAppleDevice?void 0:P};return f.createElement(b,V({},y,{innerProps:_t,data:v,isDisabled:O,isSelected:P,key:re,label:E,type:ne,value:A,isFocused:N,innerRef:N?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(J.data,"menu"))},Z;if(this.hasOptions())Z=this.getCategorizedOptions().map(function(X){if(X.type==="group"){var J=X.data,te=X.options,ne=X.index,v="".concat(e.getElementId("group"),"-").concat(ne),O="".concat(v,"-heading");return f.createElement(s,V({},y,{key:v,data:J,options:te,Heading:l,headingProps:{id:O,data:X.data},label:e.formatGroupLabel(X.data)}),X.options.map(function(P){return H(P,"".concat(ne,"-").concat(P.index))}))}else if(X.type==="option")return H(X,"".concat(X.index))});else if(w){var Y=_({inputValue:F});if(Y===null)return null;Z=f.createElement(p,y,Y)}else{var $=Q({inputValue:F});if($===null)return null;Z=f.createElement(h,y,$)}var K={minMenuHeight:j,maxMenuHeight:L,menuPlacement:D,menuPosition:k,menuShouldScrollIntoView:z},se=f.createElement(Nn,V({},y,K),function(X){var J=X.ref,te=X.placerProps,ne=te.placement,v=te.maxHeight;return f.createElement(r,V({},y,K,{innerRef:J,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:w,placement:ne}),f.createElement(ri,{captureEnabled:S,onTopArrive:q,onBottomArrive:G,lockEnabled:T},function(O){return f.createElement(u,V({},y,{innerRef:function(E){e.getMenuListRef(E),O(E)},innerProps:{role:"listbox","aria-multiselectable":y.isMulti,id:e.getElementId("listbox")},isLoading:w,maxHeight:v,focusedOption:x}),Z)}))});return g||k==="fixed"?f.createElement(c,V({},y,{appendTo:g,controlElement:this.controlRef,menuPlacement:D,menuPosition:k}),se):se}},{key:"renderFormField",value:function(){var e=this,o=this.props,s=o.delimiter,l=o.isDisabled,r=o.isMulti,u=o.name,c=o.required,p=this.state.selectValue;if(c&&!this.hasValue()&&!l)return f.createElement(li,{name:u,onFocus:this.onValueInputFocus});if(!(!u||l))if(r)if(s){var h=p.map(function(x){return e.getOptionValue(x)}).join(s);return f.createElement("input",{name:u,type:"hidden",value:h})}else{var b=p.length>0?p.map(function(x,m){return f.createElement("input",{key:"i-".concat(m),name:u,type:"hidden",value:e.getOptionValue(x)})}):f.createElement("input",{name:u,type:"hidden",value:""});return f.createElement("div",null,b)}else{var y=p[0]?this.getOptionValue(p[0]):"";return f.createElement("input",{name:u,type:"hidden",value:y})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,o=this.state,s=o.ariaSelection,l=o.focusedOption,r=o.focusedValue,u=o.isFocused,c=o.selectValue,p=this.getFocusableOptions();return f.createElement(Wa,V({},e,{id:this.getElementId("live-region"),ariaSelection:s,focusedOption:l,focusedValue:r,isFocused:u,selectValue:c,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var e=this.getComponents(),o=e.Control,s=e.IndicatorsContainer,l=e.SelectContainer,r=e.ValueContainer,u=this.props,c=u.className,p=u.id,h=u.isDisabled,b=u.menuIsOpen,y=this.state.isFocused,x=this.commonProps=this.getCommonProps();return f.createElement(l,V({},x,{className:c,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:y}),this.renderLiveRegion(),f.createElement(o,V({},x,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:y,menuIsOpen:b}),f.createElement(r,V({},x,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),f.createElement(s,V({},x,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,o){var s=o.prevProps,l=o.clearFocusValueOnUpdate,r=o.inputIsHiddenAfterUpdate,u=o.ariaSelection,c=o.isFocused,p=o.prevWasFocused,h=o.instancePrefix,b=e.options,y=e.value,x=e.menuIsOpen,m=e.inputValue,S=e.isMulti,F=Te(y),w={};if(s&&(y!==s.value||b!==s.options||x!==s.menuIsOpen||m!==s.inputValue)){var _=x?Mi(e,F):[],j=x?Ze(me(e,F),"".concat(h,"-option")):[],L=l?Pi(o,F):null,R=Ii(o,_),D=Ie(j,R);w={selectValue:F,focusedOption:R,focusedOptionId:D,focusableOptionsWithIds:j,focusedValue:L,clearFocusValueOnUpdate:!1}}var k=r!=null&&e!==s?{inputIsHidden:r,inputIsHiddenAfterUpdate:void 0}:{},g=u,T=c&&p;return c&&!T&&(g={value:pe(S,F,F[0]||null),options:F,action:"initial-input-focus"},T=!p),u?.action==="initial-input-focus"&&(g=null),I(I(I({},w),k),{},{prevProps:e,ariaSelection:g,prevWasFocused:T})}}]),a})(f.Component);wt.defaultProps=Oi;var Vi=f.forwardRef(function(n,t){var a=nn(n);return f.createElement(wt,V({ref:t},a))}),wi=Vi;const _i=({doctorsStatus:n,doctorOptions:t,selectedDoctor:a,onDoctorChange:i})=>d.jsxs("div",{className:"space-y-1 mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Consulting Doctor"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-10",children:d.jsx(ot,{className:"text-primary-600"})}),d.jsx(wi,{options:t,value:a,onChange:i,className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select Doctor",isDisabled:n==="loading",isLoading:n==="loading",isClearable:!0,noOptionsMessage:()=>n==="loading"?"Loading doctors...":"No doctors found",styles:{control:e=>({...e,paddingLeft:"40px",minHeight:"44px"})}})]})]}),Ni=({formData:n,handleChange:t,doctorsStatus:a,getFormattedDoctors:i,onDoctorSelect:e})=>{const o=a==="loading"?[]:i().map(c=>({value:c.id,label:`${c.name} (${c.department}) - ${c.specialization}`,data:c})),s=o.find(c=>c.data.id===n.visitData.doctor),l=[{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"bank_transfer",label:"Bank Transfer"},{value:"online",label:"Online"},{value:"other",label:"Other"}],r=Math.max(0,(n.doctorDetails.fee||0)-(n.visitData.discount||0)),u=Math.max(0,r-(n.visitData.amountPaid||0));return d.jsxs(nt,{title:"Visit Information",children:[d.jsx(_i,{doctorsStatus:a,doctorOptions:o,selectedDoctor:s,onDoctorChange:e}),d.jsxs(at,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsx(B,{name:"visitData.purpose",label:"Visit Purpose",icon:"work",value:n.visitData.purpose,onChange:t,placeholder:"Enter visit purpose",fullWidth:!0}),d.jsx(B,{name:"visitData.disease",label:"Disease/Condition",icon:"health",value:n.visitData.disease,onChange:t,placeholder:"Enter disease or condition",fullWidth:!0}),d.jsx(B,{label:"Qualification",icon:"graduation",value:n.doctorDetails.qualification,readOnly:!0}),d.jsx(B,{label:"Department",icon:"work",value:n.doctorDetails.department,readOnly:!0}),d.jsx(B,{label:"Specialization",icon:"work",value:n.doctorDetails.specialization,readOnly:!0}),d.jsx(B,{label:"Consultation Fee",icon:"dollar",value:n.doctorDetails.fee?`Rs. ${n.doctorDetails.fee}`:"",readOnly:!0}),d.jsx(B,{name:"visitData.discount",label:"Discount",icon:"discount",type:"number",value:n.visitData.discount,onChange:t,placeholder:"Enter discount",min:"0",max:n.doctorDetails.fee||0}),d.jsx(B,{label:"Total Fee",icon:"dollar",value:r?`Rs. ${r}`:"",readOnly:!0,className:"font-semibold"}),d.jsx(B,{name:"visitData.amountPaid",label:"Amount Paid",icon:"dollar",type:"number",value:n.visitData.amountPaid,onChange:t,placeholder:"Enter amount paid",min:"0",max:r}),d.jsx(B,{label:"Amount Due",icon:"dollar",value:u?`Rs. ${u}`:"",readOnly:!0,className:u>0?"text-red-600 font-semibold":"text-green-600 font-semibold"}),d.jsx(B,{name:"visitData.paymentMethod",label:"Payment Method",icon:"creditCard",type:"select",value:n.visitData.paymentMethod,onChange:t,options:l}),d.jsx(At,{name:"visitData.verbalConsentObtained",label:"Verbal Consent Obtained",checked:n.visitData.verbalConsentObtained,onChange:t})]})]})},Ri=({mode:n,isSubmitting:t,onSave:a,onSubmit:i,onPrint:e})=>{const o=et();return d.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-200 mt-8",children:[d.jsx(Fe,{variant:"secondary",onClick:()=>o(fe("/OPD/manage")),disabled:t,children:"Cancel"}),d.jsx(Zt,{children:d.jsx(Fe,{type:"button",variant:"success",onClick:a,disabled:t,icon:Jt,children:t?"Saving...":n==="create"?"Save Only":"Update Only"})})]})},Fi=({visits:n,onSelectVisit:t,onClose:a,patientName:i})=>{const e=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",o=l=>`Rs. ${l?.toLocaleString()||"0"}`,s=l=>{switch(l){case"paid":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return d.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white/30 backdrop-blur-lg z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[d.jsxs("div",{className:"bg-primary-600 text-white p-4 rounded-t-lg sticky top-0 z-10",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-xl font-bold",children:"Select Visit to Edit"}),d.jsx("button",{onClick:a,className:"text-white hover:text-gray-200 text-2xl font-thin focus:outline-none","aria-label":"Close",children:"×"})]}),d.jsxs("p",{className:"text-primary-100 mt-1",children:["Patient: ",i]}),d.jsxs("p",{className:"text-primary-100",children:["Total Visits: ",n.length]})]}),d.jsx("div",{className:"p-4",children:n.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(Re,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),d.jsx("p",{children:"No visits found"})]}):d.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.map((l,r)=>d.jsx("div",{className:"border border-gray-400 rounded-md p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>t(l._id),children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx("div",{className:"w-10 h-10 border-r-4 border-primary-700 bg-primary-100 rounded-full flex items-center justify-center mt-1",children:d.jsx(Re,{className:" text-primary-600"})}),d.jsxs("div",{children:[d.jsxs("h4",{className:"font-semibold text-gray-800",children:["Visit #",n.length-r]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[d.jsx(qt,{className:"mr-1"}),e(l.visitDate)]}),l.doctor?.user&&d.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[d.jsx(ot,{className:"mr-1"}),"Dr. ",l.doctor.user.user_Name]}),l.purpose&&d.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.purpose})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s(l.amountStatus)}`,children:l.amountStatus?.toUpperCase()||"PENDING"}),d.jsx("p",{className:"text-sm font-semibold text-gray-800 mt-1",children:o(l.totalFee)}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Paid: ",o(l.amountPaid)]})]})]})},l._id))})}),d.jsx("div",{className:"bg-gray-50 px-4 py-3 rounded-b-lg border-t border-primary-600 flex justify-end",children:d.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"})})]})})},ji=({onSearch:n,onClear:t,isSearching:a})=>{const[i,e]=f.useState(""),o=l=>{l.preventDefault(),i.trim()&&n(i)},s=()=>{e(""),t()};return d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Search Existing Patient"}),d.jsx("span",{className:"text-sm text-gray-500",children:"Search by MR Number, Contact, or CNIC"})]}),d.jsxs("form",{onSubmit:o,className:"flex gap-2",children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Kt,{className:"text-gray-400"})}),d.jsx("input",{type:"text",value:i,onChange:l=>e(l.target.value),placeholder:"Enter MR Number, phone number, or CNIC...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",disabled:a}),i&&d.jsx("button",{type:"button",onClick:s,className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:d.jsx(Qt,{className:"text-gray-400 hover:text-gray-600"})})]}),d.jsx("button",{type:"submit",disabled:a||!i.trim(),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Searching...":"Search"})]}),d.jsx("div",{className:"mt-2 text-xs text-gray-500",children:d.jsx("p",{children:"Examples: MR-2024-001, 0300-1234567, 12345-6789012-3"})})]})},Li=(n="create")=>{const t=tt(),{patientMRNo:a}=Nt(),i=et(),[e,o]=f.useState(!1),[s,l]=f.useState(!1),[r,u]=f.useState(null),[c,p]=f.useState(!1),[h,b]=f.useState(!1),[y,x]=f.useState(null),{searchResults:m,searchStatus:S}=ye(v=>v.patients),{doctors:F,status:w}=ye(v=>v.doctor),_=ye(Rt),j=["male","female","other"],L=["A+","A-","B+","B-","AB+","AB-","O+","O-"],R=["single","married","divorced","widowed"],D=["cash","card","bank_transfer","online","other"],k={patient_MRNo:"",patient_Name:"",patient_ContactNo:"",patient_Guardian:{guardian_Relation:"",guardian_Name:"",guardian_Contact:""},patient_CNIC:"",patient_Gender:"",patient_Age:"",patient_DateOfBirth:"",patient_Address:"",patient_BloodType:"",patient_MaritalStatus:"",visitData:{doctor:null,purpose:"",disease:"",discount:0,referredBy:"",amountPaid:0,paymentMethod:"cash",amountStatus:"cash",verbalConsentObtained:!1,token:"",notes:""},printOption:"",doctorDetails:{name:"",gender:"",qualification:"",fee:0,specialization:"",department:""}},[g,T]=f.useState(k);f.useEffect(()=>{t(Ft())},[t]),f.useEffect(()=>{n==="edit"&&a&&(o(!0),t(jt(a)).unwrap().then(v=>{x(v),p(!0)}).catch(v=>{console.error("Error fetching patient:",v),W.error("Failed to load patient data"),i(fe("OPD/manage"))}).finally(()=>o(!1)))},[n,a,t,i]);const z=(v,O=null)=>{if(!v)return;let P=v.visits?.[v.visits.length-1]||{};O&&(P=v.visits.find(C=>C._id===O)||P);const E=P.doctor||{},A=E.user||{},N={patient_MRNo:v.patient_MRNo||"",patient_Name:v.patient_Name||"",patient_ContactNo:v.patient_ContactNo||"",patient_Guardian:{guardian_Relation:v.patient_Guardian?.guardian_Relation||"",guardian_Name:v.patient_Guardian?.guardian_Name||"",guardian_Contact:v.patient_Guardian?.guardian_Contact||""},patient_CNIC:v.patient_CNIC||"",patient_Gender:v.patient_Gender||"",patient_Age:v.patient_Age||"",patient_DateOfBirth:v.patient_DateOfBirth?new Date(v.patient_DateOfBirth).toISOString().split("T")[0]:"",patient_Address:v.patient_Address||"",patient_BloodType:v.patient_BloodType||"",patient_MaritalStatus:v.patient_MaritalStatus||"",visitData:{visitId:P._id||"",doctor:P.doctor?._id||"",purpose:P.purpose||"",disease:P.disease||"",discount:P.discount||0,referredBy:P.referredBy||"",amountPaid:P.amountPaid||0,paymentMethod:P.paymentMethod||"cash",amountStatus:P.amountStatus||"",verbalConsentObtained:P.verbalConsentObtained||!1,token:P.token||"",notes:P.notes||""},doctorDetails:{name:A.user_Name||"N/A",gender:E.doctor_Gender||"",qualification:Array.isArray(E.doctor_Qualifications)?E.doctor_Qualifications.join(", "):E.doctor_Qualifications||"",fee:E.doctor_Fee||0,specialization:E.doctor_Specialization||"",department:E.doctor_Department||""},printOption:""};T(N),b(!0)},Q=()=>{T(k)},q=async v=>{v&&v.preventDefault(),l(!0);const O=[];if(g.patient_Gender&&!j.includes(g.patient_Gender)&&O.push(`Gender must be one of: ${j.join(", ")}`),g.patient_BloodType&&!L.includes(g.patient_BloodType)&&O.push(`Blood type must be one of: ${L.join(", ")}`),g.patient_MaritalStatus&&!R.includes(g.patient_MaritalStatus)&&O.push(`Marital status must be one of: ${R.join(", ")}`),g.visitData.paymentMethod&&!D.includes(g.visitData.paymentMethod)&&O.push(`Payment method must be one of: ${D.join(", ")}`),O.length>0)return O.forEach(E=>W.error(E)),l(!1),null;const P={patient_MRNo:g.patient_MRNo,patient_Name:g.patient_Name,patient_ContactNo:g.patient_ContactNo,patient_Guardian:g.patient_Guardian,patient_CNIC:g.patient_CNIC,...g.patient_Gender&&{patient_Gender:g.patient_Gender},patient_Age:parseInt(g.patient_Age)||0,patient_DateOfBirth:g.patient_DateOfBirth,patient_Address:g.patient_Address,...g.patient_BloodType&&{patient_BloodType:g.patient_BloodType},...g.patient_MaritalStatus&&{patient_MaritalStatus:g.patient_MaritalStatus},visitData:{visitId:g.visitData.visitId,doctor:g.visitData.doctor,purpose:g.visitData.purpose||"Consultation",disease:g.visitData.disease||"",discount:parseFloat(g.visitData.discount)||0,referredBy:g.visitData.referredBy||"",amountPaid:parseFloat(g.visitData.amountPaid)||0,paymentMethod:g.visitData.paymentMethod||"cash",amountStatus:g.visitData.amountStatus||"cash",verbalConsentObtained:!!g.visitData.verbalConsentObtained,token:g.visitData.token||"",notes:g.visitData.notes||""}};Object.keys(P).forEach(E=>{P[E]===""&&delete P[E]});try{let E;if(n==="create"){if(E=await t(Et(P)).unwrap(),W.success("Patient created successfully!"),E?.information?.patient){const A=E.information.patient,N=A.visits?.[A.visits.length-1]||{};T(C=>({...C,patient_MRNo:A.patient_MRNo||C.patient_MRNo,patient_Name:A.patient_Name||C.patient_Name,patient_ContactNo:A.patient_ContactNo||C.patient_ContactNo,patient_Guardian:A.patient_Guardian||C.patient_Guardian,patient_CNIC:A.patient_CNIC||C.patient_CNIC,patient_Gender:A.patient_Gender||C.patient_Gender,patient_Age:A.patient_Age||C.patient_Age,patient_DateOfBirth:A.patient_DateOfBirth||C.patient_DateOfBirth,patient_Address:A.patient_Address||C.patient_Address,patient_BloodType:A.patient_BloodType||C.patient_BloodType,patient_MaritalStatus:A.patient_MaritalStatus||C.patient_MaritalStatus,visitData:{...C.visitData,visitId:N._id||C.visitData.visitId,token:N.token||C.visitData.token,purpose:N.purpose||C.visitData.purpose,disease:N.disease||C.visitData.disease,discount:N.discount||C.visitData.discount,referredBy:N.referredBy||C.visitData.referredBy,amountPaid:N.amountPaid||C.visitData.amountPaid,paymentMethod:N.paymentMethod||C.visitData.paymentMethod,amountStatus:N.amountStatus||C.visitData.amountStatus,verbalConsentObtained:!!(N.verbalConsentObtained??C.visitData.verbalConsentObtained),notes:N.notes||C.visitData.notes},doctorDetails:A.doctorDetails||C.doctorDetails}))}return i(fe("/OPD/manage")),E}else{if(!g.patient_MRNo)throw new Error("MR Number is required");if(E=await t(Tt({mrNo:g.patient_MRNo,updatedData:P})).unwrap(),i(fe("/OPD/manage")),W.success("Patient updated successfully!"),E?.information?.patient){const A=E.information.patient,N=A.visits?.find(C=>C._id===g.visitData.visitId)||A.visits?.[A.visits.length-1]||{};T(C=>({...C,visitData:{...C.visitData,token:N.token||C.visitData.token}}))}return E}}catch(E){throw console.error("Submission error:",E),W.error(E.payload?.message||(n==="create"?"Patient creation failed!":"Patient update failed!"),{autoClose:5e3,closeOnClick:!0,pauseOnHover:!0}),E}finally{l(!1)}},G=async v=>{if(v.preventDefault(),g.patient_DateOfBirth&&new Date(g.patient_DateOfBirth)>new Date){W.error("Date of birth cannot be in the future");return}if(!g.visitData.doctor){W.error("Please select a doctor");return}if(!g.printOption){W.error("Please select a print option");return}try{await q()}catch(O){console.error("Submission failed:",O)}},H=v=>/^(\d+y-)?(\d+m-)?(\d+d)?$/.test(v)||v==="",Z=v=>{const{name:O,value:P,type:E,checked:A}=v.target;if(O.startsWith("patient_Guardian.")){const N=O.split(".")[1];T(C=>({...C,patient_Guardian:{...C.patient_Guardian,[N]:P}}));return}if(O.startsWith("visitData.")){const N=O.split(".")[1];if(T(C=>({...C,visitData:{...C.visitData,[N]:E==="checkbox"?A:P}})),N==="discount"){const C=parseFloat(P)||0;g.doctorDetails.fee,T(ee=>({...ee,visitData:{...ee.visitData,discount:C}}))}return}if(O==="patient_DateOfBirth"){const N=Y(P);T(C=>({...C,patient_DateOfBirth:P,patient_Age:N}));return}if(O==="patient_Age"){H(P)&&T(N=>({...N,patient_Age:P}));return}if(O==="patient_CNIC"){const N=P.replace(/\D/g,"");let C=N;N.length>5&&(C=`${N.substring(0,5)}-${N.substring(5)}`),N.length>12&&(C=`${C.substring(0,13)}-${C.substring(13)}`),C=C.substring(0,15),T(ee=>({...ee,patient_CNIC:C}));return}if(O==="patient_Guardian.guardian_Contact"||O==="patient_ContactNo"){const N=O==="patient_ContactNo"?"patient_ContactNo":"patient_Guardian.guardian_Contact",C=P.replace(/\D/g,"");let ee=C;C.length>4&&(ee=`${C.substring(0,4)}-${C.substring(4,11)}`),ee=ee.substring(0,12),T(N==="patient_ContactNo"?re=>({...re,patient_ContactNo:ee}):re=>({...re,patient_Guardian:{...re.patient_Guardian,guardian_Contact:ee}}));return}T(N=>({...N,[O]:P}))},Y=v=>{if(!v)return"";const O=new Date(v),P=new Date;if(O>P)return"Invalid date (future)";let E=P.getFullYear()-O.getFullYear(),A=P.getMonth()-O.getMonth(),N=P.getDate()-O.getDate();if(N<0){A--;const C=new Date(P.getFullYear(),P.getMonth(),0).getDate();N+=C}return A<0&&(E--,A+=12),`${E}y-${A}m-${N}d`};return{isLoading:e,isSubmitting:s,formData:g,setFormData:T,handleChange:Z,handleSave:q,handleSubmit:G,handleDoctorSelect:v=>{if(v&&v.data&&v.data.id){const O=v.data;T(P=>({...P,visitData:{...P.visitData,doctor:O.id},doctorDetails:{name:O.name,gender:O.gender,qualification:O.qualification,fee:O.fee,specialization:O.specialization,department:O.department}}))}else T(O=>({...O,visitData:{...O.visitData,doctor:null},doctorDetails:{name:"",gender:"",qualification:"",fee:0,specialization:"",department:""}}))},resetForm:Q,doctorsStatus:w,getFormattedDoctors:()=>Array.isArray(F)?F.map(v=>({id:v._id,name:v.user?.user_Name||"",gender:v.doctor_Gender||"",qualification:Array.isArray(v.doctor_Qualifications)?v.doctor_Qualifications.join(", "):v.doctor_Qualifications||"",fee:v.doctor_Fee||0,specialization:v.doctor_Specialization||"",department:v.doctor_Department||""})):[],mode:n,patientMRNo:a,validGenders:j,validBloodTypes:L,validMaritalStatuses:R,populateForm:z,handleSearch:async v=>{if(!v.trim())return W.error("Please enter a search term"),[];try{return await t(Lt(v)).unwrap()||[]}catch(O){return console.error("Search error:",O),W.error(O.payload||"Search failed"),[]}},selectedVisitId:r,showVisitSelector:c,handleVisitSelect:v=>{y?(z(y,v),u(v),p(!1),W.success("Visit selected for editing")):W.error("Patient data not available")},setShowVisitSelector:p,isFormDataReady:h,localSelectedPatient:y,showVisitSelection:()=>{p(!0)},selectedPatient:_,handleSaveAndPrint:async v=>{if(v&&v.preventDefault(),!g.printOption){W.error("Please select a print option");return}l(!0);try{const O=await q(v);je(g,g.printOption)}catch(O){console.error("Save and print failed:",O),W.error("Save failed - not printing")}finally{l(!1)}},handlePrint:()=>{if(!g.printOption){W.error("Please select a print option");return}try{je(g,g.printOption)}catch(v){W.error(v.message)}}}},tr=({mode:n="create"})=>{const t=tt(),{isLoading:a,isSubmitting:i,formData:e,handleChange:o,handleSave:s,handleDoctorSelect:l,doctorsStatus:r,getFormattedDoctors:u,mode:c,validGenders:p,validBloodTypes:h,validMaritalStatuses:b,populateForm:y,handleSearch:x,selectedVisitId:m,showVisitSelector:S,handleVisitSelect:F,setShowVisitSelector:w,localSelectedPatient:_,handlePrint:j,handleSaveAndPrint:L,selectedPatient:R}=Li(n),[D,k]=f.useState(!1),[g,T]=f.useState([]),[z,Q]=f.useState(!1),q=c==="create"?"New OPD Registration":`Edit Patient - ${e.patient_MRNo||"Loading..."}`,G=c==="create"?"Please fill in the patsetSelectedPatientient details below":"Edit the patient details below",H=async $=>{Q(!0);try{const K=await x($);T(K),k(!0),(!K||K.length===0)&&W.info("No patients found with that search term")}catch(K){console.error("Search error:",K),W.error("Search failed")}finally{Q(!1)}},Z=$=>{t(kt($)),c==="create"&&y($),k(!1),T([]),c==="edit"&&w(!0),W.success(`Patient ${$.patient_Name} selected`)},Y=()=>{k(!1),T([])};return a?d.jsx("div",{className:"flex justify-center items-center h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-primary-500"})}):d.jsx("div",{className:"",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[d.jsx("div",{className:"bg-primary-600 rounded-md text-white px-6 py-8 shadow-md",children:d.jsx("div",{className:"max-w-9xl mx-auto",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"h-12 w-1 bg-primary-300 mr-4 rounded-full"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold",children:q}),d.jsx("p",{className:"text-primary-100 mt-1",children:G})]})]})})}),c==="create"&&d.jsx("div",{className:"px-6 pt-6",children:d.jsx(ji,{onSearch:H,onClear:Y,isSearching:z})}),D&&d.jsx("div",{className:"px-6 pb-6",children:d.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[d.jsx("div",{className:"p-4 border-b border-gray-200",children:d.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Search Results (",g.length,")"]})}),d.jsx("div",{className:"max-h-60 overflow-y-auto",children:g.map($=>d.jsx("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Z($),children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-gray-900",children:$.patient_Name}),d.jsxs("p",{className:"text-sm text-gray-600",children:["MR: ",$.patient_MRNo," | Contact: ",$.patient_ContactNo," |",$.patient_CNIC&&` CNIC: ${$.patient_CNIC}`]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"text-sm text-gray-500",children:[$.totalVisits||0," previous visits"]}),d.jsxs("p",{className:"text-xs text-gray-400",children:["Last visit: ",$.lastVisit?new Date($.lastVisit).toLocaleDateString():"Never"]})]})]})},$._id))}),g.length>0&&d.jsx("div",{className:"p-3 bg-gray-50 border-t border-gray-200",children:d.jsx("button",{onClick:Y,className:"text-sm text-gray-600 hover:text-gray-800",children:"Close results"})})]})}),S&&(R||_)&&d.jsx(Fi,{visits:(R||_).visits||[],onSelectVisit:F,onClose:()=>w(!1),patientName:(R||_).patient_Name}),c==="edit"&&!m&&!S&&d.jsx("div",{className:"px-6 pt-6",children:d.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"shrink-0",children:d.jsx("svg",{className:"h-5 w-5 text-primary-400",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("h3",{className:"text-sm font-medium text-primary-800",children:"Select a visit to edit"}),d.jsx("div",{className:"mt-2 text-sm text-primary-700",children:d.jsx("p",{children:"Please select which visit you want to modify from the patient's history."})}),d.jsx("div",{className:"mt-4",children:d.jsx("button",{type:"button",onClick:()=>w(!0),className:"bg-primary-100 text-primary-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-primary-500",children:"Choose Visit"})})]})]})})}),(c==="create"||m)&&d.jsxs("form",{onSubmit:L,className:"p-6",children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsx(en,{formData:e,handleChange:o,mode:c,validGenders:p,validBloodTypes:h,validMaritalStatuses:b}),d.jsx(Ni,{formData:e,handleChange:o,doctorsStatus:r,getFormattedDoctors:u,onDoctorSelect:l})]}),d.jsx(Ri,{mode:c,isSubmitting:i,onSave:s,onSubmit:L,onPrint:j})]})]})})};export{tr as default};
