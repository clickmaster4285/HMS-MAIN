import{T as u,f as g,u as x,bW as j,bX as f,c9 as y,r as N,b_ as b,j as e,d as v}from"./index-D_CM1r6M.js";import{L as w,E as m}from"./ErrorState-BYtf-fu6.js";const p=t=>t==null?"N/A":typeof t=="number"?t%1===0?t.toString():t.toFixed(2):t.toString(),k=t=>t?t instanceof Map?Object.fromEntries(t):t:{},T=t=>{if(!t)return"N/A";const s=k(t);return Object.entries(s).map(([a,r])=>{const n=`${p(r.min)} - ${p(r.max)}`;return`${a}: ${n} ${r.unit||""}`.trim()}).join(" | ")},I=t=>{if(!t)return{display:"Not specified",className:"text-slate-500"};const s=t.toLowerCase();if(s.match(/^(\d{4}-\d{2}-\d{2})/)){const r=new Date(t);if(!isNaN(r.getTime())){const n=new Date;n.setHours(0,0,0,0);const l=r.getTime()-n.getTime(),i=Math.round(l/(1e3*60*60*24));let c="";return i===0?c="(today)":i>0?c=`(in ${i} day${i!==1?"s":""})`:c=`(${Math.abs(i)} day${Math.abs(i)!==1?"s":""} ago)`,{display:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:r.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}),e.jsx("span",{className:"text-xs text-teal-600 font-medium bg-teal-50 px-2 py-1 rounded-full",children:c})]}),className:"text-slate-800"}}}if(s.includes("hour")){const r=s.match(/(\d+)/);if(r){const n=parseInt(r[1],10);if(!isNaN(n)){const l=n/24,i=Number.isInteger(l)?l:l.toFixed(2);return{display:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:t}),e.jsxs("span",{className:"text-xs text-teal-600 font-medium bg-teal-50 px-2 py-1 rounded-full",children:["(",i," day",i!=="1"?"s":"",")"]})]}),className:"text-slate-800"}}}}return{display:t,className:"text-slate-800"}},D=t=>{const s=t.inputType||"text";return{text:"Text Input",number:"Number Input",dropdown:"Dropdown"}[s]||s},L=()=>{const{id:t}=u(),s=g(),a=x(j),r=x(f),n=x(y);return N.useEffect(()=>{t&&s(b(t))},[t,s]),{selectedTest:a,getByIdLoading:r,getByIdError:n,id:t}},B=({test:t})=>t?e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200/50 overflow-hidden",children:e.jsx("div",{className:"bg-linear-to-r from-primary-600 to-teal-600 p-6 text-white",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:t.testName}),e.jsxs("div",{className:"flex items-center space-x-4 text-primary-100",children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white/20",children:["Code: ",t.testCode]}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white/20",children:["Rs ",t.testPrice]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${t.requiresFasting?"bg-orange-500/20 text-orange-100":"bg-green-500/20 text-green-100"}`,children:t.requiresFasting?"Fasting Required":"No Fasting"})]})]})]})})}):null,h=({title:t,icon:s,children:a,className:r=""})=>e.jsxs("div",{className:`bg-white rounded-2xl shadow-lg border border-slate-200/50 p-6 ${r}`,children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center",children:[s,t]}),e.jsx("div",{className:"space-y-4",children:a})]}),o=({label:t,value:s,children:a})=>e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:t}),e.jsx("div",{className:"text-slate-800 mt-1",children:a||s||"Not specified"})]}),R=({fields:t,testName:s,testDept:a})=>!t||t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"No Test Fields"}),e.jsx("p",{className:"text-slate-500",children:"No fields have been defined for this test yet."})]}):e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200/50 overflow-hidden",children:[e.jsxs("div",{className:"bg-linear-to-r from-primary-600 to-teal-600 p-6 text-white",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Test Fields (",t.length,")"]}),e.jsx("p",{className:"text-primary-100 mt-1",children:"Parameters and reference ranges for this test"})]}),e.jsxs("div",{className:"flex items-center p-4 bg-emerald-50 border-b",children:[e.jsx("h1",{className:"font-bold text-gray-900 px-4 py-2",children:s}),e.jsx("h1",{className:"font-bold text-gray-900 px-4 py-2",children:a||"N/A"})]}),e.jsx("div",{className:"p-6 overflow-x-auto",children:e.jsx("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Field Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Input Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference Range"}),t.some(r=>r.options)&&e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Options"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((r,n)=>e.jsx(M,{field:r,index:n},n))})]})})})]}),M=({field:t,index:s})=>e.jsxs("tr",{className:s%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.inputType==="dropdown"?"bg-purple-100 text-purple-800":t.inputType==="number"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:D(t)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.unit||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:T(t.normalRange)}),t.options&&e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:t.options.length>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.options.slice(0,3).map((a,r)=>e.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:a},r)),t.options.length>3&&e.jsxs("span",{className:"inline-block bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded",children:["+",t.options.length-3," more"]})]}):"No options"})]}),H=()=>{const t=v(),{selectedTest:s,getByIdLoading:a,getByIdError:r}=L(),n=e.jsx("svg",{className:"w-5 h-5 text-primary-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),l=e.jsx("svg",{className:"w-5 h-5 text-teal-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});if(a)return e.jsx(d,{navigate:t,children:e.jsx(w,{})});if(r)return e.jsx(d,{navigate:t,children:e.jsx(m,{error:r})});if(!s)return e.jsx(d,{navigate:t,children:e.jsx(m,{error:"Test not found"})});const i=I(s.reportDeliveryTime);return e.jsx(d,{navigate:t,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(B,{test:s}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsx($,{test:s,icon:n}),e.jsx(E,{test:s,icon:l,reportTimeInfo:i})]}),e.jsx(R,{fields:s.fields,testName:s.testName,testDept:s.testDept})]})})},d=({navigate:t,children:s})=>e.jsxs("div",{className:"min-h-screen bg-linear-to-br from-slate-50 via-primary-50 to-teal-50",children:[e.jsx(F,{navigate:t}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:s})]}),F=({navigate:t})=>e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200/50 sticky top-0 z-20",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(C,{navigate:t}),e.jsx("div",{className:"h-6 w-px bg-slate-300"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold bg-linear-to-r from-primary-600 to-teal-600 bg-clip-text text-transparent",children:"Test Details"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"View comprehensive test information"})]})]})})})}),C=({navigate:t})=>e.jsxs("button",{onClick:()=>t(-1),className:"flex items-center space-x-2 px-4 py-2 bg-white hover:bg-slate-50 text-slate-700 rounded-xl shadow-lg border border-slate-200 transition-all duration-200 hover:shadow-xl",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{className:"font-medium",children:"Back to Tests"})]}),$=({test:t,icon:s})=>e.jsxs(h,{title:"Basic Information",icon:s,children:[e.jsx(o,{label:"Description",value:t.description}),e.jsx(o,{label:"Instructions",value:t.instructions}),e.jsx(o,{label:"Department",value:t.testDept}),e.jsx(o,{label:"Created Date",children:t.createdAt?new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not available"})]}),E=({test:t,icon:s,reportTimeInfo:a})=>e.jsxs(h,{title:"Report Information",icon:s,children:[e.jsx(o,{label:"Report Delivery Time",children:e.jsx("div",{className:a.className,children:a.display})}),e.jsx(o,{label:"Fasting Requirement",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${t.requiresFasting?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:t.requiresFasting?"Yes - Fasting Required":"No - No Fasting Required"})})]});export{H as default};
