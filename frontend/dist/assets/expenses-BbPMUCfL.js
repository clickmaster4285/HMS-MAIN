import{r as i,f as A,j as e,aU as oe,aV as ne,u as I,aW as M,g as de,aX as ce}from"./index-D_CM1r6M.js";import{X as R}from"./x-C7u0T0_x.js";import{c as y}from"./createLucideIcon-lGOnjJ_s.js";import{T as ie}from"./triangle-alert-BHqHjwif.js";import{C as xe}from"./circle-alert--nbTxiuF.js";import{C as he}from"./circle-check-big-ClJgYXp0.js";import{U as B}from"./user-DHzvawmA.js";import{D as H}from"./dollar-sign-CCFmVWDc.js";import{P as X}from"./plus-DM60E_GY.js";import{S as me}from"./stethoscope-Ch39eZXi.js";const pe=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],J=y("building",pe);const ue=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fe=y("eye",ue);const ge=[["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M14 9h-4",key:"1w2s2s"}],["path",{d:"M18 11h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"1tthqt"}],["path",{d:"M18 21V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16",key:"dw4p4i"}]],je=y("hospital",ge);const be=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Ne=y("loader",be);const ye=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],ve=y("printer",ye);const we=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ee=y("save",we);const ke=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],De=y("trash-2",ke),Te=({expense:t,onClose:x,doctors:h,onUpdateSuccess:p})=>{const[l,m]=i.useState({doctor:"",doctorWelfare:"",otExpenses:"",otherExpenses:"",description:""}),[o,v]=i.useState({}),[w,E]=i.useState(!1),F=A();i.useEffect(()=>{t&&m({doctor:t.doctor||"",doctorWelfare:t.doctorWelfare||"",otExpenses:t.otExpenses||"",otherExpenses:t.otherExpenses||"",description:t.description||""})},[t]);const P=()=>{if(!h||!Array.isArray(h))return[];const a=new Set;return h.forEach(d=>{typeof d=="object"&&d!==null?d.doctor&&a.add(d.doctor):typeof d=="string"&&a.add(d)}),Array.from(a).sort()},C=()=>{const a={},d=parseFloat(l.doctorWelfare),u=parseFloat(l.otExpenses),k=parseFloat(l.otherExpenses);return(isNaN(d)||d<0)&&(a.doctorWelfare="Please enter a valid welfare amount"),(isNaN(u)||u<0)&&(a.otExpenses="Please enter a valid OT expenses amount"),(isNaN(k)||k<0)&&(a.otherExpenses="Please enter a valid other expenses amount"),v(a),Object.keys(a).length===0},f=(a,d)=>{m(u=>({...u,[a]:d})),o[a]&&v(u=>({...u,[a]:""}))},O=async a=>{if(a.preventDefault(),!!C()){E(!0);try{const d={doctor:l.doctor||"Unassigned",doctorWelfare:parseFloat(l.doctorWelfare)||0,otExpenses:parseFloat(l.otExpenses)||0,otherExpenses:parseFloat(l.otherExpenses)||0,description:l.description};await F(oe({id:t._id,expenseData:d})).unwrap(),p&&p(),x()}catch(d){console.error("Failed to update expense:",d)}finally{E(!1)}}};return t?(P(),e.jsx("div",{className:"fixed inset-0 bg-black/10 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Edit Expense"}),e.jsx("button",{onClick:x,className:"text-gray-500 hover:text-gray-700",children:e.jsx(R,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor"}),e.jsxs("select",{value:l.doctor,onChange:a=>f("doctor",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Select Doctor"}),h.map(a=>e.jsx("option",{value:a?.user?.user_Name,children:a?.user?.user_Name},a._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:l.description,onChange:a=>f("description",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor Welfare"}),e.jsx("input",{type:"number",step:"0.01",value:l.doctorWelfare,onChange:a=>f("doctorWelfare",a.target.value),className:`w-full p-2 border rounded-md ${o.doctorWelfare?"border-red-500":"border-gray-300"}`}),o.doctorWelfare&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.doctorWelfare})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"OT Expenses"}),e.jsx("input",{type:"number",step:"0.01",value:l.otExpenses,onChange:a=>f("otExpenses",a.target.value),className:`w-full p-2 border rounded-md ${o.otExpenses?"border-red-500":"border-gray-300"}`}),o.otExpenses&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.otExpenses})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other Expenses"}),e.jsx("input",{type:"number",step:"0.01",value:l.otherExpenses,onChange:a=>f("otherExpenses",a.target.value),className:`w-full p-2 border rounded-md ${o.otherExpenses?"border-red-500":"border-gray-300"}`}),o.otherExpenses&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.otherExpenses})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ee,{className:"h-4 w-4 mr-1"}),w?"Saving...":"Save Changes"]})]})]})]})})):null},Se=({expense:t,onClose:x})=>{const h=A(),p=()=>{h(ne(t._id||t.id)),x()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/10 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Delete Expense"}),e.jsx("button",{onClick:x,className:"text-gray-500 hover:text-gray-700",children:e.jsx(R,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex items-center mb-4 p-3 bg-red-50 rounded-md",children:[e.jsx(ie,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("p",{className:"text-red-700",children:"Are you sure you want to delete this expense?"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md mb-4",children:[e.jsx("p",{className:"font-medium",children:t.doctor||"Unassigned"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description||"No description"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[e.jsxs("p",{children:["Welfare: PKR ",t.doctorWelfare?.toFixed(2)]}),e.jsxs("p",{children:["OT: PKR ",t.otExpenses?.toFixed(2)]}),e.jsxs("p",{children:["Other: PKR ",t.otherExpenses?.toFixed(2)]})]}),e.jsxs("p",{className:"font-semibold mt-2",children:["Total: PKR ",(t.doctorWelfare+t.otExpenses+t.otherExpenses).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100",children:"Cancel"}),e.jsxs("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center",children:[e.jsx(De,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})}):null},Fe=({data:t,onClose:x})=>{const h=i.useRef();if(!t)return null;const p=()=>{const l=h.current.innerHTML,m=document.body.innerHTML;document.body.innerHTML=l,window.print(),document.body.innerHTML=m,window.location.reload()};return e.jsx("div",{className:"fixed inset-0 bg-black/10 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Export Expense Report"}),e.jsx("button",{onClick:x,className:"text-gray-500 hover:text-gray-700",children:e.jsx(R,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"font-medium",children:["Doctor: ",t.doctor]}),e.jsxs("p",{children:["Total Expenses: PKR ",t.summary.total.toFixed(2)]}),e.jsxs("p",{children:["Number of Entries: ",t.summary.count]})]}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100",children:"Cancel"}),e.jsxs("button",{onClick:p,className:"px-4 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700 flex items-center",children:[e.jsx(ve,{className:"h-4 w-4 mr-1"}),"Print Report"]})]}),e.jsxs("div",{ref:h,style:{display:"none"},children:[e.jsx("h1",{children:"Hospital Expenses Summary"}),e.jsxs("h2",{children:["Doctor: ",t.doctor]}),e.jsxs("table",{border:"1",cellPadding:"5",style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Welfare"}),e.jsx("th",{children:"OT"}),e.jsx("th",{children:"Other"}),e.jsx("th",{children:"Total"})]})}),e.jsx("tbody",{children:t.summary.expenses.map((l,m)=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(l.createdAt||l.date).toLocaleDateString()}),e.jsx("td",{children:l.description||"N/A"}),e.jsxs("td",{children:["PKR ",l.doctorWelfare.toFixed(2)]}),e.jsxs("td",{children:["PKR ",l.otExpenses.toFixed(2)]}),e.jsxs("td",{children:["PKR ",l.otherExpenses.toFixed(2)]}),e.jsxs("td",{children:["PKR ",(l.doctorWelfare+l.otExpenses+l.otherExpenses).toFixed(2)]})]},m))})]}),e.jsx("h3",{children:"Summary"}),e.jsxs("p",{children:["Doctor Welfare: PKR ",t.summary.welfare.toFixed(2)]}),e.jsxs("p",{children:["OT Expenses: PKR ",t.summary.ot.toFixed(2)]}),e.jsxs("p",{children:["Other Expenses: PKR ",t.summary.other.toFixed(2)]}),e.jsx("p",{children:e.jsxs("strong",{children:["Total: PKR ",t.summary.total.toFixed(2)]})}),e.jsxs("p",{children:["Number of Entries: ",t.summary.count]}),e.jsxs("p",{children:["Generated on: ",new Date().toLocaleDateString()]})]})]})})};function $e(){const[t,x]=i.useState({expenseType:"doctor",doctor:"",doctorWelfare:"",otExpenses:"",otherExpenses:"",description:"",date:new Date().toISOString().split("T")[0]}),[h,p]=i.useState(!1),[l,m]=i.useState(!1),[o,v]=i.useState({}),[w,E]=i.useState(null),[F,P]=i.useState(null),[C,f]=i.useState(null),[O,a]=i.useState(!1),[d,u]=i.useState([]),[k,L]=i.useState(!1),j=A(),{expenses:W,isLoading:Pe,isError:K,isSuccess:Q,message:D}=I(s=>s.expenses),{doctors:$=[]}=I(s=>s.doctor);i.useEffect(()=>{j(M()),j(de())},[j]),i.useEffect(()=>{if(W&&Array.isArray(W)){const s=W.filter(r=>r&&typeof r=="object").map(r=>({...r,expenseType:r.expenseType||"doctor"}));u(s)}},[W]),i.useEffect(()=>{K&&console.error("Error:",D)},[K,D]);const z=()=>d.filter(s=>!s||typeof s!="object"?!1:s.expenseType==="doctor"),U=()=>d.filter(s=>!s||typeof s!="object"?!1:s.expenseType==="hospital"),Y=()=>{const s={};t.expenseType||(s.expenseType="Please select expense type"),t.expenseType==="doctor"&&!t.doctor&&(s.doctor="Please select a doctor for doctor expenses");const r=parseFloat(t.doctorWelfare),n=parseFloat(t.otExpenses),c=parseFloat(t.otherExpenses);return(isNaN(r)||r<0)&&(s.doctorWelfare="Please enter a valid welfare amount"),(isNaN(n)||n<0)&&(s.otExpenses="Please enter a valid OT expenses amount"),(isNaN(c)||c<0)&&(s.otherExpenses="Please enter a valid other expenses amount"),v(s),Object.keys(s).length===0},b=(s,r)=>{x(n=>({...n,[s]:r})),s==="expenseType"&&r==="hospital"&&x(n=>({...n,doctor:""})),o[s]&&v(n=>({...n,[s]:""}))},Z=async s=>{if(s.preventDefault(),!Y())return;const r={expenseType:t.expenseType,doctor:t.expenseType==="doctor"?t.doctor:null,doctorWelfare:parseFloat(t.doctorWelfare)||0,otExpenses:parseFloat(t.otExpenses)||0,otherExpenses:parseFloat(t.otherExpenses)||0,description:t.description,date:t.date};L(!0);try{const n=await j(ce(r)).unwrap();u(c=>[...c,n]),x({expenseType:"doctor",doctor:"",doctorWelfare:"",otExpenses:"",otherExpenses:"",description:"",date:new Date().toISOString().split("T")[0]}),m(!1),j(M())}catch(n){console.error("Create failed:",n)}finally{L(!1)}},ee=s=>{E(s)},se=s=>{P(s)},te=(s,r)=>{f({doctor:s,summary:r})},re=()=>{h?p(!1):(a(!0),setTimeout(()=>{a(!1),p(!0)},300))},ae=()=>{const s={};return z().forEach(n=>{const c=n.doctor||"Unassigned";s[c]||(s[c]={total:0,welfare:0,ot:0,other:0,count:0,expenses:[]});const N=Number(n.doctorWelfare)||0,S=Number(n.otExpenses)||0,q=Number(n.otherExpenses)||0;s[c].welfare+=N,s[c].ot+=S,s[c].other+=q,s[c].total+=N+S+q,s[c].count+=1,s[c].expenses.push(n)}),s},le=()=>U().reduce((r,n)=>{const c=Number(n.doctorWelfare)||0,N=Number(n.otExpenses)||0,S=Number(n.otherExpenses)||0;return{welfare:r.welfare+c,ot:r.ot+N,other:r.other+S,total:r.total+c+N+S,count:r.count+1}},{welfare:0,ot:0,other:0,total:0,count:0}),V=()=>d.reduce((s,r)=>{if(!r||typeof r!="object")return s;const n=Number(r.doctorWelfare)||0,c=Number(r.otExpenses)||0,N=Number(r.otherExpenses)||0;return s+n+c+N},0),G=z(),_=U(),T=ae(),g=le();return e.jsxs("div",{className:"w-full space-y-6",children:[K&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-100 text-red-700 rounded-md",children:[e.jsx(xe,{className:"h-5 w-5"}),e.jsx("p",{children:D||"An error occurred while processing your request"})]}),Q&&D&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-green-100 text-green-700 rounded-md",children:[e.jsx(he,{className:"h-5 w-5"}),e.jsx("p",{children:D})]}),e.jsxs("div",{className:"shadow-lg rounded-lg overflow-hidden bg-white",children:[e.jsx("div",{className:"bg-teal-600 px-6 py-8 text-white",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-1 bg-white h-16 rounded-full"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Hospital Expenses Management"}),e.jsx("p",{className:"text-teal-100",children:"Manage both doctor and hospital expenses"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-1 bg-teal-600 h-6 rounded-full"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Expense Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"h-8 w-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600",children:"Doctor Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:G.length})]})]})}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-8 w-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:"Hospital Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:_.length})]})]})}),e.jsx("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"h-8 w-8 text-teal-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-teal-600",children:"Grand Total"}),e.jsxs("p",{className:"text-2xl font-bold text-teal-800",children:["PKR ",V().toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsxs("button",{type:"button",onClick:re,className:"flex items-center border border-teal-600 text-teal-600 hover:bg-teal-50 px-4 h-10 rounded-md",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),h?"Hide Summary":"View Summary"]}),e.jsxs("button",{type:"button",onClick:()=>m(!0),className:"flex items-center bg-teal-600 hover:bg-teal-700 text-white px-6 h-10 rounded-md",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Add Expense"]})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/10 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add New Expense"}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(R,{className:"h-5 w-5"})})]}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",onSubmit:Z,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Expense Type"}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-teal-600 pointer-events-none"}),e.jsxs("select",{value:t.expenseType,onChange:s=>b("expenseType",s.target.value),className:"pl-10 w-full h-10 rounded-md border border-gray-300 bg-white px-3 focus:outline-none focus:ring-2 focus:ring-teal-600",children:[e.jsx("option",{value:"doctor",children:"Doctor Expense"}),e.jsx("option",{value:"hospital",children:"Hospital Expense"})]})]}),o.expenseType&&e.jsx("p",{className:"text-red-500 text-sm",children:o.expenseType})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date"}),e.jsx("input",{type:"date",value:t.date,onChange:s=>b("date",s.target.value),className:"w-full h-10 rounded-md border border-gray-300 px-3 focus:outline-none focus:ring-2 focus:ring-teal-600"})]}),t.expenseType==="doctor"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Doctor"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-teal-600 pointer-events-none"}),e.jsxs("select",{value:t.doctor,onChange:s=>b("doctor",s.target.value),className:"pl-10 w-full h-10 rounded-md border border-gray-300 bg-white px-3 focus:outline-none focus:ring-2 focus:ring-teal-600",children:[e.jsx("option",{value:"",children:"Select Doctor"}),$.map(s=>e.jsxs("option",{value:s?.user?.user_Name,children:[s?.user?.user_Name,"-(",s?.doctor_Department,")"]},s._id))]})]}),o.doctor&&e.jsx("p",{className:"text-red-500 text-sm",children:o.doctor})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-teal-600 pointer-events-none"}),e.jsx("input",{placeholder:"Enter expense description",value:t.description,onChange:s=>b("description",s.target.value),className:"pl-10 w-full h-10 rounded-md border border-gray-300 px-3 focus:outline-none focus:ring-2 focus:ring-teal-600"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Doctor Welfare"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-teal-600 pointer-events-none"}),e.jsx("input",{type:"number",step:"0.01",min:"0",placeholder:"0.00",value:t.doctorWelfare,onChange:s=>b("doctorWelfare",s.target.value),className:`pl-10 w-full h-10 rounded-md border px-3 focus:outline-none focus:ring-2 focus:ring-teal-600 ${o.doctorWelfare?"border-red-500":"border-gray-300"}`})]}),o.doctorWelfare&&e.jsx("p",{className:"text-red-500 text-sm",children:o.doctorWelfare})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"OT Expenses"}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-teal-600 pointer-events-none"}),e.jsx("input",{type:"number",step:"0.01",min:"0",placeholder:"0.00",value:t.otExpenses,onChange:s=>b("otExpenses",s.target.value),className:`pl-10 w-full h-10 rounded-md border px-3 focus:outline-none focus:ring-2 focus:ring-teal-600 ${o.otExpenses?"border-red-500":"border-gray-300"}`})]}),o.otExpenses&&e.jsx("p",{className:"text-red-500 text-sm",children:o.otExpenses})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Other Expenses"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-teal-600 pointer-events-none"}),e.jsx("input",{type:"number",step:"0.01",min:"0",placeholder:"0.00",value:t.otherExpenses,onChange:s=>b("otherExpenses",s.target.value),className:`pl-10 w-full h-10 rounded-md border px-3 focus:outline-none focus:ring-2 focus:ring-teal-600 ${o.otherExpenses?"border-red-500":"border-gray-300"}`})]}),o.otherExpenses&&e.jsx("p",{className:"text-red-500 text-sm",children:o.otherExpenses})]}),e.jsxs("div",{className:"mt-4 md:col-span-2 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k,className:"flex items-center bg-teal-600 hover:bg-teal-700 text-white px-6 h-10 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Add Expense"]})})]})]})]})})]})]}),h&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"shadow-lg rounded-lg overflow-hidden bg-white",children:[e.jsx("div",{className:"bg-blue-600 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-1 bg-white h-8 rounded-full"}),e.jsx("h2",{className:"text-xl font-bold",children:"Doctor Expenses Summary"})]})}),e.jsx("div",{className:"p-6",children:O?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ne,{className:"h-8 w-8 animate-spin text-teal-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading summary..."})]}):G.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No doctor expenses found."}):e.jsx("div",{className:"space-y-4",children:Object.entries(T).map(([s,r])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:s}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ee(r.expenses[0]),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Edit"}),e.jsx("button",{onClick:()=>se(r.expenses[0]),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"}),e.jsx("button",{onClick:()=>te(s,r),className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:"PDF"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[e.jsx("p",{className:"text-blue-600 font-medium",children:"Doctor Welfare"}),e.jsxs("p",{className:"text-xl font-bold text-blue-800",children:["PKR ",r.welfare.toFixed(2)]})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[e.jsx("p",{className:"text-green-600 font-medium",children:"OT Expenses"}),e.jsxs("p",{className:"text-xl font-bold text-green-800",children:["PKR ",r.ot.toFixed(2)]})]}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded",children:[e.jsx("p",{className:"text-orange-600 font-medium",children:"Other Expenses"}),e.jsxs("p",{className:"text-xl font-bold text-orange-800",children:["PKR ",r.other.toFixed(2)]})]}),e.jsxs("div",{className:"bg-teal-50 p-3 rounded",children:[e.jsx("p",{className:"text-teal-600 font-medium",children:"Total"}),e.jsxs("p",{className:"text-xl font-bold text-teal-800",children:["PKR ",r.total.toFixed(2)]})]})]}),e.jsxs("p",{className:"text-gray-500 text-sm mt-2",children:[r.count," expense entries"]})]},s))})})]}),e.jsxs("div",{className:"shadow-lg rounded-lg overflow-hidden bg-white",children:[e.jsx("div",{className:"bg-green-600 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-1 bg-white h-8 rounded-full"}),e.jsx("h2",{className:"text-xl font-bold",children:"Hospital Expenses Summary"})]})}),e.jsx("div",{className:"p-6",children:_.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hospital expenses found."}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[e.jsx("p",{className:"text-blue-600 font-medium",children:"Doctor Welfare"}),e.jsxs("p",{className:"text-xl font-bold text-blue-800",children:["PKR ",g.welfare.toFixed(2)]})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[e.jsx("p",{className:"text-green-600 font-medium",children:"OT Expenses"}),e.jsxs("p",{className:"text-xl font-bold text-green-800",children:["PKR ",g.ot.toFixed(2)]})]}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded",children:[e.jsx("p",{className:"text-orange-600 font-medium",children:"Other Expenses"}),e.jsxs("p",{className:"text-xl font-bold text-orange-800",children:["PKR ",g.other.toFixed(2)]})]}),e.jsxs("div",{className:"bg-teal-50 p-3 rounded",children:[e.jsx("p",{className:"text-teal-600 font-medium",children:"Total"}),e.jsxs("p",{className:"text-xl font-bold text-teal-800",children:["PKR ",g.total.toFixed(2)]})]})]}),e.jsxs("p",{className:"text-gray-500 text-sm mt-2",children:[g.count," expense entries"]})]})})})]}),e.jsxs("div",{className:"shadow-lg rounded-lg overflow-hidden bg-white",children:[e.jsx("div",{className:"bg-teal-600 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-1 bg-white h-8 rounded-full"}),e.jsx("h2",{className:"text-xl font-bold",children:"Grand Total Summary"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"border-2 border-teal-600 rounded-lg p-6 bg-teal-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-teal-800 mb-2",children:"Overall Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("p",{className:"text-blue-600 font-medium",children:"Total Doctor Welfare"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-800",children:["PKR"," ",(Object.values(T).reduce((s,r)=>s+r.welfare,0)+g.welfare).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("p",{className:"text-green-600 font-medium",children:"Total OT Expenses"}),e.jsxs("p",{className:"text-2xl font-bold text-green-800",children:["PKR"," ",(Object.values(T).reduce((s,r)=>s+r.ot,0)+g.ot).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("p",{className:"text-orange-600 font-medium",children:"Total Other Expenses"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-800",children:["PKR"," ",(Object.values(T).reduce((s,r)=>s+r.other,0)+g.other).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-2 border-teal-600",children:[e.jsx("p",{className:"text-teal-600 font-medium",children:"Overall Total"}),e.jsxs("p",{className:"text-3xl font-bold text-teal-800",children:["PKR ",V().toFixed(2)]})]})]}),e.jsxs("p",{className:"text-gray-600 mt-4",children:["Total Entries: ",d.length," | Doctors: ",Object.keys(T).length," | Hospital Entries: ",_.length]})]})})})]})]}),w&&e.jsx(Te,{expense:w,onClose:()=>E(null),doctors:$,onUpdateSuccess:()=>j(M())}),F&&e.jsx(Se,{expense:F,onClose:()=>P(null),onDeleteSuccess:()=>j(M())}),C&&e.jsx(Fe,{data:C,onClose:()=>f(null)})]})}export{$e as default};
