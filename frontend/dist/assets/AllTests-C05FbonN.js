import{f as N,r as h,u as a,c1 as b,c2 as y,c3 as v,c4 as w,c5 as k,c6 as L,d as C,c7 as T,j as e,c8 as p,y as u}from"./index-D_CM1r6M.js";import{t as A,v as M}from"./index-jLjFIv2f.js";import"./iconBase-DSUUJbys.js";const S=()=>{const n=N(),[i,x]=h.useState(""),l=a(b),o=a(y),c=a(v);a(w),a(k),a(L);const m=C();h.useEffect(()=>{n(T())},[n]);const j=()=>{x("")},d=l.filter(s=>{if(!i)return!0;const t=i.trim().toLowerCase();return s.testName?.toLowerCase().includes(t)||s.testCode?.toLowerCase().includes(t)}),f=async s=>{if(!window.confirm("Are you sure you want to delete this test?"))return;const t=await n(p(s));if(p.fulfilled.match(t))u.success("Test deleted successfully!");else{const r=t.payload||t.error?.message||"Failed to delete test.";u.error(r)}};return e.jsxs("div",{className:"min-h-screen bg-primary-50 w-full",children:[e.jsx("div",{className:"bg-primary-800 border-b border-primary-100 sticky top-0 z-20 w-full shadow-sm",children:e.jsx("div",{className:"w-full px-2 sm:px-4 md:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 w-full",children:[e.jsxs("div",{className:"flex items-center  mb-2",children:[e.jsx("div",{className:"h-10 w-1 bg-primary-600 mr-3 rounded-full"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-white tracking-tight",children:"Lab Tests Management"}),e.jsx("p",{className:"text-white mt-1 text-base font-medium",children:"Manage and view all laboratory tests"})]})]}),e.jsx("div",{className:"flex items-center gap-3 w-full md:w-auto",children:e.jsxs("div",{className:"flex items-center bg-white rounded-xl shadow border border-primary-100 px-2 sm:px-4 py-2 w-full md:w-auto",children:[e.jsx("svg",{className:"w-5 h-5 text-primary-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search tests by name or code...",value:i,onChange:s=>x(s.target.value),className:"bg-transparent border-none outline-none text-primary-800 placeholder-primary-400 w-full min-w-0 sm:w-64 text-sm"}),i&&e.jsx("button",{onClick:j,className:"ml-2 p-1 hover:bg-primary-50 rounded-full transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})})}),e.jsx("div",{className:"w-full px-2 sm:px-4 md:px-8 py-8",children:o?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mb-4"}),e.jsx("p",{className:"text-primary-700 text-lg",children:"Loading lab tests..."})]})}):c?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center shadow",children:[e.jsx("svg",{className:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Tests"}),e.jsx("p",{className:"text-red-600",children:c})]}):e.jsxs("div",{className:"space-y-8 w-full",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("div",{className:"h-8 w-1 bg-primary-600 mr-3 rounded-full"}),e.jsx("h2",{className:"text-2xl font-bold text-primary-800 tracking-tight",children:"Lab Test Stats"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10 w-full",children:[e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-primary-100 hover:shadow-xl transition-all duration-300 w-full flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-400 text-xs sm:text-sm font-medium",children:"Total Tests"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-primary-800",children:l.length})]}),e.jsx("div",{className:"bg-primary-100 p-3 rounded-xl",children:e.jsx("svg",{className:"w-6 h-6 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-primary-100 hover:shadow-xl transition-all duration-300 w-full flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-400 text-xs sm:text-sm font-medium",children:"Filtered Tests"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-teal-700",children:d.length})]}),e.jsx("div",{className:"bg-teal-100 p-3 rounded-xl",children:e.jsx("svg",{className:"w-6 h-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-primary-100 hover:shadow-xl transition-all duration-300 w-full flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-400 text-xs sm:text-sm font-medium",children:"Fasting Tests"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-orange-600",children:l.filter(s=>s.requiresFasting).length})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl",children:e.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-primary-100 hover:shadow-xl transition-all duration-300 w-full flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-400 text-xs sm:text-sm font-medium",children:"Avg Price"}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-green-700",children:["Rs ",l.length>0?Math.round(l.reduce((s,t)=>s+(t.testPrice||0),0)/l.length):0]})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})})]}),e.jsxs("div",{className:"flex items-center mb-6 mt-12",children:[e.jsx("div",{className:"h-8 w-1 bg-primary-600 mr-3 rounded-full"}),e.jsx("h2",{className:"text-2xl font-bold text-primary-800 tracking-tight",children:"All Lab Tests"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl border border-primary-100 overflow-x-auto w-full",children:e.jsxs("table",{className:"min-w-[900px] w-full",children:[e.jsx("thead",{className:"bg-linear-to-r from-primary-600 to-teal-600 text-white rounded-t-2xl",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-4 px-2 sm:px-4 text-left font-semibold text-xs sm:text-sm",children:"Test Name"}),e.jsx("th",{className:"py-4 px-2 sm:px-4 text-left font-semibold text-xs sm:text-sm",children:"Code"}),e.jsx("th",{className:"py-4 px-2 sm:px-4 text-left font-semibold text-xs sm:text-sm",children:"Price"}),e.jsx("th",{className:"py-4 px-2 sm:px-4 text-left font-semibold text-xs sm:text-sm",children:"Fasting"}),e.jsx("th",{className:"py-4 px-2 sm:px-4 text-left font-semibold text-xs sm:text-sm",children:"Report Time"}),e.jsx("th",{className:"py-4 px-2 sm:px-4 text-left font-semibold text-xs sm:text-sm",children:"Fields"}),e.jsx("th",{className:"py-4 px-2 sm:px-4 text-left font-semibold text-xs sm:text-sm",children:"Created"}),e.jsx("th",{className:"py-4 px-2 sm:px-4 text-left font-semibold text-xs sm:text-sm",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-primary-50",children:[d.map((s,t)=>e.jsxs("tr",{className:"hover:bg-linear-to-r hover:from-primary-50 hover:to-teal-50 transition-all duration-200 cursor-pointer group",onClick:()=>m(`/lab/test/${s._id}`),children:[e.jsx("td",{className:"py-4 px-2 sm:px-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-linear-to-br from-primary-500 to-teal-600 rounded-lg flex items-center justify-center text-white font-semibold text-sm shadow",children:s.testName?.charAt(0)?.toUpperCase()||"T"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-primary-700 group-hover:text-primary-600 transition-colors text-xs sm:text-base",children:s.testName}),e.jsx("p",{className:"text-xs text-primary-400",children:"Click to view details"})]})]})}),e.jsx("td",{className:"py-4 px-2 sm:px-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:s.testCode})}),e.jsx("td",{className:"py-4 px-2 sm:px-4",children:e.jsxs("span",{className:"font-semibold text-green-600",children:["Rs ",s.testPrice]})}),e.jsx("td",{className:"py-4 px-2 sm:px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.requiresFasting?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:s.requiresFasting?"Yes":"No"})}),e.jsx("td",{className:"py-4 px-2 sm:px-4",children:e.jsx("span",{className:"text-primary-700 text-xs sm:text-sm",children:s.reportDeliveryTime||"-"})}),e.jsx("td",{className:"py-4 px-2 sm:px-4",children:s.fields&&s.fields.length>0?e.jsxs("div",{className:"space-y-1",children:[s.fields.slice(0,2).map((r,g)=>e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium text-primary-700",children:r.name}),r.unit&&e.jsxs("span",{className:"text-primary-400",children:[" (",r.unit,")"]})]},g)),s.fields.length>2&&e.jsxs("span",{className:"text-xs text-primary-600",children:["+",s.fields.length-2," more"]})]}):e.jsx("span",{className:"text-primary-300 text-sm",children:"-"})}),e.jsx("td",{className:"py-4 px-2 sm:px-4",children:e.jsx("span",{className:"text-primary-400 text-xs sm:text-sm",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"-"})}),e.jsx("td",{className:"py-4 px-2 sm:px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"inline-flex items-center px-3 py-1.5 rounded-md bg-primary-600 text-white hover:bg-primary-700 transition text-xs font-semibold shadow-sm",onClick:r=>{r.stopPropagation(),m(`/lab/test/edit/${s._id}`)},title:"Edit",children:e.jsx(A,{className:"mr-1"})}),e.jsx("button",{className:"inline-flex items-center px-3 py-1.5 rounded-md bg-red-600 text-white hover:bg-red-700 transition text-xs font-semibold shadow-sm",onClick:r=>{r.stopPropagation(),f(s._id)},title:"Delete",children:e.jsx(M,{className:"mr-1"})})]})})]},s._id)),d.length===0&&!o&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("svg",{className:"w-16 h-16 text-primary-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-600 mb-2",children:"No tests found"}),e.jsx("p",{className:"text-primary-400",children:i?"No tests match your search criteria.":"No tests have been added yet."})]})]})})})]})]})})]})})]})};export{S as default};
