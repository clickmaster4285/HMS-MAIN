import{r as m,j as e,T as B,d as I,f as R,u as S,b7 as k}from"./index-D_CM1r6M.js";import{a1 as f,c as L,s as $,a2 as M,a3 as G,F as _,o as U,R as H,S as z,U as O,p as E,a4 as J,a5 as C}from"./index-jLjFIv2f.js";import{G as Q}from"./iconBase-DSUUJbys.js";import{D as K}from"./DateRangePicker-SV5E2ldF.js";import{g as V}from"./getRoleRoute-Do-Qfut4.js";function q(a){return Q({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.05 3.636a1 1 0 010 1.414 7 7 0 000 9.9 1 1 0 11-1.414 1.414 9 9 0 010-12.728 1 1 0 011.414 0zm9.9 0a1 1 0 011.414 0 9 9 0 010 12.728 1 1 0 11-1.414-1.414 7 7 0 000-9.9 1 1 0 010-1.414zM7.879 6.464a1 1 0 010 1.414 3 3 0 000 4.243 1 1 0 11-1.415 1.414 5 5 0 010-7.07 1 1 0 011.415 0zm4.242 0a1 1 0 011.415 0 5 5 0 010 7.072 1 1 0 01-1.415-1.415 3 3 0 000-4.242 1 1 0 010-1.415zM10 9a1 1 0 011 1v.01a1 1 0 11-2 0V10a1 1 0 011-1z",clipRule:"evenodd"},child:[]}]})(a)}const W=({doctorId:a,patients:r=[]})=>{const[l,c]=m.useState([]),[s,u]=m.useState(""),[p,N]=m.useState("createdAt"),n=new Date,[h,y]=m.useState({start:new Date(n.setHours(0,0,0,0)),end:new Date(n.setHours(23,59,59,999))}),[o,g]=m.useState({bloodType:"",gender:""});return m.useEffect(()=>{if(r&&r.length>0){const t=r.filter(d=>{const b=new Date(d[p]||d.createdAt),v=new Date(h.start),w=new Date(h.end);v.setHours(0,0,0,0),w.setHours(23,59,59,999);const A=b>=v&&b<=w,F=d.patient_Name.toLowerCase().includes(s.toLowerCase())||d.patient_MRNo.toLowerCase().includes(s.toLowerCase())||d.patient_CNIC.toLowerCase().includes(s.toLowerCase()),T=!o.bloodType||d.patient_BloodType&&d.patient_BloodType.toUpperCase()===o.bloodType.toUpperCase(),P=!o.gender||d.patient_Gender&&d.patient_Gender.toLowerCase()===o.gender.toLowerCase();return A&&F&&T&&P});c(t)}else c([])},[r,h,s,o,p]),e.jsxs("div",{className:"mt-12 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-linear-to-r from-primary-500 to-primary-700 p-3 rounded-full mr-4 shadow-lg",children:e.jsx(f,{className:"text-white text-2xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Patient Records"}),e.jsx("p",{className:"text-primary-600",children:"Appointments and treatment history"})]})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(L,{className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search patients...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:s,onChange:t=>u(t.target.value)})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md mb-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx($,{className:"text-primary-600 mr-2"}),e.jsx("h3",{className:"font-semibold text-gray-700",children:"Filters"})]}),e.jsxs("div",{className:"flex flex-col xl:justify-between xl:flex-row space-x-3 space-y-3 ",children:[e.jsx("div",{className:"",children:e.jsx(K,{onDateRangeChange:y,className:"w-full "})}),e.jsxs("div",{className:"flex flex-col xl:flex-row space-x-2 space-y-3",children:[e.jsxs("div",{className:"py-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Type"}),e.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:o.bloodType,onChange:t=>g({...o,bloodType:t.target.value}),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"A+",children:"A+"}),e.jsx("option",{value:"A-",children:"A-"}),e.jsx("option",{value:"B+",children:"B+"}),e.jsx("option",{value:"B-",children:"B-"}),e.jsx("option",{value:"AB+",children:"AB+"}),e.jsx("option",{value:"AB-",children:"AB-"}),e.jsx("option",{value:"O+",children:"O+"}),e.jsx("option",{value:"O-",children:"O-"})]})]}),e.jsxs("div",{className:"py-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),e.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:o.gender,onChange:t=>g({...o,gender:t.target.value}),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors shadow",children:"Apply Filters"}),e.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",onClick:()=>{u(""),y({start:new Date,end:new Date}),g({bloodType:"",gender:""})},children:"Reset"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(j,{icon:e.jsx(f,{className:"text-sky-500 text-2xl"}),title:"Total Patients",value:r?.length||0,trend:"up",color:"from-gray-50 to-sky-100"}),e.jsx(j,{icon:e.jsx(M,{className:"text-green-500 text-2xl"}),title:"Filtered Records",value:l.length,trend:l.length>0?"up":"down",color:"from-gray-50 to-green-100"}),e.jsx(j,{icon:e.jsx(q,{className:"text-yellow-500 text-2xl"}),title:`${o.gender||"Male"} Patients`,value:l.filter(t=>o.gender?t.patient_Gender&&t.patient_Gender.toString().toLowerCase()===o.gender.toLowerCase():t.patient_Gender&&t.patient_Gender.toString().toLowerCase()==="male").length,color:"from-gray-50 to-yellow-100"}),e.jsx(j,{icon:e.jsx(G,{className:"text-purple-500 text-2xl"}),title:`Blood Type ${o.bloodType||"B+"}`,value:l.filter(t=>t.patient_BloodType&&t.patient_BloodType.toUpperCase()===(o.bloodType||"B+").toUpperCase()).length,color:"from-gray-50 to-purple-100"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-8 border border-gray-100",children:[e.jsx("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:e.jsxs("h3",{className:"font-semibold text-gray-700",children:["Showing ",l.length," of ",r.length," patients"]})}),l.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx(x,{children:"Patient"}),e.jsx(x,{children:"MR No."}),e.jsx(x,{children:"Age/Gender"}),e.jsx(x,{children:"Contact"}),e.jsx(x,{children:"Blood Type"}),e.jsx(x,{children:"Hospital Info"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(t=>e.jsx(X,{patient:t},t.patient_MRNo))})]})}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"mx-auto w-24 h-24 mb-4 text-gray-300",children:e.jsx(f,{className:"w-full h-full"})}),e.jsx("h4",{className:"text-lg font-medium text-gray-500 mb-1",children:"No patients found"}),e.jsx("p",{className:"text-gray-400",children:s?"Try a different search term":"Adjust your filters to see results"})]})]})]})},j=({icon:a,title:r,value:l,trend:c,color:s})=>e.jsxs("div",{className:`bg-linear-to-r ${s} p-4 border border-primary-700 text-primary-600 rounded-xl shadow-sm transform hover:scale-[1.02] transition-transform`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium opacity-90",children:r}),e.jsx("p",{className:"text-2xl font-bold",children:l})]}),e.jsx("div",{className:"p-2 rounded-full bg-white bg-opacity-20",children:a})]}),c&&e.jsx("div",{className:"mt-2 text-xs flex items-center",children:c==="up"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-1",children:"↑"})," Increased"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-1",children:"↓"})," Decreased"]})})]}),x=({children:a})=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a}),X=({patient:a})=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover border-2 border-white group-hover:border-primary-100 transition-colors",src:`https://ui-avatars.com/api/?name=${encodeURIComponent(a.patient_Name)}&background=random`,alt:a.patient_Name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 group-hover:text-primary-600 transition-colors",children:a.patient_Name}),e.jsx("div",{className:"text-xs text-gray-500",children:a.patient_CNIC})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-mono font-medium text-gray-900 bg-gray-50 px-2 py-1 rounded inline-block",children:a.patient_MRNo})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:a.patient_Age}),e.jsx("div",{className:"text-xs text-gray-500",children:a.patient_Gender})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:a.patient_ContactNo}),e.jsx("div",{className:"text-xs text-gray-500",children:a.patient_Guardian?.guardian_Contact})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Y,{bloodType:a.patient_BloodType})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:a.patient_HospitalInformation?.doctor_Name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["PKR ",a.patient_HospitalInformation?.total_Fee?.toLocaleString()]})]})]}),Y=({bloodType:a})=>{const l={"A+":"bg-red-100 text-red-800","A-":"bg-red-50 text-red-700","B+":"bg-primary-100 text-primary-800","B-":"bg-primary-50 text-primary-700","AB+":"bg-purple-100 text-purple-800","AB-":"bg-purple-50 text-purple-700","O+":"bg-green-100 text-green-800","O-":"bg-green-50 text-green-700"}[a]||"bg-gray-100 text-gray-800";return e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-4 font-semibold rounded-full ${l}`,children:a||"Unknown"})},re=()=>{const{doctorId:a}=B(),r=I(),l=R(),c="http://192.168.88.29:5002",{currentDoctor:s,patients:u=[],status:p,error:N}=S(n=>n.doctor);return m.useEffect(()=>{a&&l(k(a)).unwrap().catch(n=>{console.error("Failed to fetch doctor:",n)})},[a,l]),p==="loading"?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):p==="failed"?e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:N})})]})}):s?e.jsxs("div",{className:"container mx-auto p-4 border border-primary-600 rounded-lg ",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[e.jsx("button",{onClick:()=>r(V("doctors")),className:"text-primary-600 hover:text-primary-800",children:"Doctors"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{children:"Details"})]}),e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("div",{className:"bg-primary-100 p-3 rounded-full mr-4",children:e.jsx(_,{className:"text-primary-600 text-2xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Doctor Details"}),e.jsx("p",{className:"text-primary-600",children:"Complete professional information"})]})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-primary-50 p-6 flex flex-col md:flex-row items-start md:items-center",children:[e.jsx("div",{className:"mr-6 mb-4 md:mb-0",children:e.jsx("img",{src:s?.doctor_Image?.filePath?`${c}${s.doctor_Image.filePath}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(s?.doctor_Image?.filePath||"D")}&background=random`,alt:s?.user.user_Name,className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow",onError:n=>{n.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(s?.user.user_Name||"D")}&background=random`}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:s?.user.user_Name}),e.jsx("p",{className:"text-primary-600",children:s?.user?.user_Identifier}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${s?.doctor_Status==="Available"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s?.doctor_Status||"Status"})})]})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center",children:[e.jsx(_,{className:"mr-2 text-primary-600"}),"Basic Information"]}),e.jsxs("div",{className:"space-y-3 ",children:[e.jsx(i,{icon:e.jsx(U,{}),label:"Name",value:s?.user.user_Name}),e.jsx(i,{icon:e.jsx(H,{}),label:"Email",value:s?.user.user_Email}),e.jsx(i,{icon:e.jsx(z,{}),label:"Contact",value:s?.user.user_Contact}),e.jsx(i,{icon:e.jsx(O,{}),label:"Address",value:s?.user.user_Address})]})]}),e.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center",children:[e.jsx(E,{className:"mr-2 text-primary-600"}),"Professional Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{label:"Department",value:s?.doctor_Department}),e.jsx(i,{label:"Specialization",value:s?.doctor_Specialization}),e.jsx(i,{label:"Type",value:s?.doctor_Type}),e.jsx(i,{label:"License Number",value:s?.doctor_LicenseNumber}),e.jsx(i,{label:"Consultation Fee",value:s?.doctor_Fee?`PKR-${s.doctor_Fee}`:"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center",children:[e.jsx(J,{className:"mr-2 text-primary-600"}),"Qualifications"]}),e.jsx("div",{className:"space-y-2",children:s?.doctor_Qualifications?.length>0?e.jsx("ul",{className:"flex flex-col text-white space-y-2 pl-5",children:s.doctor_Qualifications.map((n,h)=>e.jsx("li",{className:"py-1 rounded-b-lg bg-primary-600 px-3 ",children:n},h))}):e.jsx("p",{className:"text-primary-500",children:"No qualifications listed"})})]}),e.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center",children:[e.jsx(C,{className:"mr-2 text-primary-600"}),"Contract Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{label:"Doctor Percentage",value:s?.doctor_Contract?.doctor_Percentage?`${s.doctor_Contract.doctor_Percentage}%`:"N/A"}),e.jsx(i,{label:"Hospital Percentage",value:s?.doctor_Contract?.hospital_Percentage?`${s.doctor_Contract.hospital_Percentage}%`:"N/A"}),e.jsx(i,{label:"Contract Time",value:s?.doctor_Contract?.contract_Time}),e.jsx(i,{label:"Joining Date",value:s?.doctor_Contract?.doctor_JoiningDate?new Date(s.doctor_Contract.doctor_JoiningDate).toLocaleDateString():"N/A"})]})]}),e.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center",children:[e.jsx(C,{className:"mr-2 text-primary-600"}),"Documents"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(D,{label:"Profile Image",path:s?.doctor_Image?.filePath?`${c}${s.doctor_Image.filePath}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(s?.doctor_Image?.filePath||"D")}&background=random`}),e.jsx(D,{label:"Agreement",path:s?.doctor_Contract?.doctor_Agreement?.filePath?`${c}${s.doctor_Contract.doctor_Agreement.filePath}`:null})]})]})]})]})})]}),e.jsx(W,{doctorId:a,patients:u})]}):e.jsx("div",{className:"text-center py-8 text-primary-500",children:"No doctor data found"})},i=({icon:a,label:r,value:l})=>e.jsxs("div",{className:"flex items-start",children:[a&&e.jsx("span",{className:"mr-2 text-primary-500 mt-1",children:a}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-primary-700",children:r}),e.jsx("p",{className:"text-primary-900 underline italic underline-offset-4 ",children:l||"N/A"})]})]}),D=({label:a,path:r})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-primary-700",children:a}),r?e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 font-semibold hover:text-primary-800 text-sm",children:"View Document"}):e.jsx("span",{className:"text-primary-500 text-sm",children:"Not available"})]});export{re as default};
